!function(){var e={771:function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?t(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function r(t,n,r){return(n=function(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,n||"default");if("object"!=e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}var a,o;window.SequraFE||(window.SequraFE={}),window.SequraFE.customHeader||(window.SequraFE.customHeader={}),SequraFE.ajaxService={get:function(e,t){return o("GET",e,null,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})},post:function(e,t,n,r){return o("POST",e,t,r,n)},put:function(e,t,n,r){return o("PUT",e,t,r,n)},delete:function(e,t,n,r){return o("DELETE",e,t,r,n)},call:o=function(e,t,r,o,i){var s=SequraFE.StateUUIDService.getStateUUID();return new Promise((function(l,c){var u,d;t=(t=t.replace("https:","")).replace("http:","");var p={};null!==(u=SequraFE)&&void 0!==u&&null!==(d=u.integration)&&void 0!==d&&d.authToken&&(p={Authorization:"Bearer ".concat(SequraFE.integration.authToken)});var h=n(n({"Content-Type":"application/json"},p),i||{});"multipart/form-data"===h["Content-Type"]&&delete h["Content-Type"];var f=r?"application/json"===h["Content-Type"]?JSON.stringify(r):r:void 0;fetch(t,{method:e,headers:h,body:f}).then((function(e){s===SequraFE.StateUUIDService.getStateUUID()&&a(e,o).then(l).catch(c)})).catch(c)}))},handleResponse:a=function(e,t){t||(t=SequraFE.responseService.errorHandler);try{if(e.ok)return e.json();if(401===e.status||403===e.status)return e.json().then(SequraFE.responseService.unauthorizedHandler);if(400===e.status)return e.json().then(t)}catch(e){}return t({status:e.status,error:e.statusMessage})}}},55:function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?t(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function r(t,n,r){return(n=function(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,n||"default");if("object"!=e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}window.SequraFE||(window.SequraFE={}),SequraFE.ConnectionSettingsForm=function(e,t){var r,a,o=this,i=SequraFE.ajaxService,s=SequraFE,l=s.elementGenerator,c=s.validationService,u=s.utilities,d=s.components,p=!1,h={environment:"sandbox",username:"",password:"",sendStatisticalData:!0};this.render=function(){if(!r)for(var t in r=u.cloneObject(h)){var n,o;r[t]=null!==(n=null===(o=e.connectionSettings)||void 0===o?void 0:o[t])&&void 0!==n?n:h[t]}a=u.cloneObject(r),f(),E(!0),u.hideLoader()};var f=function(){var e=document.querySelector(".sq-content");null==e||e.append(l.createElement("div","sq-content-inner sqv--connect","",null,[l.createElement("div","sqp-flash-message-wrapper"),l.createPageHeading({title:"connection.title.".concat(t.appState),text:"connection.description.".concat(t.appState)}),l.createRadioGroupField({value:a.environment,label:"connection.environment.label",options:[{label:"connection.environment.options.live",value:"live"},{label:"connection.environment.options.sandbox",value:"sandbox"}],onChange:function(e){return g("environment",e)}}),l.createTextField({name:"username-input",value:a.username,className:"sq-text-input",label:"connection.username.label",description:"connection.username.description",onChange:function(e){return g("username",e)}}),l.createPasswordField({name:"password-input",value:a.password,className:"sq-password-input",label:"connection.password.label",description:"connection.password.description",onChange:function(e){return g("password",e)}})])),document.querySelector(".sqp-description").append(l.createButtonLink({className:"sq-link-button",text:"connection.description.endLink",href:"https://en.sequra.com/en/contact",openInNewTab:!0})),m()},m=function(){var e=document.querySelector(".sq-content"),n=document.querySelector(".sq-content-inner");if(t.appState===SequraFE.appStates.ONBOARDING)return null==n||n.append(SequraFE.isPromotional?[]:l.createCheckboxField({className:"sq-statistics",value:a.sendStatisticalData,description:"connection.sendStatisticalData.description.text",onChange:function(e){return g("sendStatisticalData",e)}}),l.createButtonField({className:"sqm--block",buttonType:"primary",buttonLabel:"general.continue",onClick:v})),void(!SequraFE.isPromotional&&document.querySelector(".sq-statistics .sqp-field-subtitle").append(l.createButtonLink({className:"sq-info-button",text:"connection.sendStatisticalData.description.endLink",href:"https://en.sequra.com/",openInNewTab:!0})));null==n||n.append(l.createButtonField({className:"sqm--block",buttonType:"danger",buttonSize:"medium",buttonLabel:"general.disconnect",onClick:q})),null==e||e.append(l.createPageFooter({onCancel:function(){for(var e=document.querySelector(".sq-content");null!=e&&e.firstChild;)null==e||e.removeChild(e.firstChild);o.render()},onSave:v}))},g=function(e,t){["username","password"].includes(e)&&c.validateRequiredField(document.querySelector('[name="'.concat(e,'-input"]')),"validation.requiredField"),a[e]=t,E(!1)},v=function(){var o;if(o=0,!c.validateRequiredField(document.querySelector('[name="username-input"]'),"validation.requiredField")&&o++,!c.validateRequiredField(document.querySelector('[name="password-input"]'),"validation.requiredField")&&o++,0===o)if(b()||t.appState===SequraFE.appStates.ONBOARDING)if(b()&&r.environment!==a.environment&&t.appState!==SequraFE.appStates.ONBOARDING)O().then((function(r){var o;if(r){u.showLoader();var s=t.appState===SequraFE.appStates.ONBOARDING?"test":null===(o=e.countrySettings[0])||void 0===o?void 0:o.merchantId;i.post(t.validateConnectionDataUrl,n(n({},a),{},{merchantId:s}),SequraFE.customHeader).then((function(e){return S(e)?w():y()}))}}));else{var s;u.showLoader();var l=t.appState===SequraFE.appStates.ONBOARDING?"test":null===(s=e.countrySettings[0])||void 0===s?void 0:s.merchantId;i.post(t.validateConnectionDataUrl,n(n({},a),{},{merchantId:l}),SequraFE.customHeader).then((function(e){return S(e)?w():y()}))}else E(!0)},b=function(){return r.environment!==a.environment||r.password!==a.password||r.username!==a.username||r.sendStatisticalData!==a.sendStatisticalData},S=function(e){return!e.isValid&&e.reason.includes("merchantId")&&(p=!0),e.isValid||e.reason.includes("merchantId")},y=function(){SequraFE.responseService.errorHandler({errorCode:"general.errors.connection.invalidUsernameOrPassword"}).catch((function(){})),u.hideLoader()},w=function(){u.showLoader(),i.post(t.saveConnectionDataUrl,a,SequraFE.customHeader).then((function(){if(t.appState===SequraFE.appStates.ONBOARDING){0!==r.username.length&&SequraFE.state.setCredentialsChanged();var e=SequraFE.pages.onboarding.indexOf(SequraFE.appPages.ONBOARDING.CONNECT);SequraFE.pages.onboarding.length>e+1?window.location.hash=t.appState+"-"+SequraFE.pages.onboarding[e+1]:window.location.hash=SequraFE.appStates.PAYMENT+"-"+SequraFE.appPages.PAYMENT.METHODS}r=u.cloneObject(a),SequraFE.state.setData("connectionSettings",r),E(!0),t.appState===SequraFE.appStates.SETTINGS&&p?(SequraFE.state.setCredentialsChanged(),SequraFE.state.goToState(SequraFE.appStates.ONBOARDING)):u.hideLoader()})).finally((function(){return u.hideLoader()}))},q=function(){F().then((function(e){e&&(u.showLoader(),i.post(t.disconnectUrl,null,SequraFE.customHeader).then((function(){return SequraFE.state.display()})).finally(u.hideLoader))}))},E=function(e){t.appState!==SequraFE.appStates.ONBOARDING&&u.disableFooter(e)},F=function(){return new Promise((function(e){var t=d.Modal.create({title:"connection.disconnect.title",className:"sq-modal sqv--connection-modal",content:[l.createElement("p","","connection.disconnect.message")],footer:!0,buttons:[{type:"secondary",label:"general.cancel",onClick:function(){t.close(),e(!1)}},{type:"primary",label:"general.confirm",onClick:function(){t.close(),e(!0)}}]});t.open()}))},O=function(){return new Promise((function(e){var t=d.Modal.create({title:"connection.modal.title",className:"sq-modal sqv--connection-modal",content:[l.createElement("p","","connection.modal.message")],footer:!0,buttons:[{type:"secondary",label:"general.cancel",onClick:function(){t.close(),e(!1)}},{type:"primary",label:"general.confirm",onClick:function(){t.close(),e(!0)}}]});t.open()}))}}},255:function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var n,r;window.SequraFE||(window.SequraFE={}),window.SequraFE.components||(window.SequraFE.components={}),n=function(e,t){var n=SequraFE.elementGenerator.createElement(e,t.className,t.label);return t.renderer&&t.renderer(n),n},r=function(t,r){var a;r.length&&(a=t.querySelector("tbody")).append.apply(a,e(r.map((function(t){var r=SequraFE.elementGenerator.createElement("tr");return r.append.apply(r,e(t.map((function(e){return n("td",e)})))),r}))))},SequraFE.components.DataTable={create:function(t,a){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sq-table-container",i=SequraFE.elementGenerator.createElementFromHTML("<table><thead><tr></tr></thead><tbody></tbody></table>");t.forEach((function(e){e.label=SequraFE.translationService.translate(e.label)}));var s=i.querySelector("thead tr");return s.append.apply(s,e(t.map((function(e){return n("th",e)})))),r(i,a),SequraFE.elementGenerator.createElement("div",o,"",null,[i])},createTableRows:r}},738:function(){window.SequraFE||(window.SequraFE={}),window.SequraFE.components||(window.SequraFE.components={}),SequraFE.components.Dropdown={create:function(e){return function(e){var t=e.options,n=e.name,r=e.value,a=void 0===r?"":r,o=e.placeholder,i=e.onChange,s=e.onOpenStateChange,l=e.updateTextOnChange,c=void 0===l||l,u=e.searchable,d=void 0!==u&&u,p=SequraFE,h=p.elementGenerator,f=p.translationService,m=function(e){var n=e?t.filter((function(t){return t.label.toLowerCase().includes(e.toLowerCase())})):t;g(n)},g=function(e){E.innerHTML="",e.length?e.forEach((function(e){var t=h.createElement("li","sqp-dropdown-list-item"+(e===y?" sqs--selected":""),e.label);E.append(t),t.addEventListener("click",(function(n){n.stopPropagation(),v.value=e.value,c&&(w.innerHTML=f.translate(e.label)),E.classList.remove("sqs--show"),E.childNodes.forEach((function(e){return e.classList.remove("sqs--selected")})),t.classList.add("sqs--selected"),b.classList.remove("sqs--active"),w.classList.add("sqs--selected"),S.classList.remove("sqs--search-active"),i&&i(e.value)}))})):E.append(h.createElement("li","sqp-dropdown-list-item sqv--no-items","general.noItemsAvailable",{onClick:function(e){e.stopPropagation(),null==q||q.focus()}}))},v=h.createElement("input","sqp-hidden-input","",{type:"hidden",name:n,value:a}),b=h.createElement("div","sq-single-select-dropdown"),S=h.createElement("button","sqp-dropdown-button sqp-field-component","",{type:"button"}),y=t.find((function(e){return e.value===a})),w=h.createElement("span",y?"sqs--selected":"",y?y.label:o);S.append(w);var q=h.createElement("input","sq-text-input","",{type:"text",placeholder:f.translate("general.search")});q.addEventListener("input",(function(e){var t;return m((null===(t=e.currentTarget)||void 0===t?void 0:t.value)||"")})),d&&S.append(q);var E=h.createElement("ul","sqp-dropdown-list");return g(t),S.addEventListener("click",(function(e){e.stopPropagation(),d&&S.classList.contains("sqs--search-active")||(E.classList.toggle("sqs--show"),b.classList.toggle("sqs--active"),null==s||s(E.classList.contains("sqs--show")),d&&(S.classList.toggle("sqs--search-active"),S.classList.contains("sqs--search-active")&&(q.focus(),q.value="",m(""))))})),document.documentElement.addEventListener("click",(function(e){b.contains(e.target)||e.target===b||(E.classList.remove("sqs--show"),b.classList.remove("sqs--active"),S.classList.remove("sqs--search-active"),null==s||s(E.classList.contains("sqs--show")))})),b.append(v,S,E),b}(e)}}},621:function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}var t,n,r,a,o,i,s,l,c,u,d,p,h=["type","size","className","onClick","label"],f=["className","label","description","variation","error"],m=["className","label","description","variation","error","onChange"],g=["className","label","description","variation","error","onChange"],v=["className","label","description","variation","error","onChange"],b=["className","label","description","error","onChange","value"],S=["className","label","description","error","onChange","value"],y=["label","description","variation","error"],w=["type"];function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||P(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(t,n,r){return(n=function(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,n||"default");if("object"!=e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function N(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function C(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||P(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){if(e){if("string"==typeof e)return _(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}window.SequraFE||(window.SequraFE={}),t=function(e,t,n,r,a){var o,i=document.createElement(e);if(t&&(o=i.classList).add.apply(o,C(t.trim().split(" "))),n){var s=n.split("|");i.innerHTML=SequraFE.translationService.translate(s[0],s.slice(1))}return r&&(r.dataset&&(Object.assign(i.dataset,r.dataset),delete r.dataset),Object.assign(i,r),r.onChange&&i.addEventListener("change",r.onChange,!1),r.onClick&&i.addEventListener("click",r.onClick,!1)),a&&i.append.apply(i,C(a)),i},n=function(e){var t=document.createElement("div");return t.innerHTML=e,t.firstElementChild},r=function(e){var n=e.type,r=e.size,a=e.className,o=e.onClick,i=e.label,s=N(e,h),l=["sq-button"];n&&l.push("sqt--"+n),r&&l.push("sqm--"+r),a&&l.push(a);var c=t("button",l.join(" "),"",F({type:"button"},s),[t("span","",i)]);return o&&c.addEventListener("click",(function(e){e.stopPropagation(),e.preventDefault(),o()}),!1),c},a=function(e){var n=e.text,r=e.className,a=void 0===r?"":r,o=e.href,i=e.downloadFile,s=e.openInNewTab,l=t("a",a,"",{href:o,target:s?"_blank":""},[t("span","",n)]);return i&&l.setAttribute("download",i),l},o=function(e,n,r,a,o,i){var s=t("div","sq-field-wrapper "+i+(a?"sqm--"+a:"")),l=t("div","sq-label-wrapper");n&&l.appendChild(t("span","sqp-field-title",n)),r&&l.appendChild(t("span","sqp-field-subtitle",r));var c=t("div","","",null,[e,o?s.appendChild(t("span","sqp-input-error",o)):""]);return s.append(l,c),s},i=function(e){var t=e.className,n=void 0===t?"":t,r=e.label,a=e.description,i=e.variation,s=e.error,l=N(e,f);return o(SequraFE.components.Dropdown.create(l),r,a,i,s,n)},s=function(e){var n=e.className,r=void 0===n?"":n,a=e.label,i=e.description,s=e.variation,l=e.error,c=e.onChange,u=N(e,g),d=t("input","sqp-field-component ".concat(r),"",F({type:"text"},u));return c&&d.addEventListener("change",(function(e){var t;return c(null===(t=e.currentTarget)||void 0===t?void 0:t.value)})),o(d,a,i,s,l,"")},l=function(e){return s(F({type:"number",step:"0.01"},e))},c=function(e){var n=e.name,r=e.value,a=e.className,i=e.options,s=e.label,l=e.description,c=e.error,u=e.onChange,d=t("div","sq-radio-input-group");return i.forEach((function(e){var o=t("label","sq-radio-input"),i={type:"radio",value:e.value,name:n};r===e.value&&(i.checked="checked"),o.append(t("input",a,"",i),t("span","",e.label)),d.append(o),u&&o.addEventListener("click",(function(){return u(e.value)}))})),o(d,s,l,c,"")},u=function(e){var n=e.className,r=void 0===n?"":n,a=e.label,o=e.description,i=e.error,s=e.onChange,l=e.value,c=N(e,b),u=t("input","sqp-toggle-input","",F({type:"checkbox",checked:l},c));s&&u.addEventListener("change",(function(){return s(u.checked)}));var d=t("div",r+" sq-field-wrapper sqt--toggle","",null,[t("h3","sqp-field-title",a,null,[t("label","sq-toggle","",null,[u,t("span","sqp-toggle-round")])])]);return o&&d.appendChild(t("span","sqp-field-subtitle",o)),i&&d.appendChild(t("span","sqp-input-error",i)),d},d=function(e){var t=e.label,n=e.description,a=e.className,i=e.buttonType,s=e.buttonSize,l=e.buttonLabel,c=e.onClick,u=e.error,d=r({type:i,size:s,className:"",label:SequraFE.translationService.translate(l),onClick:c});return o(d,t,n,"",u,a)},p=function(e){var t=e.label,n=e.text,r=e.description,i=e.href,s=e.error,l=a({text:SequraFE.translationService.translate(n),className:"",href:i});return o(l,t,r,"",s,"")},SequraFE.elementGenerator={createElement:t,createElementFromHTML:n,createButton:r,createLoader:function(e){var n=e.type,r=e.variation,a=["sq-loader"];return n&&a.push("sqt--"+n),r&&a.push("sqm--"+r),t("div",a.join(" "),"",null,[t("span","sqp-spinner",null)])},createDropdownField:i,createPasswordField:function(e){var n=e.className,r=void 0===n?"":n,a=e.label,i=e.description,s=e.variation,l=e.error,c=e.onChange,u=N(e,m),d=t("div","sq-password ".concat(r)),p=t("input","sqp-field-component","",F({type:"password"},u)),h=t("span");return h.addEventListener("click",(function(){"password"===p.type?p.type="text":p.type="password"})),c&&p.addEventListener("change",(function(e){var t;return c(null===(t=e.currentTarget)||void 0===t?void 0:t.value)})),d.append(p,h),o(d,a,i,s,l,"")},createTextField:s,createTextArea:function(e){var n=e.className,r=void 0===n?"":n,a=e.label,i=e.description,s=e.variation,l=e.error,c=e.onChange,u=N(e,v),d=t("textarea","sqp-field-component ".concat(r),"",F({},u));return c&&d.addEventListener("change",(function(e){var t;return c(null===(t=e.currentTarget)||void 0===t?void 0:t.value)})),o(d,a,i,s,l,"sqp-textarea-field")},createNumberField:l,createToggleField:u,createCheckboxField:function(e){var n=e.className,r=void 0===n?"":n,a=e.label,o=e.description,i=e.error,s=e.onChange,l=e.value,c=N(e,S),u=t("input","sqp-checkbox-input","",F({type:"checkbox",checked:l},c));s&&u.addEventListener("change",(function(){return s(u.checked)}));var d=t("div",r+" sq-field-wrapper sqt--checkbox");return a&&d.appendChild(t("h3","sqp-field-title",a)),d.appendChild(t("div","sqp-description-wrapper","",null,[t("label","sq-checkbox","",null,[u,t("span","sqp-checkmark")]),o&&t("span","sqp-field-subtitle",o)])),i&&d.appendChild(t("span","sqp-input-error",i)),d},createRadioGroupField:c,createFlashMessage:function(e,n,a){var o,i=function(){s.remove()},s=t("div","sq-alert sqt--".concat(n));if(Array.isArray(e)){var l=q(e,2),c=l[0],u=l[1];o=t("div","sqp-alert-title","",null,[t("span","sqp-message","",null,[t("span","sqp-message-title",c),t("span","sqp-message-description",u)])])}else o=t("span","sqp-alert-title",e);var d=r({onClick:i});return a&&setTimeout(i,a),s.append(o,d),s},createStoreSwitcher:function(e){var n=t("div","sq-store-switcher");return n.append(i(F({className:"sqp-store-switcher-dropdown ",placeholder:"general.selectStorePlaceholder",variation:"label-left"},e))),n},createButtonField:d,createButtonLink:a,createButtonLinkField:p,createMultiItemSelectorField:function(e){var t=e.label,n=e.description,r=e.variation,a=e.error,i=N(e,y);return o(SequraFE.components.MultiItemSelector.create(i),t,n,r,a,"")},createCountryField:function(e){var r=e.countryCode,a=e.merchantId,o=e.onChange,i=r.toUpperCase();return t("div","sq-country-field-wrapper","",null,[n(SequraFE.imagesProvider.flags[i]||""),s({className:"sq-text-input",name:"country_".concat(i),label:"countries.".concat(i,".label"),description:"countries.".concat(i,".description"),value:a,onChange:o})])},createFormFields:function(e){var t=[];return e.forEach((function(e){var n,r=e.type,a=N(e,w);switch(r){case"text":t.push(s(F(F({},a),{},{className:"sq-text-input"})));break;case"number":t.push(l(F(F({},a),{},{className:"sq-text-input"})));break;case"dropdown":t.push(i(a));break;case"radio":t.push(c(a));break;case"checkbox":t.push(u(a));break;case"button":t.push(d(a));break;case"buttonLink":t.push(p(a))}a.className&&(n=t[t.length-1].classList).add.apply(n,C(a.className.trim().split(" ")))})),t},createPageFooter:function(e){var n=e.onSave,a=e.onCancel;return t("div","sq-page-footer","",null,[t("div","sqp-actions","",null,[r({className:"sqp-cancel",type:"form-secondary",size:"medium",label:"general.cancel",onClick:a}),r({className:"sqp-save",type:"form-primary",size:"medium",label:"general.saveChanges",onClick:n})])])},createToaster:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3,r=t("div","sq-toaster","",null,[t("span","sqp-toaster-title",e),t("button","sq-button","",null,[t("span")])]);return r.children[1].addEventListener("click",(function(){return r.remove()})),setTimeout((function(){return r.remove()}),n),r},createPageHeading:function(e){var n=e.title,r=e.text;return t("div","sqp-page-heading","",null,[t("h3","sqp-page-title",n),t("span","sqp-description",r)])},createVersionBadge:function(e){return t("span","sq-version-badge",e)},createWizardSidebar:function(e){var n=e.steps,r=t("div","sq-wizard-sidebar");return r.append.apply(r,C(n.map((function(e){return t("a","sqp-step"+(e.isActive?" sqs--active":e.isCompleted?" sqs--completed":""),"",{href:e.href},[t("span","sq-link-label",e.label),e.description?t("span","sq-link-description",e.description):""])})))),r},createSupportLink:function(){return t("a","sq-support-link","",{href:SequraFE.translationService.translate("supportLink.link"),target:"_blank"},[t("span","sq-support-link-label","supportLink.label")])},createSettingsSidebar:function(e){var n=e.links,r=t("ul","sq-settings-sidebar");return r.append.apply(r,C(n.map((function(e){return e?t("li","sq-sidebar-item"+(e.isActive?" sqs--active":""),"",null,[t("a","sq-sidebar-link sqm--"+e.icon,"",{href:e.href},[t("span","",e.label)])]):""})))),r}}},474:function(){window.SequraFE||(window.SequraFE={}),SequraFE.formFactory=new function(){this.getInstance=function(e,t,n){var r=e.charAt(0).toUpperCase()+e.slice(1)+"Form";return SequraFE[r]?new SequraFE[r](t,n):null}}},789:function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?t(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function r(t,n,r){return(n=function(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,n||"default");if("object"!=e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}window.SequraFE||(window.SequraFE={}),SequraFE.GeneralSettingsForm=function(e,t){var r,a,o,i,s,l,c,u,d,p,h,f,m,g,v,b,S=this,y=SequraFE,w=y.elementGenerator,q=y.validationService,E=y.utilities,F=SequraFE.ajaxService,O=!1,N=!1,C=null===(r=null===(a=SequraFE)||void 0===a||null===(o=a.generalSettings)||void 0===o?void 0:o.useHostedPage)||void 0===r||r,P=null!==(i=null===(s=SequraFE)||void 0===s||null===(l=s.generalSettings)||void 0===l?void 0:l.useReplacementPaymentMethod)&&void 0!==i&&i,_=null===(c=null===(u=SequraFE)||void 0===u||null===(d=u.generalSettings)||void 0===d?void 0:d.useAllowedIPAddresses)||void 0===c||c,A=null!==(p=null===(h=SequraFE)||void 0===h||null===(f=h.generalSettings)||void 0===f?void 0:f.useOrderReporting)&&void 0!==p&&p,D={sendOrderReportsPeriodicallyToSeQura:!1,showSeQuraCheckoutAsHostedPage:!C&&null,allowedIPAddresses:_?[]:null,excludedCategories:[],excludedProducts:[],replacementPaymentMethod:P?"":null,enabledForServices:!1,allowFirstServicePaymentDelay:!1,allowServiceRegItems:!1,defaultServicesEndDate:"P1Y"};this.render=function(){var t,n;if(g||(g=null==e||null===(n=e.countrySettings)||void 0===n?void 0:n.map(E.cloneObject)),!m)for(var r in m=E.cloneObject(D)){var a,o;m[r]=null!==(a=null==e||null===(o=e.generalSettings)||void 0===o?void 0:o[r])&&void 0!==a?a:D[r]}b=null===(t=g)||void 0===t?void 0:t.map(E.cloneObject),v=E.cloneObject(m),j(),SequraFE.state.getCredentialsChanged()?B():(z(!0),E.hideLoader())};var j=function(){var n=document.querySelector(".sq-content");null==n||n.append(w.createElement("div","sq-content-inner","",null,[w.createElement("div","sqp-flash-message-wrapper"),w.createPageHeading({title:t.appState===SequraFE.appStates.ONBOARDING?"countries.title":"generalSettings.title",text:t.appState===SequraFE.appStates.ONBOARDING?"countries.description":"generalSettings.description"})]));var r,a,o,i=document.querySelector(".sq-content-inner");0!==e.sellingCountries.length?(t.appState!==SequraFE.appStates.SETTINGS||SequraFE.isPromotional||null==i||i.append(C?w.createToggleField({value:v.showSeQuraCheckoutAsHostedPage,label:"generalSettings.showCheckoutAsHostedPage.label",description:"generalSettings.showCheckoutAsHostedPage.description",onChange:function(e){return k("showSeQuraCheckoutAsHostedPage",e)}}):[],A?w.createToggleField({value:v.sendOrderReportsPeriodicallyToSeQura,label:"generalSettings.sendOrderReports.label",description:"generalSettings.sendOrderReports.description",onChange:function(e){return k("sendOrderReportsPeriodicallyToSeQura",e)}}):[],P?w.createDropdownField({value:v.replacementPaymentMethod,label:"generalSettings.replacementPaymentMethod.label",description:"generalSettings.replacementPaymentMethod.description",options:T(),onChange:function(e){return k("replacementPaymentMethod",e)}}):[],_?w.createMultiItemSelectorField({name:"allowedIPAddresses-selector",label:"generalSettings.allowedIPAddresses.label",description:"generalSettings.allowedIPAddresses.description",value:null===(r=v.allowedIPAddresses)||void 0===r?void 0:r.join(", "),searchable:!1,onChange:function(e){return k("allowedIPAddresses",e)}}):[],w.createMultiItemSelectorField({label:"generalSettings.excludedCategories.label",description:"generalSettings.excludedCategories.description",value:null===(a=v.excludedCategories)||void 0===a?void 0:a.join(","),options:e.shopCategories.map((function(e){return{label:e.name,value:e.id}})),onChange:function(e){return k("excludedCategories",e)}}),w.createMultiItemSelectorField({label:"generalSettings.excludedProducts.label",description:"generalSettings.excludedProducts.description",value:null===(o=v.excludedProducts)||void 0===o?void 0:o.join(","),searchable:!1,onChange:function(e){return k("excludedProducts",e)}}),w.createToggleField({value:v.enabledForServices,label:"generalSettings.enabledForServices.label",description:"generalSettings.enabledForServices.description",onChange:H}),w.createToggleField({className:"sq-service-related-field",value:v.allowFirstServicePaymentDelay,label:"generalSettings.allowFirstServicePaymentDelay.label",description:"generalSettings.allowFirstServicePaymentDelay.description",onChange:function(e){return k("allowFirstServicePaymentDelay",e)}}),w.createToggleField({className:"sq-service-related-field",value:v.allowServiceRegItems,label:"generalSettings.allowServiceRegItems.label",description:"generalSettings.allowServiceRegItems.description",onChange:function(e){return k("allowServiceRegItems",e)}}),w.createTextField({value:v.defaultServicesEndDate,className:"sq-text-input sq-default-services-end-date sq-service-related-field",label:"generalSettings.defaultServicesEndDate.label",description:"generalSettings.defaultServicesEndDate.description",onChange:function(e){return k("defaultServicesEndDate",e)}})),null==i||i.append(w.createMultiItemSelectorField({name:"countries-selector",label:"countries.selector.label",description:"countries.selector.description",value:b.map((function(e){return e.countryCode})).join(","),options:e.sellingCountries.map((function(e){return{label:e.name,value:e.code}})),onChange:M})),x(),0!==e.sellingCountries.length&&L(),V()):null==i||i.append(E.createFlashMessage("general.errors.countries.noCountries","error"))},T=function(){var t=[{label:"None",value:""}];return(e.shopPaymentMethods?e.shopPaymentMethods:[]).map((function(e){t.push({label:e.name.charAt(0).toUpperCase()+e.name.slice(1),value:e.code})})),t},x=function(){b.map((function(e){var t;null===(t=document.querySelector(".sq-content-inner"))||void 0===t||t.append(w.createCountryField({countryCode:e.countryCode,merchantId:e.merchantId,onChange:function(t){return I(e.countryCode,t)}}))}))},L=function(){var e,n;t.appState===SequraFE.appStates.ONBOARDING?null===(e=document.querySelector(".sq-content-inner"))||void 0===e||e.append(w.createButtonField({className:"sq-continue sqm--block",buttonType:"primary",buttonLabel:"general.continue",onClick:B})):null===(n=document.querySelector(".sq-content"))||void 0===n||n.append(w.createPageFooter({onSave:B,onCancel:function(){for(var e=document.querySelector(".sq-content");null!=e&&e.firstChild;)null==e||e.removeChild(e.firstChild);S.render()}}))},I=function(e,t){q.validateRequiredField(document.querySelector('[name="country_'.concat(e,'"]')),"validation.requiredField"),b.find((function(t){return t.countryCode===e})).merchantId=t,N=!0,z(!1)},M=function(e){q.validateRequiredField(document.querySelector('[name="countries-selector"]'),"validation.requiredField"),document.querySelectorAll(".sq-country-field-wrapper").forEach((function(e){return e.remove()})),b=e.map((function(e){var t;return{countryCode:e,merchantId:(null===(t=b.find((function(t){return t.countryCode===e})))||void 0===t?void 0:t.merchantId)||""}})),x(),t.appState===SequraFE.appStates.ONBOARDING&&(document.querySelector(".sq-continue").remove(),L()),N=!0,z(!1)},k=function(e,t){v[e]=t,O=!0,z(!1)},V=function(){var e="sqs--hidden";document.querySelectorAll(".sq-field-wrapper:has(.sq-service-related-field),.sq-field-wrapper.sq-service-related-field").forEach((function(t){v.enabledForServices?t.classList.remove(e):t.classList.add(e)}))},H=function(e){k("enabledForServices",e),V()},R=function(){var e=q.validateIPList(v.allowedIPAddresses);return q.validateField(document.querySelector('[name="allowedIPAddresses-selector"]'),!e,"validation.invalidIPAddress"),e},B=function(){var r,a,o;a=0,b.length||(q.validateRequiredField(document.querySelector('[name="countries-selector"]'),"validation.requiredField"),a++),b.map((function(e){!q.validateRequiredField(document.querySelector('[name="country_'.concat(e.countryCode,'"]')),"validation.requiredField")&&a++})),0===a&&R()&&(r=q.validateDateOrDuration(v.defaultServicesEndDate),q.validateField(document.querySelector(".sq-default-services-end-date"),!r,"validation.invalidTimeDuration"),r)&&(E.showLoader(),R(),(o=[],b.forEach((function(r){o.push(F.post(t.validateConnectionDataUrl,n(n({},e.connectionSettings),{},{merchantId:r.merchantId}),SequraFE.customHeader))})),Promise.all(o)).then((function(e){e.some((function(e){return!1===e.isValid}))?G(e):U()})))},G=function(e){if(e[0].reason&&!e[0].reason.includes("merchantId"))return SequraFE.responseService.errorHandler({errorCode:"general.errors.connection.invalidUsernameOrPassword"}).catch((function(){})),void E.hideLoader();e.forEach((function(e,t){q.validateField(document.querySelector('[name="country_'.concat(b[t].countryCode,'"]')),!e.isValid,"validation.invalidField")})),E.hideLoader()},U=function(){E.showLoader();var e=[];O&&e.push(F.post(t.saveGeneralSettingsUrl,v,SequraFE.customHeader)),N&&e.push(F.post(t.saveCountrySettingsUrl,b,SequraFE.customHeader)),Promise.all(e).then((function(){z(!0),m=E.cloneObject(v),g=b.map(E.cloneObject),t.appState!==SequraFE.appStates.ONBOARDING&&N&&SequraFE.state.setData("paymentMethods",null),t.appState===SequraFE.appStates.SETTINGS&&SequraFE.state.setData("generalSettings",m),SequraFE.state.setData("countrySettings",g),O=!1,N=!1;var e=SequraFE.state.getCredentialsChanged();if(t.appState===SequraFE.appStates.ONBOARDING){if(e)return SequraFE.state.removeCredentialsChanged(),void SequraFE.state.goToState(SequraFE.appStates.SETTINGS);var n=SequraFE.pages.onboarding.indexOf(SequraFE.appPages.ONBOARDING.COUNTRIES);SequraFE.pages.onboarding.length>n+1?window.location.hash=t.appState+"-"+SequraFE.pages.onboarding[n+1]:window.location.hash=SequraFE.appStates.PAYMENT+"-"+SequraFE.appPages.PAYMENT.METHODS}e&&SequraFE.state.removeCredentialsChanged()})).finally((function(){t.appState!==SequraFE.appStates.ONBOARDING&&E.hideLoader()}))},z=function(e){t.appState!==SequraFE.appStates.ONBOARDING&&E.disableFooter(e)}}},31:function(){window.SequraFE||(window.SequraFE={}),SequraFE.imagesProvider={logo:'<svg class="sq-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 249.043 55.778">\n  <g id="Group_2" data-name="Group 2" transform="translate(142 -144)">\n    <g id="Group_1" data-name="Group 1" transform="translate(-142 144)">\n      <g id="WEB-01" transform="translate(0 0)">\n        <path id="Path_1" data-name="Path 1" d="M1801.153,198.033a10.682,10.682,0,0,0,.811-4.092V175.494a1.859,1.859,0,0,1,1.859-1.859h4.721a1.86,1.86,0,0,1,1.86,1.859v18.452a19.12,19.12,0,0,1-38.239,0V175.49a1.86,1.86,0,0,1,1.859-1.86h4.724a1.86,1.86,0,0,1,1.859,1.86v18.451a10.677,10.677,0,0,0,20.542,4.092Z" transform="translate(-1630.382 -163.793)" fill="#00c2a3"/>\n        <path id="Path_2" data-name="Path 2" d="M2621.24,202.223a11.673,11.673,0,0,0,4.465.866v-.016a11.556,11.556,0,1,0-4.465-.851Zm-15.4-10.735a19.781,19.781,0,0,1,19.865-19.694v-.015a19.76,19.76,0,0,1,19.854,19.716v17.83a1.859,1.859,0,0,1-1.859,1.86h-4.355a1.86,1.86,0,0,1-1.86-1.86v-1.979a19.9,19.9,0,0,1-31.643-15.859Z" transform="translate(-2396.516 -162.103)" fill="#00c2a3" fill-rule="evenodd"/>\n        <path id="Path_3" data-name="Path 3" d="M2297.861,175.492a20.034,20.034,0,0,1,6.472-4.307v-.015a20.062,20.062,0,0,1,7.636-1.51,2.418,2.418,0,0,1,2.417,2.418v3.556a2.417,2.417,0,0,1-2.417,2.417,11.547,11.547,0,0,0-8.173,3.374,11.394,11.394,0,0,0-3.381,7.811v18.333a1.859,1.859,0,0,1-1.86,1.859h-4.694a1.859,1.859,0,0,1-1.861-1.859V188.123h.071a19.787,19.787,0,0,1,5.791-12.628Z" transform="translate(-2107.311 -160.165)" fill="#00c2a3"/>\n        <path id="Path_4" data-name="Path 4" d="M1068.051,59.713a27.394,27.394,0,0,1-6.979,12.913,22.083,22.083,0,0,0,7.071,1.165,1.634,1.634,0,0,1,1.673,1.592V80.21a1.634,1.634,0,0,1-1.673,1.592c-11.9.023-22.639-6.768-27.222-17.211a26.624,26.624,0,0,1-2.232-10.674,1.634,1.634,0,0,1,1.674-1.592h5.1a1.634,1.634,0,0,1,1.672,1.593,19.357,19.357,0,0,0,6.153,14.052c.071.067.147.131.223.2s.122.1.182.159a19.242,19.242,0,0,0,6.145-18.231,20.123,20.123,0,0,0-12.922-14.678,21.622,21.622,0,0,0-25.712,8.314,19.136,19.136,0,0,0,4.452,25.345,21.749,21.749,0,0,0,13.587,4.712,1.271,1.271,0,0,1,1.3,1.238v5.537a1.208,1.208,0,0,1-.381.876,1.336,1.336,0,0,1-.921.362c-14.376.026-26.666-9.833-29.067-23.314-2.36-13.482,5.914-26.6,19.53-30.966,13.621-4.395,28.591,1.168,35.471,13.182a26.572,26.572,0,0,1,2.875,19.011Z" transform="translate(-930.36 -26.024)" fill="#00c2a3"/>\n        <path id="Path_5" data-name="Path 5" d="M54.6,190.8a9.74,9.74,0,0,1,2.949,3.493l-.015.007a9.365,9.365,0,0,1,.829,4.917,9.722,9.722,0,0,1-1.923,5.427,11.757,11.757,0,0,1-4.283,3.414,19.629,19.629,0,0,1-5.742,1.635,31.852,31.852,0,0,1-6.356.19,28.088,28.088,0,0,1-9.472-2.111h-.019a16.594,16.594,0,0,1-5.951-4.578,1.317,1.317,0,0,1,.258-1.931l4.183-2.881a1.51,1.51,0,0,1,1.993.248,16.4,16.4,0,0,0,3.485,2.875,12.889,12.889,0,0,0,5.951,1.67h.026a17.073,17.073,0,0,0,3.173-.052,9.991,9.991,0,0,0,2.949-.744,5.752,5.752,0,0,0,2.135-1.469,3.344,3.344,0,0,0,.844-2.1v-.045a3.032,3.032,0,0,0-.506-2.065,5.909,5.909,0,0,0-1.759-1.555,11.627,11.627,0,0,0-2.7-1.19l-.478-.136c-.478-.142-.96-.286-1.445-.416-.447-.123-.9-.242-1.358-.354q-2.976-.745-5.7-1.648a21.175,21.175,0,0,1-4.806-2.206,9.851,9.851,0,0,1-3.243-3.3,8.38,8.38,0,0,1-.941-4.914v-.037a8.669,8.669,0,0,1,1.812-4.795,11.325,11.325,0,0,1,4.035-3.254,20.374,20.374,0,0,1,5.36-1.7,24.978,24.978,0,0,1,5.984-.3,23.028,23.028,0,0,1,8.518,2.168,13.028,13.028,0,0,1,5.114,4.307,1.127,1.127,0,0,1-.4,1.549l-4.954,2.907a1.051,1.051,0,0,1-1.432-.361,9.617,9.617,0,0,0-3.366-2.812,10.386,10.386,0,0,0-4.378-1.118h-.022a13.522,13.522,0,0,0-2.848.108,9.273,9.273,0,0,0-2.581.7,5.488,5.488,0,0,0-1.879,1.313,2.919,2.919,0,0,0-.743,1.849v.022a1.9,1.9,0,0,0,.112.841,2.059,2.059,0,0,0,.465.744,7.01,7.01,0,0,0,.86.744,7.181,7.181,0,0,0,1.272.742h.019a22.93,22.93,0,0,0,3.3,1.321q1.893.591,3.939,1.032a48.515,48.515,0,0,1,5.322,1.584A17.127,17.127,0,0,1,54.6,190.8Z" transform="translate(-24.307 -161.242)" fill="#00c2a3"/>\n        <path id="Path_6" data-name="Path 6" d="M501.883,181.383a12,12,0,0,0-12.905,8.039l-.086.246h22.853l-.086-.246A12,12,0,0,0,501.883,181.383Zm13.02-.905a19.552,19.552,0,0,1,4.834,12.746v2.1a1.859,1.859,0,0,1-1.859,1.86H489.135a11.109,11.109,0,0,0,.572,1.39,11.78,11.78,0,0,0,18.8,3.283,2.087,2.087,0,0,1,2.4-.43l3.614,1.893a1.717,1.717,0,0,1,.588,2.622,19.514,19.514,0,1,1-.207-25.472Z" transform="translate(-443.673 -163.96)" fill="#00c2a3" fill-rule="evenodd"/>\n        <path id="Path_7" data-name="Path 7" d="M828.576,345.1c.787,0,.387-.792.189-1.228l.774.688v.8l-1.121.073C828.142,345.3,827.754,345.1,828.576,345.1Z" transform="translate(-762.322 -317.895)" fill="#00c2a3"/>\n        <path id="Path_8" data-name="Path 8" d="M573.675,344.868c-.749,0-.368-.792-.179-1.228l-.737.688v.8l1.068.076C574.088,345.068,574.457,344.868,573.675,344.868Z" transform="translate(-525.573 -317.684)" fill="#00c2a3"/>\n        <path id="Path_9" data-name="Path 9" d="M577.275,441.7c-.749,0-.368.856-.179,1.328l-.737-.743v-.86l1.068-.082C577.688,441.483,578.057,441.7,577.275,441.7Z" transform="translate(-528.863 -407.404)" fill="#00c2a3"/>\n      </g>\n    </g>\n  </g>\n</svg>',icons:{payment:'<svg width="52" height="53" viewBox="0 0 52 53" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n<rect y="0.5" width="52" height="52" fill="url(#pattern0)"/>\n<defs>\n<pattern id="pattern0" patternContentUnits="objectBoundingBox" width="1" height="1">\n<use xlink:href="#image0_245_4919" transform="scale(0.011236)"/>\n</pattern>\n<image id="image0_245_4919" width="89" height="89" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFkAAABZCAYAAABVC4ivAAAABHNCSVQICAgIfAhkiAAADQFJREFUeF7tnNlvV8cVx8csZjHGGAxe2LdSjEhJCQ+IgCvVREINTYX7HKo6eYlCUZr+AVEi+tI8NmpeUpoqUYFIzUOSpyrNQw0RQo0ahLDBgNjMjsGYxazt/Uw07jCdM/fe3+93Lz+qO5KV3HtnOfOdM+d8z5n5UfPvqKiiZIrAmEx7LzrXCBQg56AIBcgFyDkgkMMQhSYXIOeAQA5DFJpcgJwDAjkMUWhyAXIOCOQwRKHJOYA8Locxyhri0aNHamhoSN29e1f3Y1ItDx8+VGPHjtXPkydP1v+dMmWKGj9+fFnjZdG46kG+fPmyOnv2rLp//74CWF8B2JqaGg36mDFj1IQJE9SkSZNUY2Ojamho8DXJ9V3Vg3z16lU1MjISBIUFsMutW7c02LQFeMBGy2fMmBHsJ6uPVQ8yYJVSMDMsDhp++/ZtVVtbq06fPq1mzZqlpk+frjU9r1L1IJeb7jbtjU0H6AsXLqhp06ap1tZWbc+zLqWpSdZSWf1PnTq1oqMZDQfo3t5edebMmVFnWtGBrM6qHmScWKkmIw40zMm5c+fUwYMH1fDwcFz1kr9XPcgAPG5cMqtWymI8ePBA3bx5Ux09elSbkSxKzdNwxoe2wZUBe+LEiYotjy29c+eOfge1AyhYBTYYtlGKLYcKwkAWLlxY0d3zVICcRruuX7+uwQdwgMfhATosI0mB8uEHFi9erPl2Jcr/HcguKHBldsHg4OBo1OjWcZ8BGl69ZMkSvXPKLVUN8sjIbbVv3z5VV1evvv56n+a4fX29qqWlVdXX10e895Tq6PhRZC4eqXXr1gVtN1x5YGBA3bhxQ4OdxJzU1dWp5cuXl63RVQdyX1+f+vbbf6kvvvhcO6LBwWtR1PZd9Hbv3r0IHBVt/f/qVlvb7MhGP4hs6FjV3r5Cbdz4glq7dq1asGCBVwFhEcePH9cBShKg0eilS5eWxaerBuTdu3erb775p9q/f78Oh4eGrntBintJrgKNf+2111VXV5e3Oo4Tfswiwi5CBcZCn+3t7aFqwW9lg4y9AxQiKMLVtGXv3h71/vt/UP39RyPOej5tc7H++vXr1ccf/0X8zocrV66oEydOKHZIyDGizStWrAiao9BAyQio0ANaQJjKFsSrQ+7b2tqE2o+/JgDYs2eX+uyzz9W1a4OJ2iStBL176aWfjVaHZcA4eI+dNaWpqUmnRon8pAwfDIPwOylX98lYFsj9/f3ac6MFAExKkq04Z84c31ij795552315Zd/izT3QtTuTrBuKR/r66eqDRs6dFPoG9qKw4OaNTc36z9TMAVo6cmTJ3Udu7Ao8+bNKzt7VzLIaDBCmW1mggACB7QGZ+EWNH/79tdVT8/eSHuvuZ8r9tzZ+eOIgbTo/mAUcGbkRF5kQ7PtgAOmMn/+fA00u5K6gI/ztDW/VAFLAhmALl686HUaaA42eubMmdpOmwLA3d2/1FQsLj8cmszs2bN1e8bwldbWNrV69Rr9CaqGGWN3UQAPOTgI4Bs8mBQoBS1ftGiRNn+APnfuXP2+EiU1yGjsqVOntLOQCnbOtWGvvvpKxHn3Jg4I6BuW0Ng4XTU1zdDbFhCWLfu+TsQPD9+MwLqk2Uhv72EN5tDQcPT9e+rFF3+iRWNX+RYU+4uiHDlyJKq/bBRoHFw5LELCIzXI0B6Tm/V1CriAg8CmvPvu79SBAweC7UxdHA1a1NX18wjUxWrTpk2+YUbfbd36C/3/yIUzfe651VGUNkkzB7Rdcmi0wWwcO3ZMBxwhdhEUIMHHVCBjCnBuErc0nNLeah9++Cf10Ud/juzhUKw4nZ0bta18883fpCb/2GBjhxkIGY2ZkAY2h7QEJ5iOrEoqkC9duiQCjIBoMSCZ0tPzD/Xee7/XUVuowK9hA2+88evH2ofaxH0DcBweOYuQaQNoNB7ZpSgxbqy474lBZtuxJSXtQEiom8lcQe127NgRm6MF4G3bfhU5xVfiZE39nUwaNIzdFwKaHYozxFHbzjr1gEKDxEl7NEIyE/TNwSSk3ZSdO/8Y5QiOCcN+95r63d3dmQBsBmYMbC7ZNMnu8h6gmWMWJTHIoTgfNmEHIOfPn1e7du3yenYziYaGadqpbdu2PYt5PdanSfKELr7AmgAZZ1jpkghkbJuPChlhMBF23uKrr/4e2bnLoqy1tePV5s2b1VtvvS3WqfQHeDAc26WW9jiwJvh/XAEP6mGGSDSF2BZ9JbLJcErJprHV7DCVTj/5ZE80sMyjn332h5G9/m3cXCr+nbwKfBqNlUwHcwU091QEJcPxm+CGZ8wn/eCniBilkkiTpeiKTtmCJFpMOXz4cDQJfzRGHc7QXn55qzhJSdBKvQeM0GkHwPlsM44crSXsRpMhAmahAD5UYkFmVSUtpmO8sb0FCQIGBuSU5TPP/CAyFT8NyZTpN3IRXNuSCiDjU9xCDCAl+cEnZDJiQcbhSVET4NpajGCEtR0dG/QRkbvleO7s7HTlz/0ZDi1pM9pJ2M687YLzdOdjvtOGkxapxNpkBpRANgeOdufNzS3qgw926jCa7fXpp3+NzuX6IsGx3S3q+efXS7Lk9h5tJjEkOXMydS5dZa6SHUeLMSfSDokFmca+woBoskSL1qxZo/jbsmWLtmHkFcjM2RGhr9+83pHKdPPHZmyUCpntwqJIIFMvZC5iQZa0GPskbTkXKDSHw81qKvgSaJjkb3xaznx978sCGSBDK+ReP2X10Q6T6uS//KEBksY/KeDhzcjE/Hwa6pMXkyGVEE5BTbZpiq9zV5M55sG8IAymxIALjyQQIAVaTQW7K7EGQCPUtsFmR0LvfCyD+YKXbyGC7IKBfI0MULYGILDRCkA1tMbcUSMBU22FufkAM3K6FxhD9elH6isIMqsoNUQQ+xsAu0LZixHq50mBHyeTO5+QwtGX5L+CIIduR6LFdqchAQDRZ/eeFLhmXCltK32Pm4PLSEw/QZDJxUqCsHK2ZzY2WAJO8uJS/azfh7Y3Y/vsa0jz+cYBrK8EQWblQlkrSLsp1AsJgdDSgvkEy/pdaNGZh49dsLNDxTUvpm4QZCqZI3Nf5y5tkcJO2iK4tJ18fWf9Dr4r2lDhdr+tVK58ACyZzFiQXZpmd87K2toJ95TsFpoTl61yBc/yGdYj7SwUwverKBZGmp8EMHOIBZkBpW1AB3YEFAqzqRt3hJUlqG7fpG8l8wZgrn1lQZir1Matb48XCzIBhLRKcGM7+0SmSlppBsVc+HK1LgBZPyOHa+oeAyXa+u71rJDmo1z2PRNX/liQGUziy6yundBnNfmTVpv3bgrRFSiPZ2QIOT7MnpsyYJ5uZs7IWjbIaLHJP/gAcAdGOJ9nNm3RoiwvG/pktN+Z4yepHvN171mjTKEdiDn12XAzRqwmU9FdVVtAtp3tpTm1lswL7RCYS32S05EmX4n3KIS59C31h4K480UpQvQt7q5GIpDJA0Pl2O78YXeha5gGEj82qKwqmhBylthxEvl5F7Z8CCzmxaGw68TMvWufvOAS968PBLNwplNsFMdMZNjoFCGw1e62MvUZlO0lORe0mANJ7gMvEH5A45tQue+QG5l9mgnA0FX35N2c1Et+Bs0Hn1BJBDIdcKIBOCENNQNx6sAWCjkLti6ZOUwN16nyKNhNLhZyMZyEPcGFYUM4L24buf6EupKTNG3iZE9kLkwnSQA2dZkMkwpROoQ3P46JE7RS35EHv8EOsoMnFMO+ZsZ43LMI3SgCjzhTQT+pQE47UbQ/7mwMjYZSHTp0SDxzSztukvqAwwVwzANguz8oQgG47C6F3iwWp96h3I6Ro+yfmMVNCKfBPQaT0A/Vx5liZnzOJ9Qui2/8qwFosrQTUZ5Vq1b9j3nxyZI5yAyKRoQuLLqCYReJoHBUaItrJ936lX5GMZBXctywKX5e4Wq/JEcuIDM4TCJ0UcYnIDaP7cikTJhrgE/jH3x9S+9wiNwXCSWDkGHlypWilrt9J2YXbsO0zzgaNBJvHeKqdr+wGepiH02aEUoF6C7VSiuPrz6aG2faMGn8XEMyI75+M3V87oAELlz4C+Wd3TYuP3WTUm79cp9NsOXrh91DYCbdFPK14V2uIDMgGohWu6GrJKD7Hg0qta3bl/vM4huu7C4udWEhpfy+LzdzYU+I6BEWgYNh+2P/0uQykpobF8QkzzhamAM/PbPHYWEJmkrxBblrspkoDg2NxnxgRphY0gkkrZcEVF8dQm9+mAmw8GQcHT+iDJ0S+fox73JjFyEh+IbWwD5MKC7RJ+oSTWbh+FwZuXJG6A/oae2w3VfVgGwLxeQIZ8n9mn9hBVvMH8yCSC0ru+wCXYnnqgTZnRiMAk3nD7NS6rZ1+83r+akAOS8wshrniTm+rCZUjf0WIOewKgXIBcg5IJDDEIUmFyDngEAOQxSaXICcAwI5DFFocgFyDgjkMEShyQXIOSCQwxD/ATDfbPmBcgZvAAAAAElFTkSuQmCC"/>\n</defs>\n</svg>'},flags:{ES:'<svg xmlns="http://www.w3.org/2000/svg" width="31" height="31" viewBox="0 0 512 512"><mask id="flag_es"><circle cx="256" cy="256" r="256" fill="#fff"/></mask><g mask="url(#flag_es)"><path fill="#ffda44" d="m0 128 256-32 256 32v256l-256 32L0 384Z"/><path fill="#d80027" d="M0 0h512v128H0zm0 384h512v128H0z"/><g fill="#eee"><path d="M144 304h-16v-80h16zm128 0h16v-80h-16z"/><ellipse cx="208" cy="296" rx="48" ry="32"/></g><g fill="#d80027"><rect width="16" height="24" x="128" y="192" rx="8"/><rect width="16" height="24" x="272" y="192" rx="8"/><path d="M208 272v24a24 24 0 0 0 24 24 24 24 0 0 0 24-24v-24h-24z"/></g><rect width="32" height="16" x="120" y="208" fill="#ff9811" ry="8"/><rect width="32" height="16" x="264" y="208" fill="#ff9811" ry="8"/><rect width="32" height="16" x="120" y="304" fill="#ff9811" rx="8"/><rect width="32" height="16" x="264" y="304" fill="#ff9811" rx="8"/><path fill="#ff9811" d="M160 272v24c0 8 4 14 9 19l5-6 5 10a21 21 0 0 0 10 0l5-10 5 6c6-5 9-11 9-19v-24h-9l-5 8-5-8h-10l-5 8-5-8z"/><path d="M122 252h172m-172 24h28m116 0h28"/><path fill="#d80027" d="M122 248a4 4 0 0 0-4 4 4 4 0 0 0 4 4h172a4 4 0 0 0 4-4 4 4 0 0 0-4-4zm0 24a4 4 0 0 0-4 4 4 4 0 0 0 4 4h28a4 4 0 0 0 4-4 4 4 0 0 0-4-4zm144 0a4 4 0 0 0-4 4 4 4 0 0 0 4 4h28a4 4 0 0 0 4-4 4 4 0 0 0-4-4z"/><path fill="#eee" d="M196 168c-7 0-13 5-15 11l-5-1c-9 0-16 7-16 16s7 16 16 16c7 0 13-4 15-11a16 16 0 0 0 17-4 16 16 0 0 0 17 4 16 16 0 1 0 10-20 16 16 0 0 0-27-5c-3-4-7-6-12-6zm0 8c5 0 8 4 8 8 0 5-3 8-8 8-4 0-8-3-8-8 0-4 4-8 8-8zm24 0c5 0 8 4 8 8 0 5-3 8-8 8-4 0-8-3-8-8 0-4 4-8 8-8zm-44 10 4 1 4 8c0 4-4 7-8 7s-8-3-8-8c0-4 4-8 8-8zm64 0c5 0 8 4 8 8 0 5-3 8-8 8-4 0-8-3-8-7l4-8z"/><path fill="none" d="M220 284v12c0 7 5 12 12 12s12-5 12-12v-12z"/><path fill="#ff9811" d="M200 160h16v32h-16z"/><path fill="#eee" d="M208 224h48v48h-48z"/><path fill="#d80027" d="m248 208-8 8h-64l-8-8c0-13 18-24 40-24s40 11 40 24zm-88 16h48v48h-48z"/><rect width="20" height="32" x="222" y="232" fill="#d80027" rx="10" ry="10"/><path fill="#ff9811" d="M168 232v8h8v16h-8v8h32v-8h-8v-16h8v-8zm8-16h64v8h-64z"/><g fill="#ffda44"><circle cx="186" cy="202" r="6"/><circle cx="208" cy="202" r="6"/><circle cx="230" cy="202" r="6"/></g><path fill="#d80027" d="M169 272v43a24 24 0 0 0 10 4v-47h-10zm20 0v47a24 24 0 0 0 10-4v-43h-10z"/><g fill="#338af3"><circle cx="208" cy="272" r="16"/><rect width="32" height="16" x="264" y="320" ry="8"/><rect width="32" height="16" x="120" y="320" ry="8"/></g></g></svg>',FR:'<svg xmlns="http://www.w3.org/2000/svg" width="31" height="31" viewBox="0 0 512 512"><mask id="flag_fr"><circle cx="256" cy="256" r="256" fill="#fff"/></mask><g mask="url(#flag_fr)"><path fill="#eee" d="M167 0h178l25.9 252.3L345 512H167l-29.8-253.4z"/><path fill="#0052b4" d="M0 0h167v512H0z"/><path fill="#d80027" d="M345 0h167v512H345z"/></g></svg>',CO:'<svg xmlns="http://www.w3.org/2000/svg" width="31" height="31" viewBox="0 0 512 512"><mask id="flag_co"><circle cx="256" cy="256" r="256" fill="#fff"/></mask><g mask="url(#flag_co)"><path fill="#d80027" d="m0 384 255.8-29.7L512 384v128H0z"/><path fill="#0052b4" d="m0 256 259.5-31L512 256v128H0z"/><path fill="#ffda44" d="M0 0h512v256H0z"/></g></svg>',IT:'<svg xmlns="http://www.w3.org/2000/svg" width="31" height="31" viewBox="0 0 512 512"><mask id="flag_it"><circle cx="256" cy="256" r="256" fill="#fff"/></mask><g mask="url(#flag_it)"><path fill="#eee" d="M167 0h178l25.9 252.3L345 512H167l-29.8-253.4z"/><path fill="#6da544" d="M0 0h167v512H0z"/><path fill="#d80027" d="M345 0h167v512H345z"/></g></svg>',PT:'<svg xmlns="http://www.w3.org/2000/svg" width="31" height="31" viewBox="0 0 512 512"><mask id="flag_pt"><circle cx="256" cy="256" r="256" fill="#fff"/></mask><g mask="url(#flag_pt)"><path fill="#6da544" d="M0 512h167l37.9-260.3L167 0H0z"/><path fill="#d80027" d="M512 0H167v512h345z"/><circle cx="167" cy="256" r="89" fill="#ffda44"/><path fill="#d80027" d="M116.9 211.5V267a50 50 0 1 0 100.1 0v-55.6H117z"/><path fill="#eee" d="M167 283.8c-9.2 0-16.7-7.5-16.7-16.7V245h33.4v22c0 9.2-7.5 16.7-16.7 16.7z"/></g></svg>',PE:'<svg xmlns="http://www.w3.org/2000/svg" width="31" height="31" viewBox="0 0 512 512"><mask id="flag_pe"><circle cx="256" cy="256" r="256" fill="#fff"/></mask><g mask="url(#flag_pe)"><path fill="#d80027" d="M0 0h167l86 41.2L345 0h167v512H345l-87.9-41.4L167 512H0z"/><path fill="#eee" d="M167 0h178v512H167z"/></g></svg>'}}},832:function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}window.SequraFE||(window.SequraFE={}),window.SequraFE.components||(window.SequraFE.components={}),function(){function t(t){var n,r=this,a=SequraFE,o=a.templateService,i=a.translationService,s=a.utilities,l=a.elementGenerator,c=function(e){"Escape"===e.key&&r.close()};this.close=function(){var e;t.onClose&&!t.onClose()||(window.removeEventListener("keyup",c),null===(e=n)||void 0===e||e.remove())},this.open=function(){var a,u=(n=SequraFE.elementGenerator.createElementFromHTML('<div id="sq-modal" class="sq-modal sqs--hidden">\n    <div class="sq-modal-backdrop"></div>    <div class="sqp-modal-content">        <button class="sqp-close-button"><span></span></button>        <div class="sqp-title"></div>        <div class="sqp-body"></div>        <div class="sqp-footer"></div>    </div></div>')).querySelector(".sqp-close-button"),d=n.querySelector(".sqp-close-button span"),p=n.querySelector(".sqp-title"),h=n.querySelector(".sqp-body"),f=n.querySelector(".sqp-footer");(s.showElement(n),!1===t.canClose?s.hideElement(u):(window.addEventListener("keyup",c),u.addEventListener("click",r.close),d.style.display="flex",n.addEventListener("click",(function(e){if("sq-modal"===e.target.id)return e.preventDefault(),r.close(),!1}))),t.title?p.innerHTML=i.translate(t.title):s.hideElement(p),t.className)&&(a=n.classList).add.apply(a,e(t.className.split(" ")));t.content&&h.append.apply(h,e(Array.isArray(t.content)?t.content:[t.content])),t.fullWidthBody&&h.classList.add("sqm--full-width"),!1!==t.footer&&t.buttons?t.buttons.forEach((function(e){f.appendChild(l.createButton(e))})):s.hideElement(f),o.getContentWrapper().appendChild(n),t.onOpen&&t.onOpen(n)}}SequraFE.components.Modal={create:function(e){return new t(e)}}}()},50:function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}window.SequraFE||(window.SequraFE={}),window.SequraFE.components||(window.SequraFE.components={}),SequraFE.components.MultiItemSelector={create:function(t){return function(t){var n=t.options,r=void 0===n?[]:n,a=t.name,o=t.onChange,i=t.value,s=void 0===i?"":i,l=t.searchable,c=void 0===l||l,u=SequraFE.elementGenerator,d=s?s.split(",").map((function(e){return e.trim()})):[],p=u.createElement("div","sq-multi-item-selector"),h=u.createElement("input","sqp-hidden-input","",{type:"hidden",name:a,value:d.join(",")}),f=function(e){d.splice(d.indexOf(e),1),m(!0)},m=function t(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];h.value=d.join(","),SequraFE.templateService.clearComponent(p);var a=r.filter((function(e){return!d.includes(e.value)})),i=SequraFE.components.Dropdown.create({searchable:!0,options:a,onChange:function(e){d.push(e),t(!0),o&&o(d)},onOpenStateChange:function(e){e?p.classList.add("sqs--active"):p.classList.remove("sqs--active")}});c||((i=u.createElement("input","sq-multi-input","",{type:"text"})).addEventListener("blur",(function(e){return s(e.currentTarget.value.trim())})),i.addEventListener("keydown",(function(e){13===e.keyCode&&(e.preventDefault(),s(e.currentTarget.value.trim()))})));var s=function(e){0===e.length||d.includes(e)||(d.push(e),t(!0),o&&o(d))};p.append.apply(p,e(d.map((function(e){return u.createElement("span","sqp-selected-item",c?r.find((function(t){return t.value===e})).label:e,null,[u.createButton({className:"sqp-remove-button",onClick:function(){f(e),o&&o(d)}})])}))).concat([h,i])),p.addEventListener("click",(function(){p.classList.add("sqs--active"),c&&setTimeout((function(){i.querySelector("button").click()}),10)})),n&&setTimeout((function(){c?i.querySelector("button").click():i.focus()}),10)};return m(),p}(t)}}},469:function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?t(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function r(t,n,r){return(n=function(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,n||"default");if("object"!=e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function a(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}window.SequraFE||(window.SequraFE={}),SequraFE.OnboardingController=function(e){var t,r,o,i,s,l=SequraFE.ajaxService,c=SequraFE,u=c.templateService,d=c.elementGenerator,p=c.utilities,h=c.formFactory,f="";this.display=function(e){var n=e.storeId;p.showLoader(),f=n,u.clearMainPage(),r=SequraFE.state.getData("stores"),t=SequraFE.state.getData("version"),i=SequraFE.state.getData("connectionSettings"),o=SequraFE.state.getData("countrySettings"),s=SequraFE.state.getData("widgetSettings"),S(),m()};var m=function(){var t,n,r,i;switch(p.showLoader(),SequraFE.state.getPage()){case SequraFE.appPages.ONBOARDING.COUNTRIES:r=g,i=Promise.all([null!==(t=SequraFE.state.getData("sellingCountries"))&&void 0!==t?t:l.get(e.getSellingCountriesUrl,null,SequraFE.customHeader)]);break;case SequraFE.appPages.ONBOARDING.WIDGETS:r=v,i=Promise.all([null!==(n=SequraFE.state.getData("paymentMethods"))&&void 0!==n?n:l.get(e.getPaymentMethodsUrl.replace("{merchantId}",o[0].merchantId),null,SequraFE.customHeader)]);break;default:r=b,i=Promise.all([])}i.then((function(e){return r.apply(void 0,a(e))})).catch((function(){})).finally((function(){return p.hideLoader()}))},g=function(t){SequraFE.state.getData("sellingCountries")||SequraFE.state.setData("sellingCountries",t);var r=h.getInstance("generalSettings",{countrySettings:o,sellingCountries:t,connectionSettings:i},n(n({},e),{},{appState:SequraFE.appStates.ONBOARDING}));null==r||r.render()},v=function(t){SequraFE.state.getData("paymentMethods")||SequraFE.state.setData("paymentMethods",t);var r=h.getInstance("widgetSettings",{widgetSettings:s,connectionSettings:i,countrySettings:o,paymentMethods:t},n(n({},e),{},{appState:SequraFE.appStates.ONBOARDING}));null==r||r.render()},b=function(){var t=h.getInstance("connectionSettings",{connectionSettings:i},n(n({},e),{},{appState:SequraFE.appStates.ONBOARDING}));null==t||t.render()},S=function(){var e;document.getElementById("sq-page-wrapper").append(d.createElement("div","sq-page-content-wrapper sqv--onboarding","",null,[d.createElement("div","sq-page-content","",null,[null!==(e=t)&&void 0!==e&&e.current?d.createElement("div","sq-version-header","",null,[d.createVersionBadge(t.current)]):[],y()])]),d.createSupportLink())},y=function(){var e,n,o;return d.createElement("div","sq-content-row ".concat(null!==(e=t)&&void 0!==e&&e.current?"":"sqs--no-version"),"",null,[d.createWizardSidebar({steps:(o=SequraFE.pages.onboarding.map((function(e){var t,n=null!==(t=SequraFE.state.getPage())&&void 0!==t?t:SequraFE.pages.settings[0];switch(e){case SequraFE.appPages.ONBOARDING.CONNECT:return{label:"sidebar.stepTwoLabel",href:"#onboarding-connect",isCompleted:SequraFE.pages.onboarding.indexOf(SequraFE.state.getPage())>SequraFE.pages.onboarding.indexOf(SequraFE.appPages.ONBOARDING.CONNECT),isActive:n===SequraFE.appPages.ONBOARDING.CONNECT};case SequraFE.appPages.ONBOARDING.COUNTRIES:return{label:"sidebar.stepThreeLabel",href:"#onboarding-countries",isCompleted:SequraFE.pages.onboarding.indexOf(SequraFE.state.getPage())>SequraFE.pages.onboarding.indexOf(SequraFE.appPages.ONBOARDING.COUNTRIES),isActive:n===SequraFE.appPages.ONBOARDING.COUNTRIES};case SequraFE.appPages.ONBOARDING.WIDGETS:return{label:"sidebar.stepFourLabel",href:"#onboarding-widgets",isCompleted:SequraFE.pages.onboarding.indexOf(SequraFE.state.getPage())>SequraFE.pages.onboarding.indexOf(SequraFE.appPages.ONBOARDING.WIDGETS),isActive:n===SequraFE.appPages.ONBOARDING.WIDGETS}}})),[{label:"sidebar.stepOneLabel",description:"sidebar.stepOneDescription",href:"#",isCompleted:!0}].concat(a(o),[{label:"sidebar.stepFiveLabel",href:"#"}]))}),d.createElement("main","sq-content","",null,[d.createElement("div","sqp-content-header","",null,[d.createElementFromHTML(SequraFE.imagesProvider.logo||""),!r||(null===(n=r)||void 0===n?void 0:n.length)<=1?[]:d.createStoreSwitcher({label:"general.selectStore",value:f,options:r.map((function(e){return{label:e.storeName,value:e.storeId}})),onChange:function(e){e!==SequraFE.state.getStoreId()&&(SequraFE.state.setStoreId(e),window.location.hash="",SequraFE.state.display())}})])])])}}},127:function(){window.SequraFE||(window.SequraFE={}),SequraFE.OrderStatusMappingSettingsForm=function(e,t){var n,r,a=this,o="approved",i="needs_review",s="cancelled",l=SequraFE,c=l.elementGenerator,u=l.utilities,d=SequraFE.ajaxService;this.render=function(){var t;u.showLoader(),n||(n=null==e||null===(t=e.orderStatusSettings)||void 0===t?void 0:t.map(u.cloneObject)),r=u.cloneObject(n),p(),u.disableFooter(!0),u.hideLoader()};var p=function(){var e,t,n,l,u,d=document.querySelector(".sq-content");null==d||d.append(c.createElement("div","sq-content-inner","",null,[c.createElement("div","sqp-flash-message-wrapper"),c.createPageHeading({title:"orderStatusSettings.title",text:"orderStatusSettings.description"}),c.createDropdownField({label:"orderStatusSettings.paid.label",description:"orderStatusSettings.paid.description",value:(null===(e=r)||void 0===e||null===(t=e.find((function(e){return e.sequraStatus===o})))||void 0===t?void 0:t.shopStatus)||"",options:h(),variation:"label-left",onChange:function(e){return f(o,e)}}),c.createDropdownField({label:"orderStatusSettings.inReview.label",description:"orderStatusSettings.inReview.description",value:null===(n=r)||void 0===n||null===(l=n.find((function(e){return e.sequraStatus===i})))||void 0===l?void 0:l.shopStatus,options:h(),variation:"label-left",onChange:function(e){return f(i,e)}}),c.createDropdownField({label:"orderStatusSettings.cancelled.label",description:"orderStatusSettings.cancelled.description",value:null===(u=r.find((function(e){return e.sequraStatus===s})))||void 0===u?void 0:u.shopStatus,options:h(),variation:"label-left",onChange:function(e){return f(s,e)}})]),c.createPageFooter({onCancel:function(){for(var e=document.querySelector(".sq-content");null!=e&&e.firstChild;)null==e||e.removeChild(e.firstChild);a.render()},onSave:m}))},h=function(){var t=[{label:"None",value:""}];return e.shopOrderStatuses.map((function(e){t.push({label:e.name.charAt(0).toUpperCase()+e.name.slice(1),value:e.id})})),t},f=function(e,t){var n=r.find((function(t){return t.sequraStatus===e}));n?n.shopStatus=t:r.push({shopStatus:t,sequraStatus:e}),u.disableFooter(!1)},m=function(){u.showLoader(),d.post(t.saveOrderStatusMappingSettingsUrl,r,SequraFE.customHeader).then((function(){n=u.cloneObject(r),SequraFE.state.setData("orderStatusSettings",n),u.disableFooter(!0)})).finally(u.hideLoader)}}},585:function(){function e(e,n){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,n){if(e){if("string"==typeof e)return t(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw i}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}window.SequraFE||(window.SequraFE={}),SequraFE.pageControllerFactory=new function(){this.getInstance=function(t,n){var r,a="",o=e(t.split("-"));try{for(o.s();!(r=o.n()).done;){var i=r.value;a+=i=i.charAt(0).toUpperCase()+i.slice(1)}}catch(e){o.e(e)}finally{o.f()}return a+="Controller",SequraFE[a]?new SequraFE[a](n):null}}},79:function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}window.SequraFE||(window.SequraFE={}),window.SequraFE.components||(window.SequraFE.components={}),function(){function t(t){var n,r=t.currentVersion,a=t.newVersion,o=t.mode,i=t.menuItems,s=t.merchantName,l=t.stores,c=t.activeStore,u=t.onChange,d=SequraFE.elementGenerator,p=d.createElement("div","sqp-page-header","",null,[d.createElement("div","sqp-header-logo","",null,[d.createElementFromHTML(SequraFE.imagesProvider.logo||""),r?d.createVersionBadge(r):[]]),r&&a&&a.versionLabel!==r?d.createElement("a","sqp-download-version","",{href:a.versionUrl,download:!0,target:"_blank"},[d.createElement("span","","general.downloadNewVersion"),d.createElement("span","",a.versionLabel)]):""]),h=[];i.length&&(n=h=d.createElement("div","sqp-menu-items")).append.apply(n,e(i.map((function(e){return d.createButtonLink({className:e.isActive?"sqs--active":"",text:e.label,href:e.href})}))));var f=d.createElement("div","sqp-header-merchant","",null,[s?d.createElement("div","sqp-merchant","",null,[d.createElement("span","sqp-merchant-label","general.merchant"),d.createElement("span","sqp-merchant-name",s)]):[],d.createElement("span","sq-mode-badge"+(o?" sqt--"+o:""),"general.mode."+o.toLowerCase(),null)]),m=l.length<=1?[]:d.createStoreSwitcher({label:"general.switchStore",value:c,options:l,onChange:u});return d.createElement("div","sq-page-header","",null,[d.createElement("div","sqp-header-top","",null,[p,h]),d.createElement("div","sqp-header-bottom","",null,[f,m])])}SequraFE.components.PageHeader={create:function(e){return new t(e)}}}()},704:function(){function e(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||n(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}window.SequraFE||(window.SequraFE={}),SequraFE.PaymentController=function(n){var r,a,o,i,s,l,c=SequraFE,u=c.templateService,d=c.elementGenerator,p=c.components,h=c.utilities,f=SequraFE.ajaxService,m="";this.display=function(e){var c=e.storeId;if(m=c,u.clearMainPage(),a=SequraFE.state.getData("stores"),r=SequraFE.state.getData("version"),l=SequraFE.state.getData("connectionSettings"),s=SequraFE.state.getData("countrySettings"),o=SequraFE.state.getData("sellingCountries"),(i=SequraFE.state.getData("paymentMethods"))&&o)return g(),void h.hideLoader();Promise.all([o?[]:f.get(n.getSellingCountriesUrl,null,SequraFE.customHeader),i?[]:f.get(n.getPaymentMethodsUrl.replace("{merchantId}",s[0].merchantId),null,SequraFE.customHeader)]).then((function(e){var n=t(e,2),r=n[0],a=n[1];0!==r.length&&(o=r,SequraFE.state.setData("sellingCountries",r)),0!==a.length&&(i=a,SequraFE.state.setData("paymentMethods",a)),g()})).finally((function(){return h.hideLoader()}))};var g=function(){var e,t,n;document.getElementById("sq-page-wrapper").append(d.createElement("div","sq-page-content-wrapper sqv--payments","",null,[SequraFE.components.PageHeader.create({currentVersion:null===(e=r)||void 0===e?void 0:e.current,newVersion:{versionLabel:null===(t=r)||void 0===t?void 0:t.new,versionUrl:null===(n=r)||void 0===n?void 0:n.downloadNewVersionUrl},mode:"live"===l.environment?l.environment:"test",activeStore:m,stores:a.map((function(e){return{label:e.storeName,value:e.storeId}})),onChange:function(e){e!==SequraFE.state.getStoreId()&&(SequraFE.state.setStoreId(e),window.location.hash="",SequraFE.state.display())},menuItems:SequraFE.utilities.getMenuItems(SequraFE.appStates.PAYMENT)}),d.createElement("div","sq-page-content","",null,[d.createElement("div","sq-content-row","",null,[d.createElement("main","sq-content","",null,[d.createElement("div","sq-content-inner","",null,[d.createElement("div","sq-table-heading","",null,[d.createPageHeading({title:"payments.title",text:"payments.description"}),o.length>0?d.createDropdownField({className:"sqm--table-dropdown",label:"payments.countries.label",description:"payments.countries.description",value:s[0].merchantId,options:s.map((function(e){return{label:o.find((function(t){return e.countryCode===t.code})).name,value:e.merchantId}})),onChange:S}):[]]),o.length>0?p.DataTable.create(v(),b()):[]])])])]),d.createSupportLink()]))},v=function(){return[{label:"payments.paymentMethods",className:"sqp-payment-method-header-cell sqm--text-left"},{label:"payments.minimumAmount"},{label:"payments.maximumAmount"},{label:"payments.availableFrom"},{label:"payments.availableTo"}]},b=function(){return i?i.map((function(e){return[{className:"sqp-payment-method-cell sqm--text-left",renderer:function(t){var n,r=e.icon?e.icon:SequraFE.imagesProvider.icons.payment||"";t.prepend(d.createElementFromHTML(r),d.createElement("div","","",null,[d.createElement("h3","sqp-payment-method-title",e.title),d.createElement("p","sqp-payment-method-description",null!==(n=null==e?void 0:e.description)&&void 0!==n?n:"")]))}},{label:null!=e&&e.minAmount?w(e.minAmount):"/"},{label:null!=e&&e.maxAmount?w(e.maxAmount):"/"},{label:null!=e&&e.startsAt?y(e.startsAt):"/"},{label:null!=e&&e.endsAt?y(e.endsAt):"/"}]})):[]},S=function(t){h.showLoader(),f.get(n.getPaymentMethodsUrl.replace("{merchantId}",t),null,SequraFE.customHeader).then((function(t){var n;i=e(t),document.querySelector(".sq-table-container").remove(),null===(n=document.querySelector(".sq-content-inner"))||void 0===n||n.append(p.DataTable.create(v(),b()))})).finally(h.hideLoader)},y=function(e){var t=new Date(e.replace(/ /g,"T")),n=String(t.getDate()).padStart(2,"0"),r=String(t.getMonth()+1).padStart(2,"0"),a=t.getFullYear();return"".concat(n,"/").concat(r,"/").concat(a)},w=function(e){return(e/100).toLocaleString("es",{minimumFractionDigits:2})+" EUR"}}},888:function(){window.SequraFE||(window.SequraFE={}),SequraFE.responseService=new function(){var e=this;this.errorHandler=function(e){var t=SequraFE,n=t.utilities,r=t.templateService,a=t.elementGenerator,o=document.querySelector(".sqp-flash-message-wrapper");return o||(o=a.createElement("div","sqp-flash-message-wrapper"),r.getMainPage().prepend(o)),r.clearComponent(o),e.errorCode?o.prepend(n.createFlashMessage(e.errorCode,"error")):e.errorMessage?o.prepend(n.createFlashMessage(e.errorMessage,"error")):o.prepend(n.createFlashMessage("general.errors.unknown","error")),Promise.reject(e)},this.unauthorizedHandler=function(t){var n=403===t.statusCode?SequraFE.appPages.ONBOARDING.COUNTRIES:SequraFE.appPages.ONBOARDING.CONNECT;return SequraFE.state.setCredentialsChanged(),SequraFE.state.goToState(SequraFE.appStates.ONBOARDING+"-"+n),SequraFE.utilities.hideLoader(),e.errorHandler(t)}}},961:function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?t(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function r(t,n,r){return(n=function(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,n||"default");if("object"!=e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function a(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}window.SequraFE||(window.SequraFE={}),SequraFE.SettingsController=function(e){var t,r,o,i,s,l=SequraFE,c=l.templateService,u=l.elementGenerator,d=l.utilities,p=l.formFactory,h=SequraFE.ajaxService,f="";this.display=function(e){var n=e.storeId;d.showLoader(),f=n,c.clearMainPage(),r=SequraFE.state.getData("stores"),t=SequraFE.state.getData("version"),i=SequraFE.state.getData("connectionSettings"),o=SequraFE.state.getData("countrySettings"),s=SequraFE.state.getData("widgetSettings"),w(),m()};var m=function(){var t,n,r,i,s,l,c,u,p,f;d.showLoader();var m,y,w=SequraFE.state.getPage();switch(SequraFE.pages.settings.includes(w)||(w=SequraFE.pages.settings[0]),w){case SequraFE.appPages.SETTINGS.CONNECTION:m=g,y=Promise.all([]);break;case SequraFE.appPages.SETTINGS.ORDER_STATUS:m=v,y=Promise.all([SequraFE.isPromotional?[]:null!==(t=SequraFE.state.getData("orderStatusSettings"))&&void 0!==t?t:h.get(e.getOrderStatusMappingSettingsUrl,null,SequraFE.customHeader),SequraFE.isPromotional?[]:null!==(n=SequraFE.state.getData("shopOrderStatuses"))&&void 0!==n?n:h.get(e.getShopOrderStatusesUrl,null,SequraFE.customHeader)]);break;case SequraFE.appPages.SETTINGS.WIDGET:m=b,y=Promise.all([null!==(r=SequraFE.state.getData("paymentMethods"))&&void 0!==r?r:h.get(e.getPaymentMethodsUrl.replace("{merchantId}",o[0].merchantId),null,SequraFE.customHeader),null!==(i=SequraFE.state.getData("allPaymentMethods"))&&void 0!==i?i:h.get(e.getAllPaymentMethodsUrl,null,SequraFE.customHeader)]);break;default:m=S,y=Promise.all([SequraFE.isPromotional?[]:null!==(s=SequraFE.state.getData("generalSettings"))&&void 0!==s?s:h.get(e.getGeneralSettingsUrl,null,SequraFE.customHeader),SequraFE.isPromotional?[]:null!==(l=SequraFE.state.getData("shopCategories"))&&void 0!==l?l:h.get(e.getShopCategoriesUrl,null,SequraFE.customHeader),null!==(c=SequraFE)&&void 0!==c&&null!==(u=c.generalSettings)&&void 0!==u&&u.useReplacementPaymentMethod&&!SequraFE.isPromotional?null!==(p=SequraFE.state.getData("shopPaymentMethods"))&&void 0!==p?p:h.get(e.getShopPaymentMethodsUrl,null,SequraFE.customHeader):[],null!==(f=SequraFE.state.getData("sellingCountries"))&&void 0!==f?f:h.get(e.getSellingCountriesUrl,null,SequraFE.customHeader)])}y.then((function(e){return m.apply(void 0,a(e))}))},g=function(){var t=p.getInstance("connectionSettings",{connectionSettings:i,countrySettings:o},n(n({},e),{},{appState:SequraFE.appStates.SETTINGS}));null==t||t.render()},v=function(t,r){SequraFE.state.getData("orderStatusSettings")||SequraFE.state.setData("orderStatusSettings",t),SequraFE.state.getData("shopOrderStatuses")||SequraFE.state.setData("shopOrderStatuses",r);var a=p.getInstance("orderStatusMappingSettings",{orderStatusSettings:t,shopOrderStatuses:r},n({},e));null==a||a.render()},b=function(t,r){SequraFE.state.getData("paymentMethods")||SequraFE.state.setData("paymentMethods",t),SequraFE.state.getData("allPaymentMethods")||SequraFE.state.setData("allPaymentMethods",r);var a=p.getInstance("widgetSettings",{widgetSettings:s,connectionSettings:i,countrySettings:o,paymentMethods:t,allPaymentMethods:r},n(n({},e),{},{appState:SequraFE.appStates.SETTINGS}));null==a||a.render()},S=function(t,r,a,s){y(t,r,a,s);var l=p.getInstance("generalSettings",{generalSettings:t,shopCategories:r,shopPaymentMethods:a,sellingCountries:s,connectionSettings:i,countrySettings:o},n(n({},e),{},{appState:SequraFE.appStates.SETTINGS}));null==l||l.render()},y=function(e,t,n,r){SequraFE.state.getData("generalSettings")||SequraFE.state.setData("generalSettings",e),SequraFE.state.getData("shopCategories")||SequraFE.state.setData("shopCategories",t),SequraFE.state.getData("shopPaymentMethods")||SequraFE.state.setData("shopPaymentMethods",n),SequraFE.state.getData("sellingCountries")||SequraFE.state.setData("sellingCountries",r)},w=function(){var e,n,a;document.getElementById("sq-page-wrapper").append(u.createElement("div","sq-page-content-wrapper sqv--settings","",null,[SequraFE.components.PageHeader.create({currentVersion:null===(e=t)||void 0===e?void 0:e.current,newVersion:{versionLabel:null===(n=t)||void 0===n?void 0:n.new,versionUrl:null===(a=t)||void 0===a?void 0:a.downloadNewVersionUrl},mode:"live"===i.environment?i.environment:"test",activeStore:f,stores:r.map((function(e){return{label:e.storeName,value:e.storeId}})),onChange:function(e){e!==SequraFE.state.getStoreId()&&(SequraFE.state.setStoreId(e),window.location.hash="",SequraFE.state.display())},menuItems:SequraFE.isPromotional?[]:SequraFE.utilities.getMenuItems(SequraFE.appStates.SETTINGS)}),u.createElement("div","sq-page-content","",null,[q()]),u.createSupportLink()]))},q=function(){return u.createElement("div","sq-content-row","",null,[u.createSettingsSidebar({links:SequraFE.pages.settings.map((function(e){var t,n=null!==(t=SequraFE.state.getPage())&&void 0!==t?t:SequraFE.pages.settings[0];switch(e){case SequraFE.appPages.SETTINGS.GENERAL:return{label:"sidebar.generalSettings",href:"#settings-general",icon:"general",isActive:n===SequraFE.appPages.SETTINGS.GENERAL};case SequraFE.appPages.SETTINGS.CONNECTION:return{label:"sidebar.connectionSettings",href:"#settings-connection",icon:"connection",isActive:n===SequraFE.appPages.SETTINGS.CONNECTION};case SequraFE.appPages.SETTINGS.WIDGET:return{label:"sidebar.widgetSettings",href:"#settings-widget",icon:"widget",isActive:n===SequraFE.appPages.SETTINGS.WIDGET};default:return null}}))}),u.createElement("main","sq-content")])}}},187:function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n(t,n,r){return(n=function(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,n||"default");if("object"!=e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}window.SequraFE||(window.SequraFE={}),SequraFE.appStates={ONBOARDING:"onboarding",SETTINGS:"settings",PAYMENT:"payment",TRANSACTION:"transactions",ADVANCED:"advanced"},SequraFE.appPages={ONBOARDING:{CONNECT:"connect",COUNTRIES:"countries",WIDGETS:"widgets"},SETTINGS:{GENERAL:"general",CONNECTION:"connection",ORDER_STATUS:"order_status",WIDGET:"widget"},PAYMENT:{METHODS:"methods"},TRANSACTION:{LOGS:"logs"},ADVANCED:{DEBUG:"debug"}},SequraFE.StateController=function(e){var a,o=this,i=SequraFE.ajaxService,s=SequraFE,l=s.pageControllerFactory,c=s.templateService,u=s.utilities,d="",p=function(){a={version:null,stores:null,connectionSettings:null,countrySettings:null,generalSettings:null,orderStatusSettings:null,widgetSettings:null,paymentMethods:null,sellingCountries:null,shopCategories:null,shopOrderStatuses:null,shopPaymentMethods:null,transactionLogs:null,logs:null,logsSettingsRes:null,allPaymentMethods:null}};p(),this.display=function(){u.showLoader(),p(),c.clearMainPage(),window.addEventListener("hashchange",h,!1),i.get(e.currentStoreUrl,null,SequraFE.customHeader).then((function(t){var n=function(e){return o.setStoreId(e.storeId),f()},r=Array.isArray(t)?t.find((function(e){return e.storeId===o.getStoreId()})):t;return r?n(r):i.get(e.currentStoreUrl,null,SequraFE.customHeader).then(n)}))};var h=function(){var e=window.location.hash.substring(1);e&&o.goToState(e)},f=function(){var t,n,s,l,c,d;u.showLoader();var p=null===(t=null===(n=SequraFE)||void 0===n||null===(s=n.integration)||void 0===s?void 0:s.hasVersion)||void 0===t||t,h=null===(l=null===(c=SequraFE)||void 0===c||null===(d=c.integration)||void 0===d?void 0:d.isMultistore)||void 0===l||l;return Promise.all([p?i.get(e.versionUrl.replace("{storeId}",o.getStoreId()),null,SequraFE.customHeader):null,h?i.get(e.storesUrl.replace("{storeId}",o.getStoreId()),null,SequraFE.customHeader):null,i.get(e.pageConfiguration.onboarding.getConnectionDataUrl.replace("{storeId}",o.getStoreId()),null,SequraFE.customHeader),i.get(e.pageConfiguration.onboarding.getCountrySettingsUrl.replace("{storeId}",o.getStoreId()),null,SequraFE.customHeader),SequraFE.pages.onboarding.includes(SequraFE.appPages.ONBOARDING.WIDGETS)?i.get(e.pageConfiguration.onboarding.getWidgetSettingsUrl.replace("{storeId}",o.getStoreId()),null,SequraFE.customHeader):null,i.get(e.pageConfiguration.advanced.saveLogsSettingsUrl.replace("{storeId}",o.getStoreId()),null,SequraFE.customHeader)]).then((function(t){var n=r(t,6),s=n[0],l=n[1],c=n[2],u=n[3],d=n[4],p=n[5];return a.version=s,a.stores=null!=l?l:[],a.connectionSettings=c,a.countrySettings=u,a.widgetSettings=d,a.logsSettings=p,i.get(e.stateUrl.replace("{storeId}",o.getStoreId()),null,SequraFE.customHeader)})).then((function(e){var t,n,r,a,i;SequraFE.state.getCredentialsChanged()&&SequraFE.state.removeCredentialsChanged();var s=o.getPage();e.state!==SequraFE.appStates.ONBOARDING?null!==(t=SequraFE.pages)&&void 0!==t&&null!==(n=t.transactions)&&void 0!==n&&n.includes(s)?o.goToState(SequraFE.appStates.TRANSACTION+"-"+SequraFE.appPages.TRANSACTION.LOGS,null,!0):null!==(r=SequraFE.pages)&&void 0!==r&&null!==(a=r.advanced)&&void 0!==a&&a.includes(s)?o.goToState(SequraFE.appStates.ADVANCED+"-"+s,null,!0):!s||null!==(i=SequraFE.pages.payment)&&void 0!==i&&i.includes(s)?o.goToState(SequraFE.appStates.PAYMENT+"-"+SequraFE.appPages.PAYMENT.METHODS,null,!0):o.goToState(SequraFE.appStates.SETTINGS+"-"+s,null,!0):o.goToState(SequraFE.appStates.ONBOARDING,null,!0)})).catch((function(e){console.error(e)}))};this.goToState=function(e){var t,n,i,s,l,c,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(d!==e||arguments.length>2&&void 0!==arguments[2]&&arguments[2]){u.showLoader();var h=r(e.split("-"),2),f=h[0],g=h[1];if(f!==SequraFE.appStates.ONBOARDING)null===(s=a.connectionSettings)||void 0===s||!s.username||0===(null===(l=a.countrySettings)||void 0===l?void 0:l.length)||SequraFE.pages.onboarding.includes(SequraFE.appPages.ONBOARDING.WIDGETS)&&void 0===(null===(c=a.widgetSettings)||void 0===c?void 0:c.useWidgets)||SequraFE.state.getCredentialsChanged()?o.goToState(SequraFE.appStates.ONBOARDING,p,!0):m(e,p);else{var v,b,S;if(null!==(v=a.connectionSettings)&&void 0!==v&&v.username&&null!==(b=a.countrySettings)&&void 0!==b&&b.length&&(!SequraFE.pages.onboarding.includes(SequraFE.appPages.ONBOARDING.WIDGETS)||void 0!==(null===(S=a.widgetSettings)||void 0===S?void 0:S.useWidgets))&&!SequraFE.state.getCredentialsChanged())return void(d.split("-")[0]===SequraFE.appStates.ONBOARDING?o.goToState(SequraFE.appStates.PAYMENT+"-"+SequraFE.appPages.PAYMENT.METHODS):o.goToState(d,null,!0));switch(g||(g=SequraFE.appPages.ONBOARDING.WIDGETS),g){case SequraFE.appPages.ONBOARDING.COUNTRIES:null!==(t=a.connectionSettings)&&void 0!==t&&t.username||(g=SequraFE.appPages.ONBOARDING.CONNECT);break;case SequraFE.appPages.ONBOARDING.WIDGETS:(0===(null===(n=a.countrySettings)||void 0===n?void 0:n.length)||SequraFE.state.getCredentialsChanged())&&(g=SequraFE.appPages.ONBOARDING.COUNTRIES),null!==(i=a.connectionSettings)&&void 0!==i&&i.username||(g=SequraFE.appPages.ONBOARDING.CONNECT);break;default:g=SequraFE.appPages.ONBOARDING.CONNECT}m(f+"-"+g,p)}}};var m=function(e){var a,i,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,c=r(e.split("-"),2),u=c[0],p=c[1];Object.values(SequraFE.appStates).includes(u)||SequraFE.state.display(),p&&null!==(a=SequraFE.pages[u])&&void 0!==a&&a.includes(p)||(e=(p=null===(i=SequraFE.pages[u])||void 0===i?void 0:i[0])?u+"-"+p:u);var h=function(e){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?t(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({storeId:o.getStoreId()},s||{}),f=l.getInstance(u,g(u,p));d=e,v(p),window.location.hash=e,f&&f.display(h)},g=function(t,n){var r=u.cloneObject(e.pageConfiguration[t]||{});return Object.keys(r).forEach((function(e){r[e]=r[e].replace("{storeId}",o.getStoreId)})),n&&(r.page=n),r},v=function(e){localStorage.setItem("sq-page",e)};this.getPage=function(){if(window.location.hash){var e=window.location.hash.substring(1);if(e&&(e=e.split("-")[1]))return v(e),e}return localStorage.getItem("sq-page")},this.setCredentialsChanged=function(){SequraFE.state.setData("paymentMethods",null),SequraFE.state.setData("allPaymentMethods",null),localStorage.setItem("sq-password-changed","1")},this.removeCredentialsChanged=function(){localStorage.removeItem("sq-password-changed")},this.getCredentialsChanged=function(){return localStorage.getItem("sq-password-changed")},this.setStoreId=function(e){sessionStorage.setItem("sq-active-store-id",e)},this.getStoreId=function(){return sessionStorage.getItem("sq-active-store-id")},this.getShopName=function(){return i.get(e.shopNameUrl,(function(){}),SequraFE.customHeader)},this.getData=function(e){return Object.keys(a).includes(e)?a[e]:null},this.setData=function(e,t){Object.keys(a).includes(e)&&(a[e]=t)}}},317:function(){window.SequraFE||(window.SequraFE={}),SequraFE.StateUUIDService=new function(){var e="";this.setStateUUID=function(){e=Math.random().toString(36)},this.getStateUUID=function(){return e}}},623:function(){window.SequraFE||(window.SequraFE={}),SequraFE.templateService=new function(){var e=this,t={};this.getMainPage=function(){return document.querySelector("#sq-page-wrapper")},this.getContentWrapper=function(){return document.querySelector(".sq-page-content-wrapper")},this.clearMainPage=function(){e.clearComponent(e.getMainPage())},this.setTemplates=function(e){t=e},this.getTemplate=function(e){return n(t[e])};var n=function(e){return e?SequraFE.translationService.translateHtml(e):""};this.clearComponent=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}}},434:function(){function e(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}window.SequraFE||(window.SequraFE={}),SequraFE.translationService=new function(){var t=this,n=function(e,t,n){if(SequraFE.translations[e][t]&&SequraFE.translations[e][t]){var r=SequraFE.translations[e][t];return Array.isArray(n)?n.reduce((function(e,t){return e&&e.hasOwnProperty(t)?e[t]:null}),r):r&&r.hasOwnProperty(n)?r[n]:null}return null},r=function(e,t){if(!t)return e;var n=0;return e.replace(/%s/g,(function(){var e=void 0!==t[n]?t[n]:"%s";return n++,e}))};this.translate=function(t,a){var o=e(t.split(".")),i=o[0],s=o.slice(1),l=n("current",i,s)||n("default",i,s);return r(null!==l?l:t,a)},this.translateHtml=function(e){var n=t;return e.replace(/{\$[.\-_A-Za-z|]+}/g,(function(e){var t=(e=e.substring(2,e.length-1)).split("|");return n.translate(t[0],t.slice(1))||e}))}}},807:function(){window.SequraFE||(window.SequraFE={}),SequraFE.utilities=new function(){var e=this;this.showElement=function(e){null==e||e.classList.remove("sqs--hidden")},this.hideElement=function(e){null==e||e.classList.add("sqs--hidden")},this.showLoader=function(){e.showElement(document.getElementById("sq-spinner"))},this.hideLoader=function(){e.hideElement(document.getElementById("sq-spinner"))},this.createFlashMessage=function(e,t,n){return SequraFE.elementGenerator.createFlashMessage(e,t,n)},this.disableFooter=function(e){var t=document.querySelector(".sq-page-footer .sqp-actions .sqp-save"),n=document.querySelector(".sq-page-footer .sqp-actions .sqp-cancel");t&&n&&(t.disabled=e,n.disabled=e)},this.cloneObject=function(e){return JSON.parse(JSON.stringify(e||{}))},this.getAncestor=function(e,t){for(var n=null==e?void 0:e.parentElement;n&&!n.classList.contains(t);)n=n.parentElement;return n},this.getMenuItems=function(e){var t,n,r,a,o=[{label:"general.paymentMethods",href:window.location.href.split("#")[0]+"#payment",isActive:e===SequraFE.appStates.PAYMENT},{label:"general.settings",href:window.location.href.split("#")[0]+"#settings",isActive:e===SequraFE.appStates.SETTINGS}];return null!==(t=SequraFE.pages)&&void 0!==t&&null!==(n=t.transactions)&&void 0!==n&&n[0]&&o.push({label:"general.transactionLogs",href:window.location.href.split("#")[0]+"#transactions",isActive:e===SequraFE.appStates.TRANSACTION}),null!==(r=SequraFE.pages)&&void 0!==r&&null!==(a=r.advanced)&&void 0!==a&&a[0]&&o.push({label:"general.advanced",href:window.location.href.split("#")[0]+"#advanced",isActive:e===SequraFE.appStates.ADVANCED}),o}}},716:function(){function e(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=n(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw i}}}}function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||n(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var a,o,i,s,l,c,u,d,p,h,f,m,g,v,b,S;window.SequraFE||(window.SequraFE={}),a="integer",o="required",i="greaterThanZero",s="minValue",l="maxValue",c="nonNegative",u="greaterThanX",d=SequraFE,p=d.templateService,h=d.utilities,f=d.translationService,m=function(e){return new RegExp(SequraFE.regex.ip).test(e)},g=function(e,t,n){n||(n=p.getMainPage());var r=n.querySelector(e);r&&v(r,t)},v=function(e,t){var n=h.getAncestor(e,"sq-field-wrapper");if(n&&n.classList.add("sqs--error"),t){var r=n.querySelector(".sqp-input-error");r||(r=SequraFE.elementGenerator.createElement("span","sqp-input-error",t),n.append(r)),r.innerHTML=f.translate(t)}},b=function(e){var t=h.getAncestor(e,"sq-field-wrapper");t&&t.classList.remove("sqs--error")},S=function(e,t,n){return t?(v(e,n),!1):(b(e),!0)},SequraFE.validationService={setError:v,removeError:b,validateEmail:function(e,t){return S(e,!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e.value).toLowerCase()),t)},validateDateOrDuration:function(e){return new RegExp(SequraFE.regex.dateOrDuration).test(e)&&"P"!==e&&!e.endsWith("T")},validateIP:m,validateIPList:function(t){var n,r=!0,a=e(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(!m(o)){r=!1;break}}}catch(e){a.e(e)}finally{a.f()}return r},validateNumber:function(e,n){var r,d=null!==(r=e.dataset)&&void 0!==r&&r.validationRule?e.dataset.validationRule.split(","):[],p=!0;if(!S(e,Number.isNaN(e.value),n))return!1;var h=Number(e.value);return d.forEach((function(r){var d,f;if(p){var m=!1,g=null;if(r.includes("|")){var v=t(r.split("|"),2);r=v[0],g=v[1]}switch(r){case a:m=Number.isInteger(h);break;case i:m=h>0;break;case s:m=h>=Number(g);break;case l:m=h<=Number(g);break;case c:m=h>=0;break;case o:m=!(null===(d=e.value)||void 0===d||!d.trim());break;case u:m=h>=Number(null===(f=document.querySelector('input[name="'.concat(g,'"]')))||void 0===f?void 0:f.value);break;default:return}S(e,!m,n)||(p=!1)}})),p},validateUrl:function(e,t){return S(e,!/(https?:\/\/)([\w\-])+\.([a-zA-Z]{2,63})([\/\w-]*)*\/?\??([^#\n\r]*)?#?([^\n\r]*)/m.test(String(e.value).toLowerCase()),t)},validateMaxLength:function(e,t){return S(e,e.dataset.maxLength&&e.value.length>e.dataset.maxLength,t)},validateJson:function(e,t,n){try{return JSON.parse(t),b(e),!0}catch(t){return v(e,n),!1}},validateCssSelector:function(e,t,n){var r=!1;try{document.querySelector(e.value),r=!0}catch(n){r=!t&&!e.value}return S(e,!r,n)},validateField:S,validateRequiredField:function(e,t){var n;return S(e,!(null!==(n=e.value)&&void 0!==n&&n.trim())||"checkbox"===e.type&&!e.checked,t)},handleValidationErrors:function(t){var n,r=e(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;g("[name=".concat(a.field,"]"),a.message)}}catch(e){r.e(e)}finally{r.f()}}}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),function(){"use strict";n(31),n(771),n(434),n(623),n(807),n(716),n(888),n(585),n(474),n(317),n(621),n(832),n(738),n(50),n(255),n(79),n(55);function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function r(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,n||"default");if("object"!=e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}function o(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}function i(e,t){return e.get(function(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}(e,t))}var s=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,d=r((function e(t){var n=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,s,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;void 0!==(null==e?void 0:e.preventDefault)&&(null==e||e.preventDefault());var r=n.template.cloneNode(!0).content.querySelector(".sq-table__row");r.querySelector(".sq-table__row-header").innerHTML=n.adapter.getRowHeader(t),r.querySelector(".sq-table__row-content").innerHTML=n.adapter.getRowContent(t);var a=r.querySelector(".sq-remove");a&&a.addEventListener("click",i(l,n)),n.body.appendChild(r),r.querySelectorAll("input,textarea,select").forEach((function(e){e.addEventListener("change",(function(){n.adapter.handleChange&&n.adapter.handleChange(n.elem.querySelector(".sq-table"))}))})),i(c,n).call(n)})),o(this,l,(function(e){void 0!==(null==e?void 0:e.preventDefault)&&(null==e||e.preventDefault()),e.target.closest(".sq-table__row").remove(),i(c,n).call(n)})),o(this,c,(function(){0===n.elem.querySelectorAll(".sq-table__body >.sq-table__row").length?n.elem.querySelector(".sq-table__body").classList.add("sqs--hidden"):n.elem.querySelector(".sq-table__body").classList.remove("sqs--hidden"),n.adapter.handleChange&&n.adapter.handleChange(n.elem.querySelector(".sq-table"))})),o(this,u,(function(){var e=document.createElement("div");e.classList.add("sq-table");var t=!0;void 0!==n.adapter.canAdd&&(t=n.adapter.canAdd);var r=!0;void 0!==n.adapter.canRemove&&(r=n.adapter.canRemove);var a="";void 0!==n.adapter.name&&(a='name="'.concat(n.adapter.name,'"'));var o=t?'<button class="sq-button sq-add sqm--small" type="button">'.concat(SequraFE.translationService.translate(n.adapter.addRowText),"</button>"):"",i=r?'<button class="sq-button sq-remove sqm--small" type="button">'.concat(SequraFE.translationService.translate(n.adapter.removeRowText),"</button>"):"";e.innerHTML='\n            <header class="sq-table__header">\n                '.concat(n.adapter.getHeaders().map((function(e){return'<div class="sq-table__header-item"><h3 class="sqp-field-title">'.concat(e.title,'</h3><span class="sqp-field-subtitle">').concat(e.description,"</span></div>")})).join(""),"\n                ").concat(o,'\n\t\t\t</header>\n\t\t\t<div class="sq-table__body sqs--hidden">\n\t\t\t\t<template>\n\t\t\t\t\t<details class="sq-table__row" ').concat(a,'>\n                        <summary class="sq-table__row-header"></summary>\n\t\t\t\t\t\t<div class="sq-table__row-content"></div>\t\n                        ').concat(i,"\n\t\t\t\t\t</details>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t\t").trim(),n.elem.appendChild(e)})),this.adapter=t,this.elem=document.querySelector(this.adapter.containerSelector),this.elem){i(u,this).call(this),this.checkAllCheckbox=this.elem.querySelector(".sq-check-all"),this.body=this.elem.querySelector(".sq-table__body"),this.template=this.body.querySelector("template");var r=this.elem.querySelector(".sq-add");r&&r.addEventListener("click",i(s,this)),this.adapter.data.forEach((function(e){return i(s,n).call(n,null,e)}))}}));window.SequraFE||(window.SequraFE={}),SequraFE.WidgetSettingsForm=function(e,t){var n,r,a,o=this,i=SequraFE.ajaxService,s=e.allPaymentMethods,l=SequraFE,c=l.elementGenerator,u=l.validationService,p=l.utilities,h=!1,f={useWidgets:!1,assetsKey:"",displayWidgetOnProductPage:!1,widgetLabels:{message:SequraFE.miniWidgetLabels.messages.ES,messageBelowLimit:SequraFE.miniWidgetLabels.messagesBelowLimit.ES},widgetStyles:'{"alignment":"center","amount-font-bold":"true","amount-font-color":"#1C1C1C","amount-font-size":"15","background-color":"white","border-color":"#B1AEBA","border-radius":"","class":"","font-color":"#1C1C1C","link-font-color":"#1C1C1C","link-underline":"true","no-costs-claim":"","size":"M","starting-text":"only","type":"banner"}',showInstallmentAmountInProductListing:!1,showInstallmentAmountInCartPage:!1,selForPrice:".summary .price>.amount,.summary .price ins .amount",selForAltPrice:".woocommerce-variation-price .price>.amount,.woocommerce-variation-price .price ins .amount",selForAltPriceTrigger:".variations",selForDefaultLocation:".summary>.price",customLocations:[],selForCartPrice:".order-total .amount",selForCartLocation:".order-total",selForListingPrice:".product .price>.amount:first-child,.product .price ins .amount",selForListingLocation:".product .price"};this.render=function(){var t;if(!n)for(var o in n=p.cloneObject(f)){var i,s;n[o]=null!==(i=null==e||null===(s=e.widgetSettings)||void 0===s?void 0:s[o])&&void 0!==i?i:f[o]}a=null===(t=e.paymentMethods)||void 0===t?void 0:t.map((function(e){return e.product})),h=n.assetsKey&&0!==n.assetsKey.length,r=p.cloneObject(n),m(),O(!0),p.hideLoader()};var m=function(){var e=document.querySelector(".sq-content");null==e||e.append(c.createElement("div","sq-content-inner","",null,[c.createElement("div","sqp-flash-message-wrapper"),c.createPageHeading({title:"widgets.title.".concat(t.appState),text:"widgets.description"}),c.createRadioGroupField({value:r.useWidgets,label:"widgets.usePromotionalComponents.label",options:[{label:"widgets.usePromotionalComponents.options.yes",value:!0},{label:"widgets.usePromotionalComponents.options.no",value:!1}],onChange:function(e){return q("useWidgets",e)}})])),g(),v(),y(),b(".sq-product-related-field",r.displayWidgetOnProductPage),b(".sq-cart-related-field",r.showInstallmentAmountInCartPage),b(".sq-listing-related-field",r.showInstallmentAmountInProductListing)},g=function(){var e,t=document.querySelector(".sq-content-inner");r.useWidgets&&(null==t||t.append(c.createTextField({name:"assets-key-input",value:r.assetsKey,className:"sq-text-input",label:"widgets.assetKey.label",description:"widgets.assetKey.description",onChange:function(e){return q("assetsKey",e)}})),0!==(null===(e=r.assetsKey)||void 0===e?void 0:e.length)&&u.validateField(document.querySelector('[name="assets-key-input"]'),!h,"validation.invalidField"))},v=function(){if(r.useWidgets&&h){var e=document.querySelector(".sq-content-inner");null==e||e.append(c.createTextArea({className:"sq-text-input sq-text-area",name:"widget-styles",label:"widgets.configurator.label",description:"widgets.configurator.description.start",value:r.widgetStyles,onChange:function(e){return q("widgetStyles",e)},rows:10}),c.createToggleField({value:r.displayWidgetOnProductPage,label:"widgets.displayOnProductPage.label",description:"widgets.displayOnProductPage.description",onChange:function(e){return q("displayWidgetOnProductPage",e)}}),c.createTextField({value:r.selForPrice,name:"selForPrice",className:"sq-text-input sq-product-related-field",label:"widgets.selForPrice.label",description:"widgets.selForPrice.description",onChange:function(e){return q("selForPrice",e)}}),c.createTextField({value:r.selForAltPrice,name:"selForAltPrice",className:"sq-text-input sq-product-related-field",label:"widgets.selForAltPrice.label",description:"widgets.selForAltPrice.description",onChange:function(e){return q("selForAltPrice",e)}}),c.createTextField({value:r.selForAltPriceTrigger,name:"selForAltPriceTrigger",className:"sq-text-input sq-product-related-field",label:"widgets.selForAltPriceTrigger.label",description:"widgets.selForAltPriceTrigger.description",onChange:function(e){return q("selForAltPriceTrigger",e)}}),c.createTextField({value:r.selForDefaultLocation,name:"selForDefaultLocation",className:"sq-text-input sq-product-related-field",label:"widgets.defaultLocationSel.label",description:"widgets.defaultLocationSel.description",onChange:function(e){return q("selForDefaultLocation",e)}}),c.createElement("div","sq-field-wrapper sq-locations-container sq-product-related-field"),c.createToggleField({value:r.showInstallmentAmountInCartPage,label:"widgets.showInCartPage.label",description:"widgets.showInCartPage.description",onChange:function(e){return q("showInstallmentAmountInCartPage",e)}}),c.createTextField({value:r.selForCartPrice,name:"selForCartPrice",className:"sq-text-input sq-cart-related-field",label:"widgets.selForCartPrice.label",description:"widgets.selForCartPrice.description",onChange:function(e){return q("selForCartPrice",e)}}),c.createTextField({value:r.selForCartLocation,name:"selForCartLocation",className:"sq-text-input sq-cart-related-field",label:"widgets.cartDefaultLocationSel.label",description:"widgets.cartDefaultLocationSel.description",onChange:function(e){return q("selForCartLocation",e)}}),c.createToggleField({value:r.showInstallmentAmountInProductListing,label:"widgets.showInProductListing.label",description:"widgets.showInProductListing.description",onChange:function(e){return q("showInstallmentAmountInProductListing",e)}}),c.createTextField({value:r.selForListingPrice,name:"selForListingPrice",className:"sq-text-input sq-listing-related-field",label:"widgets.selForListingPrice.label",description:"widgets.selForListingPrice.description",onChange:function(e){return q("selForListingPrice",e)}}),c.createTextField({value:r.selForListingLocation,name:"selForListingLocation",className:"sq-text-input sq-listing-related-field",label:"widgets.selForListingLocation.label",description:"widgets.selForListingLocation.description",onChange:function(e){return q("selForListingLocation",e)}})),document.querySelector(".sqp-textarea-field .sqp-field-subtitle").append(c.createButtonLink({className:"sq-link-button",text:"widgets.configurator.description.link",href:"https://live.sequracdn.com/assets/static/simulator.html",openInNewTab:!0}),c.createElement("span","","widgets.configurator.description.end")),S()}},b=function(e,t){var n=".sq-field-wrapper:has(".concat(e,"),.sq-field-wrapper").concat(e),r="sqs--hidden";document.querySelectorAll(n).forEach((function(e){t?e.classList.remove(r):e.classList.add(r)}))},S=function(){new d({containerSelector:".sq-locations-container",data:r.customLocations,getHeaders:function(){return[{title:SequraFE.translationService.translate("widgets.locations.headerTitle"),description:SequraFE.translationService.translate("widgets.locations.headerDescription")}]},getRowContent:function(e){var t=!0;return e&&void 0!==e.displayWidget&&(t=e.displayWidget),'\n                    <div class="sq-table__row-field-wrapper sq-table__row-field-wrapper--grow sq-table__row-field-wrapper--space-between">\n                       <h3 class="sqp-field-title">'.concat(SequraFE.translationService.translate("widgets.displayOnProductPage.label"),'\n                       <label class="sq-toggle"><input class="sqp-toggle-input" type="checkbox" ').concat(t?"checked":"",'><span class="sqp-toggle-round"></span></label>\n                       </h3>\n                       <span class="sqp-field-subtitle">').concat(SequraFE.translationService.translate("widgets.displayOnProductPage.description"),'</span>\n                    </div>\n                 \n                     <div class="sq-table__row-field-wrapper sq-table__row-field-wrapper--grow">\n                        <label class="sq-table__row-field-label">').concat(SequraFE.translationService.translate("widgets.locations.selector"),'</label>\n                        <span class="sqp-field-subtitle">').concat(SequraFE.translationService.translate("widgets.locations.leaveEmptyToUseDefault"),'</span>\n                        <input class="sq-table__row-field" type="text" value="').concat(e&&void 0!==e.selForTarget?e.selForTarget:"",'">\n                    </div>\n                    <div class="sq-table__row-field-wrapper sq-table__row-field-wrapper--grow">\n                    <label class="sq-table__row-field-label">').concat(SequraFE.translationService.translate("widgets.configurator.label"),'</label>\n                    <span class="sqp-field-subtitle">').concat(SequraFE.translationService.translate("widgets.configurator.description.start"),'<a class="sq-link-button" href="https://live.sequracdn.com/assets/static/simulator.html" target="_blank"><span>').concat(SequraFE.translationService.translate("widgets.configurator.description.link"),"</span></a><span>").concat(SequraFE.translationService.translate("widgets.configurator.description.end")," ").concat(SequraFE.translationService.translate("widgets.locations.leaveEmptyToUseDefault"),'</span></span>\n                    <textarea class="sqp-field-component sq-text-input sq-text-area" rows="5">').concat(e&&void 0!==e.widgetStyles?e.widgetStyles:"","</textarea>\n                    </div>\n                    ")},getRowHeader:function(e){var t=!1;return'\n                    <div class="sq-table__row-field-wrapper">\n                        <label class="sq-table__row-field-label">'.concat(SequraFE.translationService.translate("widgets.locations.paymentMethod"),'</label>\n                        <select class="sq-table__row-field">').concat(s?s.map((function(n,r){if(!n.supportsWidgets)return"";var a="";!t&&e&&e.product===n.product&&e.country===n.countryCode&&e.campaign===n.campaign&&(a=" selected",t=!0);var o=n.campaign?' data-campaign="'.concat(n.campaign,'"'):"";return'<option key="'.concat(r,'" data-country-code="').concat(n.countryCode,'" data-product="').concat(n.product,'"').concat(o+a,">").concat(n.title,"</option>")})).join(""):"","\n                        </select>\n                    </div>\n                   ")},handleChange:function(e){var t=[];e.querySelectorAll(".sq-table__row").forEach((function(e){var n=e.querySelector("select"),r=e.querySelector('input[type="text"]').value,a=e.querySelector("textarea").value,o=e.querySelector('input[type="checkbox"]').checked,i=-1===n.selectedIndex?null:n.options[n.selectedIndex].dataset,s=void 0!==i.product?i.product:null,l=void 0!==i.countryCode?i.countryCode:null,c=void 0!==i.campaign?i.campaign:null;t.push({selForTarget:r,product:s,country:l,campaign:c,widgetStyles:a,displayWidget:o})})),q("customLocations",t)},addRowText:"widgets.locations.addRow",removeRowText:"widgets.locations.removeRow"})},y=function(){var e=document.querySelector(".sq-content"),n=document.querySelector(".sq-content-inner");t.appState!==SequraFE.appStates.ONBOARDING?null==e||e.append(c.createPageFooter({onSave:F,onCancel:function(){p.showLoader();for(var e=document.querySelector(".sq-content");null!=e&&e.firstChild;)null==e||e.removeChild(null==e?void 0:e.firstChild);o.render()}})):null==n||n.append(c.createButtonField({className:"sq-controls sqm--block",buttonType:"primary",buttonLabel:"general.continue",onClick:F}))},w=function(e){try{return e.forEach((function(t){if(""!==t.selForTarget&&!function(e){try{return document.querySelector(e),!0}catch(e){return!1}}(t.selForTarget))throw new Error("Invalid selector");if(""!==t.widgetStyles&&!N(t.widgetStyles))throw new Error("Invalid selector");if(!s.some((function(e){return e.supportsWidgets&&e.product===t.product&&e.countryCode===t.country&&e.campaign===t.campaign})))throw new Error("Invalid payment method");if(e.filter((function(e){return e.product===t.product&&e.country===t.country&&e.campaign===t.campaign})).length>1)throw new Error("Duplicated entry found")})),!0}catch(e){return!1}},q=function(e,t){if(r[e]=t,O(!1),"useWidgets"!==e&&"showInstallmentAmountInProductListing"!==e||E(),"widgetStyles"===e){var n=u.validateJson(document.querySelector('[name="widget-styles"]'),t,"validation.invalidJson");O(!n)}if("assetsKey"===e&&(p.showLoader(),C().then((function(e){h=e,E(),u.validateField(document.querySelector('[name="assets-key-input"]'),!e,"validation.invalidField")})).finally(p.hideLoader)),"displayWidgetOnProductPage"===e&&b(".sq-product-related-field",t),"showInstallmentAmountInCartPage"===e&&b(".sq-cart-related-field",t),"showInstallmentAmountInProductListing"===e&&b(".sq-listing-related-field",t),["selForPrice","selForDefaultLocation","selForAltPrice","selForAltPriceTrigger","selForCartPrice","selForCartLocation","selForListingPrice","selForListingLocation"].includes(e)){var a=u.validateCssSelector(document.querySelector('[name="'.concat(e,'"]')),["selForPrice","selForDefaultLocation","selForCartPrice","selForCartLocation","selForListingPrice","selForListingLocation"].includes(e),"validation.invalidField");O(!a)}if("customLocations"===e){var o=w(t);u.validateField(document.querySelector(".sq-product-related-field .sq-table"),!o,"validation.invalidField"),O(!o)}},E=function(){var e;null===(e=document.querySelector(".sq-content-inner"))||void 0===e||e.remove(),t.appState!==SequraFE.appStates.ONBOARDING&&document.querySelector(".sq-page-footer").remove(),m()},F=function(){var e;if(r.useWidgets&&0===(null===(e=r.assetsKey)||void 0===e?void 0:e.length))u.validateRequiredField(document.querySelector('[name="assets-key-input"]'),"validation.requiredField");else if(!r.useWidgets||h){if(r.useWidgets){var a=N(r.widgetStyles);if(u.validateField(document.querySelector('[name="widget-styles"]'),!a,"validation.invalidJSON"),r.displayWidgetOnProductPage){for(var o=0,s=["selForPrice","selForDefaultLocation"];o<s.length;o++){var l=s[o];a=u.validateCssSelector(document.querySelector('[name="'.concat(l,'"]')),!0,"validation.invalidField")&&a}for(var c=0,d=["selForAltPrice","selForAltPriceTrigger"];c<d.length;c++){var f=d[c];a=u.validateCssSelector(document.querySelector('[name="'.concat(f,'"]')),!1,"validation.invalidField")&&a}var m=w(r.customLocations);a=m&&a,u.validateField(document.querySelector(".sq-product-related-field .sq-table"),!m,"validation.invalidField")}if(r.showInstallmentAmountInCartPage)for(var g=0,v=["selForCartPrice","selForCartLocation"];g<v.length;g++){var b=v[g];a=u.validateCssSelector(document.querySelector('[name="'.concat(b,'"]')),!0,"validation.invalidField")&&a}if(r.showInstallmentAmountInProductListing)for(var S=0,y=["selForListingPrice","selForListingLocation"];S<y.length;S++){var q=y[S];a=u.validateCssSelector(document.querySelector('[name="'.concat(q,'"]')),!0,"validation.invalidField")&&a}if(!a)return}p.showLoader(),i.post(t.saveWidgetSettingsUrl,r,SequraFE.customHeader).then((function(){if(t.appState===SequraFE.appStates.ONBOARDING){var e=SequraFE.pages.onboarding.indexOf(SequraFE.appPages.ONBOARDING.WIDGETS);SequraFE.pages.onboarding.length>e+1?window.location.hash=t.appState+"-"+SequraFE.pages.onboarding[e+1]:window.location.hash=SequraFE.appStates.PAYMENT+"-"+SequraFE.appPages.PAYMENT.METHODS}n=p.cloneObject(r),SequraFE.state.setData("widgetSettings",n),O(!0)})).finally(p.hideLoader)}},O=function(e){t.appState!==SequraFE.appStates.ONBOARDING&&p.disableFooter(e)},N=function(e){try{return JSON.parse(e),!0}catch(e){return!1}},C=function(){var t=e.connectionSettings.environment,n=e.countrySettings[0].merchantId,o=r.assetsKey,s=a.filter((function(e){return"i1"!==e})).join("_"),l="https://".concat(t,".sequracdn.com/scripts/").concat(n,"/").concat(o,"/").concat(s,"_cost.json");return i.get(l,null,{"Content-Type":"text/plain"},null,SequraFE.customHeader).then((function(){return!0})).catch((function(){return!1}))}};n(789),n(127),n(187),n(469),n(704),n(961);const p=e=>"[object Object]"===Object.prototype.toString.call(e),h=(e,t)=>{const n=document.createElement(e);if(t&&"object"==typeof t)for(const e in t)"html"===e?n.innerHTML=t[e]:n.setAttribute(e,t[e]);return n},f=e=>["#text","#comment"].includes(e.nodeName)?e.data:e.childNodes?e.childNodes.map((e=>f(e))).join(""):"",m=e=>{if(null==e)return"";if(e.hasOwnProperty("text")||e.hasOwnProperty("data")){const t=e;return t.text??m(t.data)}return e.hasOwnProperty("nodeName")?f(e):String(e)},g=function(e,t){let n=0,r=0;for(;n<e+1;)t[r].hidden||(n+=1),r+=1;return r-1},v=function(e){const t={};if(e)for(const n of e)t[n.name]=n.value;return t},b=e=>e?e.trim().split(" ").map((e=>`.${e}`)).join(""):null,S=(e,t)=>{const n=t?.split(" ").some((t=>!e.classList.contains(t)));return!n},y=(e,t)=>e?t?`${e} ${t}`:e:t||"";var w=function(){return w=Object.assign||function(e){for(var t,n=arguments,r=1,a=arguments.length;r<a;r++)for(var o in t=n[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},w.apply(this,arguments)};function q(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var E=function(){function e(e){void 0===e&&(e={});var t=this;Object.entries(e).forEach((function(e){var n=e[0],r=e[1];return t[n]=r}))}return e.prototype.toString=function(){return JSON.stringify(this)},e.prototype.setValue=function(e,t){return this[e]=t,this},e}();function F(e){for(var t=arguments,n=[],r=1;r<arguments.length;r++)n[r-1]=t[r];return null!=e&&n.some((function(t){var n,r;return"function"==typeof(null===(r=null===(n=null==e?void 0:e.ownerDocument)||void 0===n?void 0:n.defaultView)||void 0===r?void 0:r[t])&&e instanceof e.ownerDocument.defaultView[t]}))}function O(e,t,n){var r;return"#text"===e.nodeName?r=n.document.createTextNode(e.data):"#comment"===e.nodeName?r=n.document.createComment(e.data):(t?(r=n.document.createElementNS("http://www.w3.org/2000/svg",e.nodeName),"foreignObject"===e.nodeName&&(t=!1)):"svg"===e.nodeName.toLowerCase()?(r=n.document.createElementNS("http://www.w3.org/2000/svg","svg"),t=!0):r=n.document.createElement(e.nodeName),e.attributes&&Object.entries(e.attributes).forEach((function(e){var t=e[0],n=e[1];return r.setAttribute(t,n)})),e.childNodes&&e.childNodes.forEach((function(e){return r.appendChild(O(e,t,n))})),n.valueDiffing&&(e.value&&F(r,"HTMLButtonElement","HTMLDataElement","HTMLInputElement","HTMLLIElement","HTMLMeterElement","HTMLOptionElement","HTMLProgressElement","HTMLParamElement")&&(r.value=e.value),e.checked&&F(r,"HTMLInputElement")&&(r.checked=e.checked),e.selected&&F(r,"HTMLOptionElement")&&(r.selected=e.selected))),r}var N=function(e,t){for(t=t.slice();t.length>0;){var n=t.splice(0,1)[0];e=e.childNodes[n]}return e};function C(e,t,n){var r,a,o,i=t[n._const.action],s=t[n._const.route];[n._const.addElement,n._const.addTextElement].includes(i)||(r=N(e,s));var l={diff:t,node:r};if(n.preDiffApply(l))return!0;switch(i){case n._const.addAttribute:if(!r||!F(r,"Element"))return!1;r.setAttribute(t[n._const.name],t[n._const.value]);break;case n._const.modifyAttribute:if(!r||!F(r,"Element"))return!1;r.setAttribute(t[n._const.name],t[n._const.newValue]),F(r,"HTMLInputElement")&&"value"===t[n._const.name]&&(r.value=t[n._const.newValue]);break;case n._const.removeAttribute:if(!r||!F(r,"Element"))return!1;r.removeAttribute(t[n._const.name]);break;case n._const.modifyTextElement:if(!r||!F(r,"Text"))return!1;n.textDiff(r,r.data,t[n._const.oldValue],t[n._const.newValue]),F(r.parentNode,"HTMLTextAreaElement")&&(r.parentNode.value=t[n._const.newValue]);break;case n._const.modifyValue:if(!r||void 0===r.value)return!1;r.value=t[n._const.newValue];break;case n._const.modifyComment:if(!r||!F(r,"Comment"))return!1;n.textDiff(r,r.data,t[n._const.oldValue],t[n._const.newValue]);break;case n._const.modifyChecked:if(!r||void 0===r.checked)return!1;r.checked=t[n._const.newValue];break;case n._const.modifySelected:if(!r||void 0===r.selected)return!1;r.selected=t[n._const.newValue];break;case n._const.replaceElement:var c="svg"===t[n._const.newValue].nodeName.toLowerCase()||"http://www.w3.org/2000/svg"===r.parentNode.namespaceURI;r.parentNode.replaceChild(O(t[n._const.newValue],c,n),r);break;case n._const.relocateGroup:q([],new Array(t[n._const.groupLength]),!0).map((function(){return r.removeChild(r.childNodes[t[n._const.from]])})).forEach((function(e,a){0===a&&(o=r.childNodes[t[n._const.to]]),r.insertBefore(e,o||null)}));break;case n._const.removeElement:r.parentNode.removeChild(r);break;case n._const.addElement:var u=(p=s.slice()).splice(p.length-1,1)[0];if(!F(r=N(e,p),"Element"))return!1;r.insertBefore(O(t[n._const.element],"http://www.w3.org/2000/svg"===r.namespaceURI,n),r.childNodes[u]||null);break;case n._const.removeTextElement:if(!r||3!==r.nodeType)return!1;var d=r.parentNode;d.removeChild(r),F(d,"HTMLTextAreaElement")&&(d.value="");break;case n._const.addTextElement:var p;if(u=(p=s.slice()).splice(p.length-1,1)[0],a=n.document.createTextNode(t[n._const.value]),!(r=N(e,p)).childNodes)return!1;r.insertBefore(a,r.childNodes[u]||null),F(r.parentNode,"HTMLTextAreaElement")&&(r.parentNode.value=t[n._const.value]);break;default:console.log("unknown action")}return n.postDiffApply({diff:l.diff,node:l.node,newNode:a}),!0}function P(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}var _=function(e){var t=[];return t.push(e.nodeName),"#text"!==e.nodeName&&"#comment"!==e.nodeName&&e.attributes&&(e.attributes.class&&t.push("".concat(e.nodeName,".").concat(e.attributes.class.replace(/ /g,"."))),e.attributes.id&&t.push("".concat(e.nodeName,"#").concat(e.attributes.id))),t},A=function(e){var t={},n={};return e.forEach((function(e){_(e).forEach((function(e){var r=e in t;r||e in n?r&&(delete t[e],n[e]=!0):t[e]=!0}))})),t},D=function(e,t){var n=A(e),r=A(t),a={};return Object.keys(n).forEach((function(e){r[e]&&(a[e]=!0)})),a},j=function(e){return delete e.outerDone,delete e.innerDone,delete e.valueDone,!e.childNodes||e.childNodes.every(j)},T=function(e){if(Object.prototype.hasOwnProperty.call(e,"data"))return{nodeName:"#text"===e.nodeName?"#text":"#comment",data:e.data};var t={nodeName:e.nodeName};return Object.prototype.hasOwnProperty.call(e,"attributes")&&(t.attributes=w({},e.attributes)),Object.prototype.hasOwnProperty.call(e,"checked")&&(t.checked=e.checked),Object.prototype.hasOwnProperty.call(e,"value")&&(t.value=e.value),Object.prototype.hasOwnProperty.call(e,"selected")&&(t.selected=e.selected),Object.prototype.hasOwnProperty.call(e,"childNodes")&&(t.childNodes=e.childNodes.map((function(e){return T(e)}))),t},x=function(e,t){if(!["nodeName","value","checked","selected","data"].every((function(n){return e[n]===t[n]})))return!1;if(Object.prototype.hasOwnProperty.call(e,"data"))return!0;if(Boolean(e.attributes)!==Boolean(t.attributes))return!1;if(Boolean(e.childNodes)!==Boolean(t.childNodes))return!1;if(e.attributes){var n=Object.keys(e.attributes),r=Object.keys(t.attributes);if(n.length!==r.length)return!1;if(!n.every((function(n){return e.attributes[n]===t.attributes[n]})))return!1}if(e.childNodes){if(e.childNodes.length!==t.childNodes.length)return!1;if(!e.childNodes.every((function(e,n){return x(e,t.childNodes[n])})))return!1}return!0},L=function(e,t,n,r,a){if(void 0===a&&(a=!1),!e||!t)return!1;if(e.nodeName!==t.nodeName)return!1;if(["#text","#comment"].includes(e.nodeName))return!!a||e.data===t.data;if(e.nodeName in n)return!0;if(e.attributes&&t.attributes){if(e.attributes.id){if(e.attributes.id!==t.attributes.id)return!1;if("".concat(e.nodeName,"#").concat(e.attributes.id)in n)return!0}if(e.attributes.class&&e.attributes.class===t.attributes.class&&"".concat(e.nodeName,".").concat(e.attributes.class.replace(/ /g,"."))in n)return!0}if(r)return!0;var o=e.childNodes?e.childNodes.slice().reverse():[],i=t.childNodes?t.childNodes.slice().reverse():[];if(o.length!==i.length)return!1;if(a)return o.every((function(e,t){return e.nodeName===i[t].nodeName}));var s=D(o,i);return o.every((function(e,t){return L(e,i[t],s,!0,!0)}))},I=function(e,t){return q([],new Array(e),!0).map((function(){return t}))},M=function(e,t){for(var n=e.childNodes?e.childNodes:[],r=t.childNodes?t.childNodes:[],a=I(n.length,!1),o=I(r.length,!1),i=[],s=function(){return arguments[1]},l=!1,c=function(){var e=function(e,t,n,r){var a=0,o=[],i=e.length,s=t.length,l=q([],new Array(i+1),!0).map((function(){return[]})),c=D(e,t),u=i===s;u&&e.some((function(e,n){var r=_(e),a=_(t[n]);return r.length!==a.length?(u=!1,!0):(r.some((function(e,t){if(e!==a[t])return u=!1,!0})),!u||void 0)}));for(var d=0;d<i;d++)for(var p=e[d],h=0;h<s;h++){var f=t[h];n[d]||r[h]||!L(p,f,c,u)?l[d+1][h+1]=0:(l[d+1][h+1]=l[d][h]?l[d][h]+1:1,l[d+1][h+1]>=a&&(a=l[d+1][h+1],o=[d+1,h+1]))}return 0!==a&&{oldValue:o[0]-a,newValue:o[1]-a,length:a}}(n,r,a,o);e?(i.push(e),q([],new Array(e.length),!0).map(s).forEach((function(t){return function(e,t,n,r){e[n.oldValue+r]=!0,t[n.newValue+r]=!0}(a,o,e,t)}))):l=!0};!l;)c();return e.subsets=i,e.subsetsAge=100,i},k=function(){function e(){this.list=[]}return e.prototype.add=function(e){var t;(t=this.list).push.apply(t,e)},e.prototype.forEach=function(e){this.list.forEach((function(t){return e(t)}))},e}();function V(e,t){var n,r,a=e;for(t=t.slice();t.length>0;)r=t.splice(0,1)[0],n=a,a=a.childNodes?a.childNodes[r]:void 0;return{node:a,parentNode:n,nodeIndex:r}}function H(e,t,n){return t.forEach((function(t){!function(e,t,n){var r,a,o,i;if(![n._const.addElement,n._const.addTextElement].includes(t[n._const.action])){var s=V(e,t[n._const.route]);a=s.node,o=s.parentNode,i=s.nodeIndex}var l,c,u=[],d={diff:t,node:a};if(n.preVirtualDiffApply(d))return!0;switch(t[n._const.action]){case n._const.addAttribute:a.attributes||(a.attributes={}),a.attributes[t[n._const.name]]=t[n._const.value],"checked"===t[n._const.name]?a.checked=!0:"selected"===t[n._const.name]?a.selected=!0:"INPUT"===a.nodeName&&"value"===t[n._const.name]&&(a.value=t[n._const.value]);break;case n._const.modifyAttribute:a.attributes[t[n._const.name]]=t[n._const.newValue];break;case n._const.removeAttribute:delete a.attributes[t[n._const.name]],0===Object.keys(a.attributes).length&&delete a.attributes,"checked"===t[n._const.name]?a.checked=!1:"selected"===t[n._const.name]?delete a.selected:"INPUT"===a.nodeName&&"value"===t[n._const.name]&&delete a.value;break;case n._const.modifyTextElement:a.data=t[n._const.newValue],"TEXTAREA"===o.nodeName&&(o.value=t[n._const.newValue]);break;case n._const.modifyValue:a.value=t[n._const.newValue];break;case n._const.modifyComment:a.data=t[n._const.newValue];break;case n._const.modifyChecked:a.checked=t[n._const.newValue];break;case n._const.modifySelected:a.selected=t[n._const.newValue];break;case n._const.replaceElement:l=T(t[n._const.newValue]),o.childNodes[i]=l;break;case n._const.relocateGroup:a.childNodes.splice(t[n._const.from],t[n._const.groupLength]).reverse().forEach((function(e){return a.childNodes.splice(t[n._const.to],0,e)})),a.subsets&&a.subsets.forEach((function(e){if(t[n._const.from]<t[n._const.to]&&e.oldValue<=t[n._const.to]&&e.oldValue>t[n._const.from])e.oldValue-=t[n._const.groupLength],(r=e.oldValue+e.length-t[n._const.to])>0&&(u.push({oldValue:t[n._const.to]+t[n._const.groupLength],newValue:e.newValue+e.length-r,length:r}),e.length-=r);else if(t[n._const.from]>t[n._const.to]&&e.oldValue>t[n._const.to]&&e.oldValue<t[n._const.from]){var r;e.oldValue+=t[n._const.groupLength],(r=e.oldValue+e.length-t[n._const.to])>0&&(u.push({oldValue:t[n._const.to]+t[n._const.groupLength],newValue:e.newValue+e.length-r,length:r}),e.length-=r)}else e.oldValue===t[n._const.from]&&(e.oldValue=t[n._const.to])}));break;case n._const.removeElement:o.childNodes.splice(i,1),o.subsets&&o.subsets.forEach((function(e){e.oldValue>i?e.oldValue-=1:e.oldValue===i?e.delete=!0:e.oldValue<i&&e.oldValue+e.length>i&&(e.oldValue+e.length-1===i?e.length--:(u.push({newValue:e.newValue+i-e.oldValue,oldValue:i,length:e.length-i+e.oldValue-1}),e.length=i-e.oldValue))})),a=o;break;case n._const.addElement:var p=(c=t[n._const.route].slice()).splice(c.length-1,1)[0];a=null===(r=V(e,c))||void 0===r?void 0:r.node,l=T(t[n._const.element]),a.childNodes||(a.childNodes=[]),p>=a.childNodes.length?a.childNodes.push(l):a.childNodes.splice(p,0,l),a.subsets&&a.subsets.forEach((function(e){if(e.oldValue>=p)e.oldValue+=1;else if(e.oldValue<p&&e.oldValue+e.length>p){var t=e.oldValue+e.length-p;u.push({newValue:e.newValue+e.length-t,oldValue:p+1,length:t}),e.length-=t}}));break;case n._const.removeTextElement:o.childNodes.splice(i,1),"TEXTAREA"===o.nodeName&&delete o.value,o.subsets&&o.subsets.forEach((function(e){e.oldValue>i?e.oldValue-=1:e.oldValue===i?e.delete=!0:e.oldValue<i&&e.oldValue+e.length>i&&(e.oldValue+e.length-1===i?e.length--:(u.push({newValue:e.newValue+i-e.oldValue,oldValue:i,length:e.length-i+e.oldValue-1}),e.length=i-e.oldValue))})),a=o;break;case n._const.addTextElement:var h=(c=t[n._const.route].slice()).splice(c.length-1,1)[0];l={nodeName:"#text",data:t[n._const.value]},(a=V(e,c).node).childNodes||(a.childNodes=[]),h>=a.childNodes.length?a.childNodes.push(l):a.childNodes.splice(h,0,l),"TEXTAREA"===a.nodeName&&(a.value=t[n._const.newValue]),a.subsets&&a.subsets.forEach((function(e){if(e.oldValue>=h&&(e.oldValue+=1),e.oldValue<h&&e.oldValue+e.length>h){var t=e.oldValue+e.length-h;u.push({newValue:e.newValue+e.length-t,oldValue:h+1,length:t}),e.length-=t}}));break;default:console.log("unknown action")}a.subsets&&(a.subsets=a.subsets.filter((function(e){return!e.delete&&e.oldValue!==e.newValue})),u.length&&(a.subsets=a.subsets.concat(u))),n.postVirtualDiffApply({node:d.node,diff:d.diff,newNode:l})}(e,t,n)})),!0}function R(e,t){void 0===t&&(t={valueDiffing:!0});var n={nodeName:e.nodeName};return F(e,"Text","Comment")?n.data=e.data:(e.attributes&&e.attributes.length>0&&(n.attributes={},Array.prototype.slice.call(e.attributes).forEach((function(e){return n.attributes[e.name]=e.value}))),e.childNodes&&e.childNodes.length>0&&(n.childNodes=[],Array.prototype.slice.call(e.childNodes).forEach((function(e){return n.childNodes.push(R(e,t))}))),t.valueDiffing&&(F(e,"HTMLTextAreaElement")&&(n.value=e.value),F(e,"HTMLInputElement")&&["radio","checkbox"].includes(e.type.toLowerCase())&&void 0!==e.checked?n.checked=e.checked:F(e,"HTMLButtonElement","HTMLDataElement","HTMLInputElement","HTMLLIElement","HTMLMeterElement","HTMLOptionElement","HTMLProgressElement","HTMLParamElement")&&(n.value=e.value),F(e,"HTMLOptionElement")&&(n.selected=e.selected))),n}var B=/<\s*\/*[a-zA-Z:_][a-zA-Z0-9:_\-.]*\s*(?:"[^"]*"['"]*|'[^']*'['"]*|[^'"/>])*\/*\s*>|<!--(?:.|\n|\r)*?-->/g,G=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function U(e){return e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}var z={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuItem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},$=function(e,t){var n={nodeName:"",attributes:{}},r=!1,a=e.match(/<\/?([^\s]+?)[/\s>]/);if(a&&(n.nodeName=t||"svg"===a[1]?a[1]:a[1].toUpperCase(),(z[a[1]]||"/"===e.charAt(e.length-2))&&(r=!0),n.nodeName.startsWith("!--"))){var o=e.indexOf("--\x3e");return{type:"comment",node:{nodeName:"#comment",data:-1!==o?e.slice(4,o):""},voidElement:r}}for(var i=new RegExp(G),s=null,l=!1;!l;)if(null===(s=i.exec(e)))l=!0;else if(s[0].trim())if(s[1]){var c=s[1].trim(),u=[c,""];c.indexOf("=")>-1&&(u=c.split("=")),n.attributes[u[0]]=u[1],i.lastIndex--}else s[2]&&(n.attributes[s[2]]=s[3].trim().substring(1,s[3].length-1));return{type:"tag",node:n,voidElement:r}},Y=function(e,t){void 0===t&&(t={valueDiffing:!0,caseSensitive:!1});var n,r=[],a=-1,o=[],i=!1;if(0!==e.indexOf("<")){var s=e.indexOf("<");r.push({nodeName:"#text",data:-1===s?e:e.substring(0,s)})}return e.replace(B,(function(s,l){var c="/"!==s.charAt(1),u=s.startsWith("\x3c!--"),d=l+s.length,p=e.charAt(d);if(u){var h=$(s,t.caseSensitive).node;if(a<0)return r.push(h),"";var f=o[a];return f&&h.nodeName&&(f.node.childNodes||(f.node.childNodes=[]),f.node.childNodes.push(h)),""}if(c){if("svg"===(n=$(s,t.caseSensitive||i)).node.nodeName&&(i=!0),a++,!n.voidElement&&p&&"<"!==p){n.node.childNodes||(n.node.childNodes=[]);var m=U(e.slice(d,e.indexOf("<",d)));n.node.childNodes.push({nodeName:"#text",data:m}),t.valueDiffing&&"TEXTAREA"===n.node.nodeName&&(n.node.value=m)}0===a&&n.node.nodeName&&r.push(n.node);var g=o[a-1];g&&n.node.nodeName&&(g.node.childNodes||(g.node.childNodes=[]),g.node.childNodes.push(n.node)),o[a]=n}if((!c||n.voidElement)&&(a>-1&&(n.voidElement||t.caseSensitive&&n.node.nodeName===s.slice(2,-1)||!t.caseSensitive&&n.node.nodeName.toUpperCase()===s.slice(2,-1).toUpperCase())&&--a>-1&&("svg"===n.node.nodeName&&(i=!1),n=o[a]),"<"!==p&&p)){var v=-1===a?r:o[a].node.childNodes||[],b=e.indexOf("<",d);m=U(e.slice(d,-1===b?void 0:b)),v.push({nodeName:"#text",data:m})}return""})),r[0]},W=function(){function e(e,t,n){this.options=n,this.t1="undefined"!=typeof Element&&F(e,"Element")?R(e,this.options):"string"==typeof e?Y(e,this.options):JSON.parse(JSON.stringify(e)),this.t2="undefined"!=typeof Element&&F(t,"Element")?R(t,this.options):"string"==typeof t?Y(t,this.options):JSON.parse(JSON.stringify(t)),this.diffcount=0,this.foundAll=!1,this.debug&&(this.t1Orig="undefined"!=typeof Element&&F(e,"Element")?R(e,this.options):"string"==typeof e?Y(e,this.options):JSON.parse(JSON.stringify(e)),this.t2Orig="undefined"!=typeof Element&&F(t,"Element")?R(t,this.options):"string"==typeof t?Y(t,this.options):JSON.parse(JSON.stringify(t))),this.tracker=new k}return e.prototype.init=function(){return this.findDiffs(this.t1,this.t2)},e.prototype.findDiffs=function(e,t){var n;do{if(this.options.debug&&(this.diffcount+=1,this.diffcount>this.options.diffcap))throw new Error("surpassed diffcap:".concat(JSON.stringify(this.t1Orig)," -> ").concat(JSON.stringify(this.t2Orig)));0===(n=this.findNextDiff(e,t,[])).length&&(x(e,t)||(this.foundAll?console.error("Could not find remaining diffs!"):(this.foundAll=!0,j(e),n=this.findNextDiff(e,t,[])))),n.length>0&&(this.foundAll=!1,this.tracker.add(n),H(e,n,this.options))}while(n.length>0);return this.tracker.list},e.prototype.findNextDiff=function(e,t,n){var r,a;if(this.options.maxDepth&&n.length>this.options.maxDepth)return[];if(!e.outerDone){if(r=this.findOuterDiff(e,t,n),this.options.filterOuterDiff&&(a=this.options.filterOuterDiff(e,t,r))&&(r=a),r.length>0)return e.outerDone=!0,r;e.outerDone=!0}if(Object.prototype.hasOwnProperty.call(e,"data"))return[];if(!e.innerDone){if((r=this.findInnerDiff(e,t,n)).length>0)return r;e.innerDone=!0}if(this.options.valueDiffing&&!e.valueDone){if((r=this.findValueDiff(e,t,n)).length>0)return e.valueDone=!0,r;e.valueDone=!0}return[]},e.prototype.findOuterDiff=function(e,t,n){var r,a,o,i,s,l,c=[];if(e.nodeName!==t.nodeName){if(!n.length)throw new Error("Top level nodes have to be of the same kind.");return[(new E).setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,T(e)).setValue(this.options._const.newValue,T(t)).setValue(this.options._const.route,n)]}if(n.length&&this.options.diffcap<Math.abs((e.childNodes||[]).length-(t.childNodes||[]).length))return[(new E).setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,T(e)).setValue(this.options._const.newValue,T(t)).setValue(this.options._const.route,n)];if(Object.prototype.hasOwnProperty.call(e,"data")&&e.data!==t.data)return"#text"===e.nodeName?[(new E).setValue(this.options._const.action,this.options._const.modifyTextElement).setValue(this.options._const.route,n).setValue(this.options._const.oldValue,e.data).setValue(this.options._const.newValue,t.data)]:[(new E).setValue(this.options._const.action,this.options._const.modifyComment).setValue(this.options._const.route,n).setValue(this.options._const.oldValue,e.data).setValue(this.options._const.newValue,t.data)];for(a=e.attributes?Object.keys(e.attributes).sort():[],o=t.attributes?Object.keys(t.attributes).sort():[],i=a.length,l=0;l<i;l++)r=a[l],-1===(s=o.indexOf(r))?c.push((new E).setValue(this.options._const.action,this.options._const.removeAttribute).setValue(this.options._const.route,n).setValue(this.options._const.name,r).setValue(this.options._const.value,e.attributes[r])):(o.splice(s,1),e.attributes[r]!==t.attributes[r]&&c.push((new E).setValue(this.options._const.action,this.options._const.modifyAttribute).setValue(this.options._const.route,n).setValue(this.options._const.name,r).setValue(this.options._const.oldValue,e.attributes[r]).setValue(this.options._const.newValue,t.attributes[r])));for(i=o.length,l=0;l<i;l++)r=o[l],c.push((new E).setValue(this.options._const.action,this.options._const.addAttribute).setValue(this.options._const.route,n).setValue(this.options._const.name,r).setValue(this.options._const.value,t.attributes[r]));return c},e.prototype.findInnerDiff=function(e,t,n){var r=e.childNodes?e.childNodes.slice():[],a=t.childNodes?t.childNodes.slice():[],o=Math.max(r.length,a.length),i=Math.abs(r.length-a.length),s=[],l=0;if(!this.options.maxChildCount||o<this.options.maxChildCount){var c=Boolean(e.subsets&&e.subsetsAge--),u=c?e.subsets:e.childNodes&&t.childNodes?M(e,t):[];if(u.length>0&&(s=this.attemptGroupRelocation(e,t,u,n,c)).length>0)return s}for(var d=0;d<o;d+=1){var p=r[d],h=a[d];i&&(p&&!h?"#text"===p.nodeName?(s.push((new E).setValue(this.options._const.action,this.options._const.removeTextElement).setValue(this.options._const.route,n.concat(l)).setValue(this.options._const.value,p.data)),l-=1):(s.push((new E).setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.route,n.concat(l)).setValue(this.options._const.element,T(p))),l-=1):h&&!p&&("#text"===h.nodeName?s.push((new E).setValue(this.options._const.action,this.options._const.addTextElement).setValue(this.options._const.route,n.concat(l)).setValue(this.options._const.value,h.data)):s.push((new E).setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.route,n.concat(l)).setValue(this.options._const.element,T(h))))),p&&h&&(!this.options.maxChildCount||o<this.options.maxChildCount?s=s.concat(this.findNextDiff(p,h,n.concat(l))):x(p,h)||(r.length>a.length?("#text"===p.nodeName?s.push((new E).setValue(this.options._const.action,this.options._const.removeTextElement).setValue(this.options._const.route,n.concat(l)).setValue(this.options._const.value,p.data)):s.push((new E).setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.element,T(p)).setValue(this.options._const.route,n.concat(l))),r.splice(d,1),d-=1,l-=1,i-=1):r.length<a.length?(s=s.concat([(new E).setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.element,T(h)).setValue(this.options._const.route,n.concat(l))]),r.splice(d,0,T(h)),i-=1):s=s.concat([(new E).setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,T(p)).setValue(this.options._const.newValue,T(h)).setValue(this.options._const.route,n.concat(l))]))),l+=1}return e.innerDone=!0,s},e.prototype.attemptGroupRelocation=function(e,t,n,r,a){for(var o,i,s,l,c,u=function(e,t,n){var r=e.childNodes?I(e.childNodes.length,!0):[],a=t.childNodes?I(t.childNodes.length,!0):[],o=0;return n.forEach((function(e){for(var t=e.oldValue+e.length,n=e.newValue+e.length,i=e.oldValue;i<t;i+=1)r[i]=o;for(i=e.newValue;i<n;i+=1)a[i]=o;o+=1})),{gaps1:r,gaps2:a}}(e,t,n),d=u.gaps1,p=u.gaps2,h=e.childNodes.slice(),f=t.childNodes.slice(),m=Math.min(d.length,p.length),g=[],v=0,b=0;v<m;b+=1,v+=1)if(!a||!0!==d[v]&&!0!==p[v])if(!0===d[b])if("#text"===(l=h[b]).nodeName)if("#text"===f[v].nodeName){if(l.data!==f[v].data){for(var S=b;h.length>S+1&&"#text"===h[S+1].nodeName;)if(S+=1,f[v].data===h[S].data){c=!0;break}c||g.push((new E).setValue(this.options._const.action,this.options._const.modifyTextElement).setValue(this.options._const.route,r.concat(b)).setValue(this.options._const.oldValue,l.data).setValue(this.options._const.newValue,f[v].data))}}else g.push((new E).setValue(this.options._const.action,this.options._const.removeTextElement).setValue(this.options._const.route,r.concat(b)).setValue(this.options._const.value,l.data)),d.splice(b,1),h.splice(b,1),m=Math.min(d.length,p.length),b-=1,v-=1;else!0===p[v]?g.push((new E).setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,T(l)).setValue(this.options._const.newValue,T(f[v])).setValue(this.options._const.route,r.concat(b))):(g.push((new E).setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.route,r.concat(b)).setValue(this.options._const.element,T(l))),d.splice(b,1),h.splice(b,1),m=Math.min(d.length,p.length),b-=1,v-=1);else if(!0===p[v])"#text"===(l=f[v]).nodeName?(g.push((new E).setValue(this.options._const.action,this.options._const.addTextElement).setValue(this.options._const.route,r.concat(b)).setValue(this.options._const.value,l.data)),d.splice(b,0,!0),h.splice(b,0,{nodeName:"#text",data:l.data}),m=Math.min(d.length,p.length)):(g.push((new E).setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.route,r.concat(b)).setValue(this.options._const.element,T(l))),d.splice(b,0,!0),h.splice(b,0,T(l)),m=Math.min(d.length,p.length));else if(d[b]!==p[v]){if(g.length>0)return g;if(s=n[d[b]],(i=Math.min(s.newValue,h.length-s.length))!==s.oldValue){o=!1;for(var y=0;y<s.length;y+=1)L(h[i+y],h[s.oldValue+y],{},!1,!0)||(o=!0);if(o)return[(new E).setValue(this.options._const.action,this.options._const.relocateGroup).setValue(this.options._const.groupLength,s.length).setValue(this.options._const.from,s.oldValue).setValue(this.options._const.to,i).setValue(this.options._const.route,r)]}}return g},e.prototype.findValueDiff=function(e,t,n){var r=[];return e.selected!==t.selected&&r.push((new E).setValue(this.options._const.action,this.options._const.modifySelected).setValue(this.options._const.oldValue,e.selected).setValue(this.options._const.newValue,t.selected).setValue(this.options._const.route,n)),(e.value||t.value)&&e.value!==t.value&&"OPTION"!==e.nodeName&&r.push((new E).setValue(this.options._const.action,this.options._const.modifyValue).setValue(this.options._const.oldValue,e.value||"").setValue(this.options._const.newValue,t.value||"").setValue(this.options._const.route,n)),e.checked!==t.checked&&r.push((new E).setValue(this.options._const.action,this.options._const.modifyChecked).setValue(this.options._const.oldValue,e.checked).setValue(this.options._const.newValue,t.checked).setValue(this.options._const.route,n)),r},e}(),Z={debug:!1,diffcap:10,maxDepth:!1,maxChildCount:50,valueDiffing:!0,textDiff:function(e,t,n,r){e.data=r},preVirtualDiffApply:function(){},postVirtualDiffApply:function(){},preDiffApply:function(){},postDiffApply:function(){},filterOuterDiff:null,compress:!1,_const:!1,document:!("undefined"==typeof window||!window.document)&&window.document,components:[]},J=function(){function e(e){if(void 0===e&&(e={}),Object.entries(Z).forEach((function(t){var n=t[0],r=t[1];Object.prototype.hasOwnProperty.call(e,n)||(e[n]=r)})),!e._const){var t=["addAttribute","modifyAttribute","removeAttribute","modifyTextElement","relocateGroup","removeElement","addElement","removeTextElement","addTextElement","replaceElement","modifyValue","modifyChecked","modifySelected","modifyComment","action","route","oldValue","newValue","element","group","groupLength","from","to","name","value","data","attributes","nodeName","childNodes","checked","selected"],n={};e.compress?t.forEach((function(e,t){return n[e]=t})):t.forEach((function(e){return n[e]=e})),e._const=n}this.options=e}return e.prototype.apply=function(e,t){return function(e,t,n){return t.every((function(t){return C(e,t,n)}))}(e,t,this.options)},e.prototype.undo=function(e,t){return function(e,t,n){(t=t.slice()).reverse(),t.forEach((function(t){!function(e,t,n){switch(t[n._const.action]){case n._const.addAttribute:t[n._const.action]=n._const.removeAttribute,C(e,t,n);break;case n._const.modifyAttribute:P(t,n._const.oldValue,n._const.newValue),C(e,t,n);break;case n._const.removeAttribute:t[n._const.action]=n._const.addAttribute,C(e,t,n);break;case n._const.modifyTextElement:case n._const.modifyValue:case n._const.modifyComment:case n._const.modifyChecked:case n._const.modifySelected:case n._const.replaceElement:P(t,n._const.oldValue,n._const.newValue),C(e,t,n);break;case n._const.relocateGroup:P(t,n._const.from,n._const.to),C(e,t,n);break;case n._const.removeElement:t[n._const.action]=n._const.addElement,C(e,t,n);break;case n._const.addElement:t[n._const.action]=n._const.removeElement,C(e,t,n);break;case n._const.removeTextElement:t[n._const.action]=n._const.addTextElement,C(e,t,n);break;case n._const.addTextElement:t[n._const.action]=n._const.removeTextElement,C(e,t,n);break;default:console.log("unknown action")}}(e,t,n)}))}(e,t,this.options)},e.prototype.diff=function(e,t){return new W(e,t,this.options).init()},e}();const Q=(e,t,n,{classes:r,format:a,hiddenHeader:o,sortable:i,scrollY:s,type:l},{noColumnWidths:c,unhideHeader:u})=>({nodeName:"TR",childNodes:e.map(((e,d)=>{const p=t[d]||{type:l,format:a,sortable:!0,searchable:!0};if(p.hidden)return;const h=e.attributes?{...e.attributes}:{};if(p.sortable&&i&&(!s.length||u)&&(p.filter?h["data-filterable"]="true":h["data-sortable"]="true"),p.headerClass&&(h.class=y(h.class,p.headerClass)),n.sort&&n.sort.column===d){const e="asc"===n.sort.dir?r.ascending:r.descending;h.class=y(h.class,e),h["aria-sort"]="asc"===n.sort.dir?"ascending":"descending"}else n.filters[d]&&(h.class=y(h.class,r.filterActive));if(n.widths[d]&&!c){const e=`width: ${n.widths[d]}%;`;h.style=y(h.style,e)}if(s.length&&!u){const e="padding-bottom: 0;padding-top: 0;border: 0;";h.style=y(h.style,e)}const f="html"===e.type?e.data:[{nodeName:"#text",data:e.text??String(e.data)}];return{nodeName:"TH",attributes:h,childNodes:!o&&!s.length||u?p.sortable&&i?[{nodeName:"BUTTON",attributes:{class:p.filter?r.filter:r.sorter},childNodes:f}]:f:[{nodeName:"#text",data:""}]}})).filter((e=>e))}),K=(e,t,n,r,a,o,{classes:i,hiddenHeader:s,header:l,footer:c,format:u,sortable:d,scrollY:p,type:h,rowRender:f,tabIndex:g},{noColumnWidths:v,unhideHeader:b,renderHeader:S},w,q)=>{const E={nodeName:"TABLE",attributes:{...e},childNodes:[{nodeName:"TBODY",childNodes:n.map((({row:e,index:t})=>{const n={nodeName:"TR",attributes:{...e.attributes,"data-index":String(t)},childNodes:e.cells.map(((e,n)=>{const o=r[n]||{type:h,format:u,sortable:!0,searchable:!0};if(o.hidden)return;const i={nodeName:"TD",attributes:e.attributes?{...e.attributes}:{},childNodes:"html"===o.type?e.data:[{nodeName:"#text",data:m(e)}]};if(l||c||!a.widths[n]||v||(i.attributes.style=y(i.attributes.style,`width: ${a.widths[n]}%;`)),o.cellClass&&(i.attributes.class=y(i.attributes.class,o.cellClass)),o.render){const r=o.render(e.data,i,t,n);if(r){if("string"!=typeof r)return r;{const e=Y(`<td>${r}</td>`);1===e.childNodes.length&&["#text","#comment"].includes(e.childNodes[0].nodeName)?i.childNodes[0].data=r:i.childNodes=e.childNodes}}}return i})).filter((e=>e))};if(t===o&&(n.attributes.class=y(n.attributes.class,i.cursor)),f){const r=f(e,n,t);if(r){if("string"!=typeof r)return r;{const e=Y(`<tr>${r}</tr>`);!e.childNodes||1===e.childNodes.length&&["#text","#comment"].includes(e.childNodes[0].nodeName)?n.childNodes[0].data=r:n.childNodes=e.childNodes}}}return n}))}]};if(E.attributes.class=y(E.attributes.class,i.table),l||c||S){const e=Q(t,r,a,{classes:i,hiddenHeader:s,sortable:d,scrollY:p},{noColumnWidths:v,unhideHeader:b});if(l||S){const t={nodeName:"THEAD",childNodes:[e]};!p.length&&!s||b||(t.attributes={style:"height: 0px;"}),E.childNodes.unshift(t)}if(c){const t={nodeName:"TFOOT",childNodes:[l?structuredClone(e):e]};!p.length&&!s||b||(t.attributes={style:"height: 0px;"}),E.childNodes.push(t)}}return w.forEach((e=>E.childNodes.push(e))),q.forEach((e=>E.childNodes.push(e))),!1!==g&&(E.attributes.tabindex=String(g)),E};function X(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self&&self;var ee=X({exports:{}}.exports=function(){var e=6e4,t=36e5,n="millisecond",r="second",a="minute",o="hour",i="day",s="week",l="month",c="quarter",u="year",d="date",p="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,f=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},g=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},v={s:g,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),a=n%60;return(t<=0?"+":"-")+g(r,2,"0")+":"+g(a,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),a=t.clone().add(r,l),o=n-a<0,i=t.clone().add(r+(o?-1:1),l);return+(-(r+(n-a)/(o?a-i:i-a))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:l,y:u,w:s,d:i,D:d,h:o,m:a,s:r,ms:n,Q:c}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},b="en",S={};S[b]=m;var y="$isDayjsObject",w=function(e){return e instanceof O||!(!e||!e[y])},q=function e(t,n,r){var a;if(!t)return b;if("string"==typeof t){var o=t.toLowerCase();S[o]&&(a=o),n&&(S[o]=n,a=o);var i=t.split("-");if(!a&&i.length>1)return e(i[0])}else{var s=t.name;S[s]=t,a=s}return!r&&a&&(b=a),a||!r&&b},E=function(e,t){if(w(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new O(n)},F=v;F.l=q,F.i=w,F.w=function(e,t){return E(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var O=function(){function m(e){this.$L=q(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[y]=!0}var g=m.prototype;return g.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(F.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(h);if(r){var a=r[2]-1||0,o=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],a,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)):new Date(r[1],a,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)}}return new Date(t)}(e),this.init()},g.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},g.$utils=function(){return F},g.isValid=function(){return!(this.$d.toString()===p)},g.isSame=function(e,t){var n=E(e);return this.startOf(t)<=n&&n<=this.endOf(t)},g.isAfter=function(e,t){return E(e)<this.startOf(t)},g.isBefore=function(e,t){return this.endOf(t)<E(e)},g.$g=function(e,t,n){return F.u(e)?this[t]:this.set(n,e)},g.unix=function(){return Math.floor(this.valueOf()/1e3)},g.valueOf=function(){return this.$d.getTime()},g.startOf=function(e,t){var n=this,c=!!F.u(t)||t,p=F.p(e),h=function(e,t){var r=F.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return c?r:r.endOf(i)},f=function(e,t){return F.w(n.toDate()[e].apply(n.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},m=this.$W,g=this.$M,v=this.$D,b="set"+(this.$u?"UTC":"");switch(p){case u:return c?h(1,0):h(31,11);case l:return c?h(1,g):h(0,g+1);case s:var S=this.$locale().weekStart||0,y=(m<S?m+7:m)-S;return h(c?v-y:v+(6-y),g);case i:case d:return f(b+"Hours",0);case o:return f(b+"Minutes",1);case a:return f(b+"Seconds",2);case r:return f(b+"Milliseconds",3);default:return this.clone()}},g.endOf=function(e){return this.startOf(e,!1)},g.$set=function(e,t){var s,c=F.p(e),p="set"+(this.$u?"UTC":""),h=(s={},s[i]=p+"Date",s[d]=p+"Date",s[l]=p+"Month",s[u]=p+"FullYear",s[o]=p+"Hours",s[a]=p+"Minutes",s[r]=p+"Seconds",s[n]=p+"Milliseconds",s)[c],f=c===i?this.$D+(t-this.$W):t;if(c===l||c===u){var m=this.clone().set(d,1);m.$d[h](f),m.init(),this.$d=m.set(d,Math.min(this.$D,m.daysInMonth())).$d}else h&&this.$d[h](f);return this.init(),this},g.set=function(e,t){return this.clone().$set(e,t)},g.get=function(e){return this[F.p(e)]()},g.add=function(n,c){var d,p=this;n=Number(n);var h=F.p(c),f=function(e){var t=E(p);return F.w(t.date(t.date()+Math.round(e*n)),p)};if(h===l)return this.set(l,this.$M+n);if(h===u)return this.set(u,this.$y+n);if(h===i)return f(1);if(h===s)return f(7);var m=(d={},d[a]=e,d[o]=t,d[r]=1e3,d)[h]||1,g=this.$d.getTime()+n*m;return F.w(g,this)},g.subtract=function(e,t){return this.add(-1*e,t)},g.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||p;var r=e||"YYYY-MM-DDTHH:mm:ssZ",a=F.z(this),o=this.$H,i=this.$m,s=this.$M,l=n.weekdays,c=n.months,u=n.meridiem,d=function(e,n,a,o){return e&&(e[n]||e(t,r))||a[n].slice(0,o)},h=function(e){return F.s(o%12||12,e,"0")},m=u||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r};return r.replace(f,(function(e,r){return r||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return F.s(t.$y,4,"0");case"M":return s+1;case"MM":return F.s(s+1,2,"0");case"MMM":return d(n.monthsShort,s,c,3);case"MMMM":return d(c,s);case"D":return t.$D;case"DD":return F.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return d(n.weekdaysMin,t.$W,l,2);case"ddd":return d(n.weekdaysShort,t.$W,l,3);case"dddd":return l[t.$W];case"H":return String(o);case"HH":return F.s(o,2,"0");case"h":return h(1);case"hh":return h(2);case"a":return m(o,i,!0);case"A":return m(o,i,!1);case"m":return String(i);case"mm":return F.s(i,2,"0");case"s":return String(t.$s);case"ss":return F.s(t.$s,2,"0");case"SSS":return F.s(t.$ms,3,"0");case"Z":return a}return null}(e)||a.replace(":","")}))},g.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},g.diff=function(n,d,p){var h,f=this,m=F.p(d),g=E(n),v=(g.utcOffset()-this.utcOffset())*e,b=this-g,S=function(){return F.m(f,g)};switch(m){case u:h=S()/12;break;case l:h=S();break;case c:h=S()/3;break;case s:h=(b-v)/6048e5;break;case i:h=(b-v)/864e5;break;case o:h=b/t;break;case a:h=b/e;break;case r:h=b/1e3;break;default:h=b}return p?h:F.a(h)},g.daysInMonth=function(){return this.endOf(l).$D},g.$locale=function(){return S[this.$L]},g.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=q(e,t,!0);return r&&(n.$L=r),n},g.clone=function(){return F.w(this.$d,this)},g.toDate=function(){return new Date(this.valueOf())},g.toJSON=function(){return this.isValid()?this.toISOString():null},g.toISOString=function(){return this.$d.toISOString()},g.toString=function(){return this.$d.toUTCString()},m}(),N=O.prototype;return E.prototype=N,[["$ms",n],["$s",r],["$m",a],["$H",o],["$W",i],["$M",l],["$y",u],["$D",d]].forEach((function(e){N[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),E.extend=function(e,t){return e.$i||(e(t,O,E),e.$i=!0),E},E.locale=q,E.isDayjs=w,E.unix=function(e){return E(1e3*e)},E.en=S[b],E.Ls=S,E.p={},E}()),te=X({exports:{}}.exports=function(){var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,n=/\d\d/,r=/\d\d?/,a=/\d*[^-_:/,()\s\d]+/,o={},i=function(e){return(e=+e)+(e>68?1900:2e3)},s=function(e){return function(t){this[e]=+t}},l=[/[+-]\d\d:?(\d\d)?|Z/,function(e){(this.zone||(this.zone={})).offset=function(e){if(!e)return 0;if("Z"===e)return 0;var t=e.match(/([+-]|\d\d)/g),n=60*t[1]+(+t[2]||0);return 0===n?0:"+"===t[0]?-n:n}(e)}],c=function(e){var t=o[e];return t&&(t.indexOf?t:t.s.concat(t.f))},u=function(e,t){var n,r=o.meridiem;if(r){for(var a=1;a<=24;a+=1)if(e.indexOf(r(a,0,t))>-1){n=a>12;break}}else n=e===(t?"pm":"PM");return n},d={A:[a,function(e){this.afternoon=u(e,!1)}],a:[a,function(e){this.afternoon=u(e,!0)}],S:[/\d/,function(e){this.milliseconds=100*+e}],SS:[n,function(e){this.milliseconds=10*+e}],SSS:[/\d{3}/,function(e){this.milliseconds=+e}],s:[r,s("seconds")],ss:[r,s("seconds")],m:[r,s("minutes")],mm:[r,s("minutes")],H:[r,s("hours")],h:[r,s("hours")],HH:[r,s("hours")],hh:[r,s("hours")],D:[r,s("day")],DD:[n,s("day")],Do:[a,function(e){var t=o.ordinal,n=e.match(/\d+/);if(this.day=n[0],t)for(var r=1;r<=31;r+=1)t(r).replace(/\[|\]/g,"")===e&&(this.day=r)}],M:[r,s("month")],MM:[n,s("month")],MMM:[a,function(e){var t=c("months"),n=(c("monthsShort")||t.map((function(e){return e.slice(0,3)}))).indexOf(e)+1;if(n<1)throw new Error;this.month=n%12||n}],MMMM:[a,function(e){var t=c("months").indexOf(e)+1;if(t<1)throw new Error;this.month=t%12||t}],Y:[/[+-]?\d+/,s("year")],YY:[n,function(e){this.year=i(e)}],YYYY:[/\d{4}/,s("year")],Z:l,ZZ:l};function p(n){var r,a;r=n,a=o&&o.formats;for(var i=(n=r.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,n,r){var o=r&&r.toUpperCase();return n||a[r]||e[r]||a[o].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,n){return t||n.slice(1)}))}))).match(t),s=i.length,l=0;l<s;l+=1){var c=i[l],u=d[c],p=u&&u[0],h=u&&u[1];i[l]=h?{regex:p,parser:h}:c.replace(/^\[|\]$/g,"")}return function(e){for(var t={},n=0,r=0;n<s;n+=1){var a=i[n];if("string"==typeof a)r+=a.length;else{var o=a.regex,l=a.parser,c=e.slice(r),u=o.exec(c)[0];l.call(t,u),e=e.replace(u,"")}}return function(e){var t=e.afternoon;if(void 0!==t){var n=e.hours;t?n<12&&(e.hours+=12):12===n&&(e.hours=0),delete e.afternoon}}(t),t}}return function(e,t,n){n.p.customParseFormat=!0,e&&e.parseTwoDigitYear&&(i=e.parseTwoDigitYear);var r=t.prototype,a=r.parse;r.parse=function(e){var t=e.date,r=e.utc,i=e.args;this.$u=r;var s=i[1];if("string"==typeof s){var l=!0===i[2],c=!0===i[3],u=l||c,d=i[2];c&&(d=i[2]),o=this.$locale(),!l&&d&&(o=n.Ls[d]),this.$d=function(e,t,n){try{if(["x","X"].indexOf(t)>-1)return new Date(("X"===t?1e3:1)*e);var r=p(t)(e),a=r.year,o=r.month,i=r.day,s=r.hours,l=r.minutes,c=r.seconds,u=r.milliseconds,d=r.zone,h=new Date,f=i||(a||o?1:h.getDate()),m=a||h.getFullYear(),g=0;a&&!o||(g=o>0?o-1:h.getMonth());var v=s||0,b=l||0,S=c||0,y=u||0;return d?new Date(Date.UTC(m,g,f,v,b,S,y+60*d.offset*1e3)):n?new Date(Date.UTC(m,g,f,v,b,S,y)):new Date(m,g,f,v,b,S,y)}catch(e){return new Date("")}}(t,s,r),this.init(),d&&!0!==d&&(this.$L=this.locale(d).$L),u&&t!=this.format(s)&&(this.$d=new Date("")),o={}}else if(s instanceof Array)for(var h=s.length,f=1;f<=h;f+=1){i[1]=s[f-1];var m=n.apply(this,i);if(m.isValid()){this.$d=m.$d,this.$L=m.$L,this.init();break}f===h&&(this.$d=new Date(""))}else a.call(this,e)}}}());ee.extend(te);const ne=(e,t)=>{let n;if(t)switch(t){case"ISO_8601":n=e;break;case"RFC_2822":n=ee(e.slice(5),"DD MMM YYYY HH:mm:ss ZZ").unix();break;case"MYSQL":n=ee(e,"YYYY-MM-DD hh:mm:ss").unix();break;case"UNIX":n=ee(e).unix();break;default:n=ee(e,t,!0).valueOf()}return n},re=(e,t)=>{if(e?.constructor===Object&&Object.prototype.hasOwnProperty.call(e,"data")&&!Object.keys(e).find((e=>!["text","order","data","attributes"].includes(e))))return e;const n={data:e};switch(t.type){case"string":"string"!=typeof e&&(n.text=String(n.data),n.order=n.text);break;case"date":t.format&&(n.order=ne(String(n.data),t.format));break;case"number":n.text=String(n.data),n.data=parseFloat(n.data),n.order=n.data;break;case"html":{const e=Array.isArray(n.data)?{nodeName:"TD",childNodes:n.data}:Y(`<td>${String(n.data)}</td>`);n.data=e.childNodes||[];const t=f(e);n.text=t,n.order=t;break}case"boolean":"string"==typeof n.data&&(n.data=n.data.toLowerCase().trim()),n.data=!["false",!1,null,void 0,0].includes(n.data),n.order=n.data?1:0,n.text=String(n.data);break;case"other":n.text="",n.order=0;break;default:n.text=JSON.stringify(n.data)}return n},ae=e=>{if(e instanceof Object&&e.constructor===Object&&e.hasOwnProperty("data")&&("string"==typeof e.text||"string"==typeof e.data))return e;const t={data:e};if("string"==typeof e){if(e.length){const n=Y(`<th>${e}</th>`);if(n.childNodes&&(1!==n.childNodes.length||"#text"!==n.childNodes[0].nodeName)){t.data=n.childNodes,t.type="html";const e=f(n);t.text=e}}}else[null,void 0].includes(e)?t.text="":t.text=JSON.stringify(e);return t},oe=(e,t=void 0,n,r,a)=>{const o={data:[],headings:[]};if(e.headings)o.headings=e.headings.map((e=>ae(e)));else if(t?.tHead)o.headings=Array.from(t.tHead.querySelectorAll("th")).map(((e,t)=>{const o=(e=>{const t=R(e,{valueDiffing:!1});let n;return n=!t.childNodes||1===t.childNodes.length&&"#text"===t.childNodes[0].nodeName?{data:e.innerText,type:"string"}:{data:t.childNodes,type:"html",text:f(t)},n.attributes=t.attributes,n})(e);n[t]||(n[t]={type:r,format:a,searchable:!0,sortable:!0});const i=n[t];return"false"!==e.dataset.sortable?.trim().toLowerCase()&&"false"!==e.dataset.sort?.trim().toLowerCase()||(i.sortable=!1),"false"===e.dataset.searchable?.trim().toLowerCase()&&(i.searchable=!1),"true"!==e.dataset.hidden?.trim().toLowerCase()&&"true"!==e.getAttribute("hidden")?.trim().toLowerCase()||(i.hidden=!0),["number","string","html","date","boolean","other"].includes(e.dataset.type)&&(i.type=e.dataset.type,"date"===i.type&&e.dataset.format&&(i.format=e.dataset.format)),o}));else if(e.data?.length){const t=e.data[0],n=Array.isArray(t)?t:t.cells;o.headings=n.map((e=>ae("")))}else t?.tBodies.length&&(o.headings=Array.from(t.tBodies[0].rows[0].cells).map((e=>ae(""))));for(let e=0;e<o.headings.length;e++)n[e]||(n[e]={type:r,format:a,sortable:!0,searchable:!0});if(e.data){const t=o.headings.map((e=>e.data?String(e.data):e.text));o.data=e.data.map((e=>{let r,a;return Array.isArray(e)?(r={},a=e):e.hasOwnProperty("cells")&&Object.keys(e).every((e=>["cells","attributes"].includes(e)))?(r=e.attributes,a=e.cells):(r={},a=[],Object.entries(e).forEach((([e,n])=>{const r=t.indexOf(e);r>-1&&(a[r]=n)}))),{attributes:r,cells:a.map(((e,t)=>re(e,n[t])))}}))}else t?.tBodies?.length&&(o.data=Array.from(t.tBodies[0].rows).map((e=>({attributes:v(e.attributes),cells:Array.from(e.cells).map(((e,t)=>{const r=e.dataset.content?re(e.dataset.content,n[t]):((e,t)=>{let n;switch(t.type){case"string":n={data:e.innerText};break;case"date":{const r=e.innerText;n={data:r,order:ne(r,t.format)};break}case"number":{const t=parseFloat(e.innerText);n={data:t,order:t,text:e.innerText};break}case"boolean":{const t=!["false","0","null","undefined"].includes(e.innerText.toLowerCase().trim());n={data:t,text:t?"1":"0",order:t?1:0};break}default:n={data:R(e,{valueDiffing:!1}).childNodes||[],text:e.innerText,order:e.innerText}}return n.attributes=v(e.attributes),n})(e,n[t]);return e.dataset.order&&(r.order=isNaN(parseFloat(e.dataset.order))?e.dataset.order:parseFloat(e.dataset.order)),r}))}))));if(o.data.length&&o.data[0].cells.length!==o.headings.length)throw new Error("Data heading length mismatch.");return o};class ie{cursor;dt;constructor(e){this.dt=e,this.cursor=!1}setCursor(e=!1){if(e===this.cursor)return;const t=this.cursor;if(this.cursor=e,this.dt._renderTable(),!1!==e&&this.dt.options.scrollY){const e=b(this.dt.options.classes.cursor),t=this.dt.dom.querySelector(`tr${e}`);t&&t.scrollIntoView({block:"nearest"})}this.dt.emit("datatable.cursormove",this.cursor,t)}add(e){if(!Array.isArray(e)||e.length<1)return;const t={cells:e.map(((e,t)=>{const n=this.dt.columns.settings[t];return re(e,n)}))};this.dt.data.data.push(t),this.dt.hasRows=!0,this.dt.update(!0)}remove(e){if(!Array.isArray(e))return this.remove([e]);this.dt.data.data=this.dt.data.data.filter(((t,n)=>!e.includes(n))),this.dt.data.data.length||(this.dt.hasRows=!1),this.dt.update(!0)}findRowIndex(e,t){return this.dt.data.data.findIndex((n=>{const r=n.cells[e];return m(r).toLowerCase().includes(String(t).toLowerCase())}))}findRow(e,t){const n=this.findRowIndex(e,t);if(n<0)return{index:-1,row:null,cols:[]};const r=this.dt.data.data[n],a=r.cells.map((e=>e.data));return{index:n,row:r,cols:a}}updateRow(e,t){const n={cells:t.map(((e,t)=>{const n=this.dt.columns.settings[t];return re(e,n)}))};this.dt.data.data.splice(e,1,n),this.dt.update(!0)}}class se{dt;settings;_state;constructor(e){this.dt=e,this.init()}init(){[this.settings,this._state]=((e=[],t,n)=>{let r=[],a=!1;const o=[];return e.forEach((e=>{(Array.isArray(e.select)?e.select:[e.select]).forEach((i=>{r[i]?e.type&&(r[i].type=e.type):r[i]={type:e.type||t,sortable:!0,searchable:!0};const s=r[i];e.render&&(s.render=e.render),e.format?s.format=e.format:"date"===e.type&&(s.format=n),e.cellClass&&(s.cellClass=e.cellClass),e.headerClass&&(s.headerClass=e.headerClass),e.locale&&(s.locale=e.locale),!1===e.sortable?s.sortable=!1:(e.numeric&&(s.numeric=e.numeric),e.caseFirst&&(s.caseFirst=e.caseFirst)),!1===e.searchable?s.searchable=!1:e.sensitivity&&(s.sensitivity=e.sensitivity),(s.searchable||s.sortable)&&void 0!==e.ignorePunctuation&&(s.ignorePunctuation=e.ignorePunctuation),e.hidden&&(s.hidden=!0),e.filter&&(s.filter=e.filter),e.sortSequence&&(s.sortSequence=e.sortSequence),e.sort&&(e.filter?o[i]=e.sort:a={column:i,dir:e.sort}),void 0!==e.searchItemSeparator&&(s.searchItemSeparator=e.searchItemSeparator)}))})),r=r.map((e=>e||{type:t,format:"date"===t?n:void 0,sortable:!0,searchable:!0})),[r,{filters:o,sort:a,widths:[]}]})(this.dt.options.columns,this.dt.options.type,this.dt.options.format)}get(e){return e<0||e>=this.size()?null:{...this.settings[e]}}size(){return this.settings.length}swap(e){if(2===e.length){const t=this.dt.data.headings.map(((e,t)=>t)),n=e[0],r=e[1],a=t[r];return t[r]=t[n],t[n]=a,this.order(t)}}order(e){this.dt.data.headings=e.map((e=>this.dt.data.headings[e])),this.dt.data.data.forEach((t=>t.cells=e.map((e=>t.cells[e])))),this.settings=e.map((e=>this.settings[e])),this.dt.update()}hide(e){Array.isArray(e)||(e=[e]),e.length&&(e.forEach((e=>{this.settings[e]||(this.settings[e]={type:"string"}),this.settings[e].hidden=!0})),this.dt.update())}show(e){Array.isArray(e)||(e=[e]),e.length&&(e.forEach((e=>{this.settings[e]||(this.settings[e]={type:"string",sortable:!0}),delete this.settings[e].hidden})),this.dt.update())}visible(e){return void 0===e&&(e=[...Array(this.dt.data.headings.length).keys()]),Array.isArray(e)?e.map((e=>!this.settings[e]?.hidden)):!this.settings[e]?.hidden}add(e){const t=this.dt.data.headings.length;if(this.dt.data.headings=this.dt.data.headings.concat([ae(e.heading)]),this.dt.data.data.forEach(((t,n)=>{t.cells=t.cells.concat([re(e.data[n],e)])})),this.settings[t]={type:e.type||"string",sortable:!0,searchable:!0},e.type||e.format||e.sortable||e.render||e.filter){const n=this.settings[t];e.render&&(n.render=e.render),e.format&&(n.format=e.format),e.cellClass&&(n.cellClass=e.cellClass),e.headerClass&&(n.headerClass=e.headerClass),e.locale&&(n.locale=e.locale),!1===e.sortable?n.sortable=!1:(e.numeric&&(n.numeric=e.numeric),e.caseFirst&&(n.caseFirst=e.caseFirst)),!1===e.searchable?n.searchable=!1:e.sensitivity&&(n.sensitivity=e.sensitivity),(n.searchable||n.sortable)&&e.ignorePunctuation&&(n.ignorePunctuation=e.ignorePunctuation),e.hidden&&(n.hidden=!0),e.filter&&(n.filter=e.filter),e.sortSequence&&(n.sortSequence=e.sortSequence)}this.dt.update(!0)}remove(e){Array.isArray(e)||(e=[e]),this.dt.data.headings=this.dt.data.headings.filter(((t,n)=>!e.includes(n))),this.dt.data.data.forEach((t=>t.cells=t.cells.filter(((t,n)=>!e.includes(n))))),this.dt.update(!0)}filter(e,t=!1){if(!this.settings[e]?.filter?.length)return;const n=this._state.filters[e];let r;if(n){let t=!1;r=this.settings[e].filter.find((e=>!!t||(e===n&&(t=!0),!1)))}else{const t=this.settings[e].filter;r=t?t[0]:void 0}r?this._state.filters[e]=r:n&&(this._state.filters[e]=void 0),this.dt._currentPage=1,this.dt.update(),t||this.dt.emit("datatable.filter",e,r)}sort(e,t=void 0,n=!1){const r=this.settings[e];if(n||this.dt.emit("datatable.sorting",e,t),!t){const n=!(!this._state.sort||this._state.sort.column!==e)&&this._state.sort?.dir,a=r?.sortSequence||["asc","desc"];if(n){const e=a.indexOf(n);t=-1===e?a[0]||"asc":e===a.length-1?a[0]:a[e+1]}else t=a.length?a[0]:"asc"}const a=!!["string","html"].includes(r.type)&&new Intl.Collator(r.locale||this.dt.options.locale,{usage:"sort",numeric:r.numeric||this.dt.options.numeric,caseFirst:r.caseFirst||this.dt.options.caseFirst,ignorePunctuation:r.ignorePunctuation||this.dt.options.ignorePunctuation});this.dt.data.data.sort(((n,r)=>{const o=n.cells[e],i=r.cells[e];let s=o.order??m(o),l=i.order??m(i);if("desc"===t){const e=s;s=l,l=e}return a?a.compare(String(s),String(l)):s<l?-1:s>l?1:0})),this._state.sort={column:e,dir:t},this.dt._searchQueries.length?(this.dt.multiSearch(this.dt._searchQueries),this.dt.emit("datatable.sort",e,t)):n||(this.dt._currentPage=1,this.dt.update(),this.dt.emit("datatable.sort",e,t))}_measureWidths(){const e=this.dt.data.headings.filter(((e,t)=>!this.settings[t]?.hidden));if((this.dt.options.scrollY.length||this.dt.options.fixedColumns)&&e?.length){this._state.widths=[];const e={noPaging:!0};if(this.dt.options.header||this.dt.options.footer){this.dt.options.scrollY.length&&(e.unhideHeader=!0),this.dt.headerDOM&&this.dt.headerDOM.parentElement.removeChild(this.dt.headerDOM),e.noColumnWidths=!0,this.dt._renderTable(e);const t=Array.from(this.dt.dom.querySelector("thead, tfoot")?.firstElementChild?.querySelectorAll("th")||[]);let n=0;const r=this.dt.data.headings.map(((e,r)=>{if(this.settings[r]?.hidden)return 0;const a=t[n].offsetWidth;return n+=1,a})),a=r.reduce(((e,t)=>e+t),0);this._state.widths=r.map((e=>e/a*100))}else{e.renderHeader=!0,this.dt._renderTable(e);const t=Array.from(this.dt.dom.querySelector("thead, tfoot")?.firstElementChild?.querySelectorAll("th")||[]);let n=0;const r=this.dt.data.headings.map(((e,r)=>{if(this.settings[r]?.hidden)return 0;const a=t[n].offsetWidth;return n+=1,a})),a=r.reduce(((e,t)=>e+t),0);this._state.widths=r.map((e=>e/a*100))}this.dt._renderTable()}}}const le={sortable:!0,locale:"en",numeric:!0,caseFirst:"false",searchable:!0,sensitivity:"base",ignorePunctuation:!0,destroyable:!0,searchItemSeparator:"",searchQuerySeparator:" ",searchAnd:!1,data:{},type:"html",format:"YYYY-MM-DD",columns:[],paging:!0,perPage:10,perPageSelect:[5,10,15,20,25],nextPrev:!0,firstLast:!1,prevText:"‹",nextText:"›",firstText:"«",lastText:"»",ellipsisText:"…",truncatePager:!0,pagerDelta:2,scrollY:"",fixedColumns:!0,fixedHeight:!1,footer:!1,header:!0,hiddenHeader:!1,caption:void 0,rowNavigation:!1,tabIndex:!1,pagerRender:!1,rowRender:!1,tableRender:!1,diffDomOptions:{valueDiffing:!1},labels:{placeholder:"Search...",searchTitle:"Search within table",perPage:"entries per page",pageTitle:"Page {page}",noRows:"No entries found",noResults:"No results match your search query",info:"Showing {start} to {end} of {rows} entries"},template:(e,t)=>`<div class='${e.classes.top}'>\n    ${e.paging&&e.perPageSelect?`<div class='${e.classes.dropdown}'>\n            <label>\n                <select class='${e.classes.selector}' name="per-page"></select> ${e.labels.perPage}\n            </label>\n        </div>`:""}\n    ${e.searchable?`<div class='${e.classes.search}'>\n            <input class='${e.classes.input}' placeholder='${e.labels.placeholder}' type='search' name="search" title='${e.labels.searchTitle}'${t.id?` aria-controls="${t.id}"`:""}>\n        </div>`:""}\n</div>\n<div class='${e.classes.container}'${e.scrollY.length?` style='height: ${e.scrollY}; overflow-Y: auto;'`:""}></div>\n<div class='${e.classes.bottom}'>\n    ${e.paging?`<div class='${e.classes.info}'></div>`:""}\n    <nav class='${e.classes.pagination}'></nav>\n</div>`,classes:{active:"datatable-active",ascending:"datatable-ascending",bottom:"datatable-bottom",container:"datatable-container",cursor:"datatable-cursor",descending:"datatable-descending",disabled:"datatable-disabled",dropdown:"datatable-dropdown",ellipsis:"datatable-ellipsis",filter:"datatable-filter",filterActive:"datatable-filter-active",empty:"datatable-empty",headercontainer:"datatable-headercontainer",hidden:"datatable-hidden",info:"datatable-info",input:"datatable-input",loading:"datatable-loading",pagination:"datatable-pagination",paginationList:"datatable-pagination-list",paginationListItem:"datatable-pagination-list-item",paginationListItemLink:"datatable-pagination-list-item-link",search:"datatable-search",selector:"datatable-selector",sorter:"datatable-sorter",table:"datatable-table",top:"datatable-top",wrapper:"datatable-wrapper"}},ce=(e,t,n,r={})=>({nodeName:"LI",attributes:{class:r.active&&!r.hidden?`${n.classes.paginationListItem} ${n.classes.active}`:r.hidden?`${n.classes.paginationListItem} ${n.classes.hidden} ${n.classes.disabled}`:n.classes.paginationListItem},childNodes:[{nodeName:"BUTTON",attributes:{"data-page":String(e),class:n.classes.paginationListItemLink,"aria-label":n.labels.pageTitle.replace("{page}",String(e))},childNodes:[{nodeName:"#text",data:t}]}]});class ue{columns;containerDOM;_currentPage;data;_dd;dom;_events;hasHeadings;hasRows;headerDOM;_initialHTML;initialized;_label;lastPage;_listeners;onFirstPage;onLastPage;options;_pagerDOMs;_virtualPagerDOM;pages;_rect;rows;_searchData;_searchQueries;_tableAttributes;_tableFooters;_tableCaptions;totalPages;_virtualDOM;_virtualHeaderDOM;wrapperDOM;constructor(e,t={}){const n="string"==typeof e?document.querySelector(e):e;n instanceof HTMLTableElement?this.dom=n:(this.dom=document.createElement("table"),n.appendChild(this.dom));const r={...le.diffDomOptions,...t.diffDomOptions},a={...le.labels,...t.labels},o={...le.classes,...t.classes};this.options={...le,...t,diffDomOptions:r,labels:a,classes:o},this._initialHTML=this.options.destroyable?n.outerHTML:"",this.options.tabIndex?this.dom.tabIndex=this.options.tabIndex:this.options.rowNavigation&&-1===this.dom.tabIndex&&(this.dom.tabIndex=0),this._listeners={onResize:()=>this._onResize()},this._dd=new J(this.options.diffDomOptions||{}),this.initialized=!1,this._events={},this._currentPage=0,this.onFirstPage=!0,this.hasHeadings=!1,this.hasRows=!1,this._searchQueries=[],this.init()}init(){if(this.initialized||S(this.dom,this.options.classes.table))return!1;this._virtualDOM=R(this.dom,this.options.diffDomOptions||{}),this._tableAttributes={...this._virtualDOM.attributes},this._tableFooters=this._virtualDOM.childNodes?.filter((e=>"TFOOT"===e.nodeName))??[],this._tableCaptions=this._virtualDOM.childNodes?.filter((e=>"CAPTION"===e.nodeName))??[],void 0!==this.options.caption&&this._tableCaptions.push({nodeName:"CAPTION",childNodes:[{nodeName:"#text",data:this.options.caption}]}),this.rows=new ie(this),this.columns=new se(this),this.data=oe(this.options.data,this.dom,this.columns.settings,this.options.type,this.options.format),this._render(),setTimeout((()=>{this.emit("datatable.init"),this.initialized=!0}),10)}_render(){this.wrapperDOM=h("div",{class:`${this.options.classes.wrapper} ${this.options.classes.loading}`}),this.wrapperDOM.innerHTML=this.options.template(this.options,this.dom);const e=b(this.options.classes.selector),t=this.wrapperDOM.querySelector(`select${e}`);t&&this.options.paging&&this.options.perPageSelect?this.options.perPageSelect.forEach((e=>{const[n,r]=Array.isArray(e)?[e[0],e[1]]:[String(e),e],a=r===this.options.perPage,o=new Option(n,String(r),a,a);t.appendChild(o)})):t&&t.parentElement.removeChild(t);const n=b(this.options.classes.container);this.containerDOM=this.wrapperDOM.querySelector(n),this._pagerDOMs=[];const r=b(this.options.classes.pagination);Array.from(this.wrapperDOM.querySelectorAll(r)).forEach((e=>{e instanceof HTMLElement&&(e.innerHTML=`<ul class="${this.options.classes.paginationList}"></ul>`,this._pagerDOMs.push(e.firstElementChild))})),this._virtualPagerDOM={nodeName:"UL",attributes:{class:this.options.classes.paginationList}};const a=b(this.options.classes.info);this._label=this.wrapperDOM.querySelector(a),this.dom.parentElement.replaceChild(this.wrapperDOM,this.dom),this.containerDOM.appendChild(this.dom),this._rect=this.dom.getBoundingClientRect(),this._fixHeight(),this.options.header||this.wrapperDOM.classList.add("no-header"),this.options.footer||this.wrapperDOM.classList.add("no-footer"),this.options.sortable&&this.wrapperDOM.classList.add("sortable"),this.options.searchable&&this.wrapperDOM.classList.add("searchable"),this.options.fixedHeight&&this.wrapperDOM.classList.add("fixed-height"),this.options.fixedColumns&&this.wrapperDOM.classList.add("fixed-columns"),this._bindEvents(),this.columns._state.sort&&this.columns.sort(this.columns._state.sort.column,this.columns._state.sort.dir,!0),this.update(!0)}_renderTable(e={}){let t;t=(this.options.paging||this._searchQueries.length||this.columns._state.filters.length)&&this._currentPage&&this.pages.length&&!e.noPaging?this.pages[this._currentPage-1]:this.data.data.map(((e,t)=>({row:e,index:t})));let n=K(this._tableAttributes,this.data.headings,t,this.columns.settings,this.columns._state,this.rows.cursor,this.options,e,this._tableFooters,this._tableCaptions);if(this.options.tableRender){const e=this.options.tableRender(this.data,n,"main");e&&(n=e)}const r=this._dd.diff(this._virtualDOM,n);this._dd.apply(this.dom,r),this._virtualDOM=n}_renderPage(e=!1){this.hasRows&&this.totalPages?(this._currentPage>this.totalPages&&(this._currentPage=1),this._renderTable(),this.onFirstPage=1===this._currentPage,this.onLastPage=this._currentPage===this.lastPage):this.setMessage(this.options.labels.noRows);let t,n=0,r=0,a=0;if(this.totalPages&&(n=this._currentPage-1,r=n*this.options.perPage,a=r+this.pages[n].length,r+=1,t=this._searchQueries.length?this._searchData.length:this.data.data.length),this._label&&this.options.labels.info.length){const e=this.options.labels.info.replace("{start}",String(r)).replace("{end}",String(a)).replace("{page}",String(this._currentPage)).replace("{pages}",String(this.totalPages)).replace("{rows}",String(t));this._label.innerHTML=t?e:""}if(1==this._currentPage&&this._fixHeight(),this.options.rowNavigation&&this._currentPage&&(!this.rows.cursor||!this.pages[this._currentPage-1].find((e=>e.index===this.rows.cursor)))){const t=this.pages[this._currentPage-1];t.length&&(e?this.rows.setCursor(t[t.length-1].index):this.rows.setCursor(t[0].index))}}_renderPagers(){if(!this.options.paging)return;let e=((e,t,n,r,a)=>{let o=[];if(a.firstLast&&o.push(ce(1,a.firstText,a)),a.nextPrev){const t=e?1:n-1;o.push(ce(t,a.prevText,a,{hidden:e}))}let i=[...Array(r).keys()].map((e=>ce(e+1,String(e+1),a,{active:e===n-1})));if(a.truncatePager&&(i=((e,t,n,r)=>{const a=r.pagerDelta,o=r.classes,i=r.ellipsisText,s=2*a;let l=t-a,c=t+a;t<4-a+s?c=3+s:t>n-(3-a+s)&&(l=n-(2+s));const u=[];for(let t=1;t<=n;t++)if(1==t||t==n||t>=l&&t<=c){const n=e[t-1];u.push(n)}let d;const p=[];return u.forEach((t=>{const n=parseInt(t.childNodes[0].attributes["data-page"],10);if(d){const t=parseInt(d.childNodes[0].attributes["data-page"],10);if(n-t==2)p.push(e[t]);else if(n-t!=1){const e={nodeName:"LI",attributes:{class:`${o.paginationListItem} ${o.ellipsis} ${o.disabled}`},childNodes:[{nodeName:"BUTTON",attributes:{class:o.paginationListItemLink},childNodes:[{nodeName:"#text",data:i}]}]};p.push(e)}}p.push(t),d=t})),p})(i,n,r,a)),o=o.concat(i),a.nextPrev){const e=t?r:n+1;o.push(ce(e,a.nextText,a,{hidden:t}))}return a.firstLast&&o.push(ce(r,a.lastText,a)),{nodeName:"UL",attributes:{class:a.classes.paginationList},childNodes:i.length>1?o:[]}})(this.onFirstPage,this.onLastPage,this._currentPage,this.totalPages,this.options);if(this.options.pagerRender){const t=this.options.pagerRender([this.onFirstPage,this.onLastPage,this._currentPage,this.totalPages],e);t&&(e=t)}const t=this._dd.diff(this._virtualPagerDOM,e);this._pagerDOMs.forEach((e=>{this._dd.apply(e,t)})),this._virtualPagerDOM=e}_renderSeparateHeader(){const e=this.dom.parentElement;this.headerDOM||(this.headerDOM=document.createElement("div"),this._virtualHeaderDOM={nodeName:"DIV"}),e.parentElement.insertBefore(this.headerDOM,e);let t={nodeName:"TABLE",attributes:this._tableAttributes,childNodes:[{nodeName:"THEAD",childNodes:[Q(this.data.headings,this.columns.settings,this.columns._state,this.options,{unhideHeader:!0})]}]};if(t.attributes.class=y(t.attributes.class,this.options.classes.table),this.options.tableRender){const e=this.options.tableRender(this.data,t,"header");e&&(t=e)}const n={nodeName:"DIV",attributes:{class:this.options.classes.headercontainer},childNodes:[t]},r=this._dd.diff(this._virtualHeaderDOM,n);this._dd.apply(this.headerDOM,r),this._virtualHeaderDOM=n;const a=this.headerDOM.firstElementChild.clientWidth-this.dom.clientWidth;if(a){const e=structuredClone(this._virtualHeaderDOM);e.attributes.style=`padding-right: ${a}px;`;const t=this._dd.diff(this._virtualHeaderDOM,e);this._dd.apply(this.headerDOM,t),this._virtualHeaderDOM=e}e.scrollHeight>e.clientHeight&&(e.style.overflowY="scroll")}_bindEvents(){if(this.options.perPageSelect){const e=b(this.options.classes.selector),t=this.wrapperDOM.querySelector(e);t&&t instanceof HTMLSelectElement&&t.addEventListener("change",(()=>{this.options.perPage=parseInt(t.value,10),this.update(),this._fixHeight(),this.emit("datatable.perpage",this.options.perPage)}),!1)}this.options.searchable&&this.wrapperDOM.addEventListener("input",(e=>{const t=b(this.options.classes.input),n=e.target;if(!(n instanceof HTMLInputElement&&n.matches(t)))return;e.preventDefault();const r=[];if(Array.from(this.wrapperDOM.querySelectorAll(t)).filter((e=>e.value.length)).forEach((e=>{const t=e.dataset.and||this.options.searchAnd,n=e.dataset.querySeparator||this.options.searchQuerySeparator?e.value.split(this.options.searchQuerySeparator):[e.value];t?n.forEach((t=>{e.dataset.columns?r.push({terms:[t],columns:JSON.parse(e.dataset.columns)}):r.push({terms:[t],columns:void 0})})):e.dataset.columns?r.push({terms:n,columns:JSON.parse(e.dataset.columns)}):r.push({terms:n,columns:void 0})})),1===r.length&&1===r[0].terms.length){const e=r[0];this.search(e.terms[0],e.columns)}else this.multiSearch(r)})),this.wrapperDOM.addEventListener("click",(e=>{const t=e.target.closest("a, button");if(t)if(t.hasAttribute("data-page"))this.page(parseInt(t.getAttribute("data-page"),10)),e.preventDefault();else if(S(t,this.options.classes.sorter)){const n=Array.from(t.parentElement.parentElement.children).indexOf(t.parentElement),r=g(n,this.columns.settings);this.columns.sort(r),e.preventDefault()}else if(S(t,this.options.classes.filter)){const n=Array.from(t.parentElement.parentElement.children).indexOf(t.parentElement),r=g(n,this.columns.settings);this.columns.filter(r),e.preventDefault()}}),!1),this.options.rowNavigation?(this.dom.addEventListener("keydown",(e=>{if("ArrowUp"===e.key){let t;e.preventDefault(),e.stopPropagation(),this.pages[this._currentPage-1].find((e=>e.index===this.rows.cursor||(t=e,!1))),t?this.rows.setCursor(t.index):this.onFirstPage||this.page(this._currentPage-1,!0)}else if("ArrowDown"===e.key){let t;e.preventDefault(),e.stopPropagation();const n=this.pages[this._currentPage-1].find((e=>!!t||(e.index===this.rows.cursor&&(t=!0),!1)));n?this.rows.setCursor(n.index):this.onLastPage||this.page(this._currentPage+1)}else["Enter"," "].includes(e.key)&&this.emit("datatable.selectrow",this.rows.cursor,e)})),this.dom.addEventListener("mousedown",(e=>{const t=e.target;if(t instanceof Element&&this.dom.matches(":focus")){const n=Array.from(this.dom.querySelectorAll("tbody > tr")).find((e=>e.contains(t)));n&&n instanceof HTMLElement&&this.emit("datatable.selectrow",parseInt(n.dataset.index,10),e)}}))):this.dom.addEventListener("mousedown",(e=>{const t=e.target;if(!(t instanceof Element))return;const n=Array.from(this.dom.querySelectorAll("tbody > tr")).find((e=>e.contains(t)));n&&n instanceof HTMLElement&&this.emit("datatable.selectrow",parseInt(n.dataset.index,10),e)})),window.addEventListener("resize",this._listeners.onResize)}_onResize(){this._rect=this.containerDOM.getBoundingClientRect(),this._rect.width&&this.update(!0)}destroy(){if(this.options.destroyable){if(this.wrapperDOM.parentElement){const e=h("div");e.innerHTML=this._initialHTML,this.wrapperDOM.parentElement.replaceChild(e.firstElementChild,this.wrapperDOM)}else this.options.classes.table?.split(" ").forEach((e=>this.wrapperDOM.classList.remove(e)));window.removeEventListener("resize",this._listeners.onResize),this.initialized=!1}}update(e=!1){e&&(this.columns._measureWidths(),this.hasRows=Boolean(this.data.data.length),this.hasHeadings=Boolean(this.data.headings.length)),this.options.classes.empty?.split(" ").forEach((e=>this.wrapperDOM.classList.remove(e))),this._paginate(),this._renderPage(),this._renderPagers(),this.options.scrollY.length&&this._renderSeparateHeader(),this.emit("datatable.update")}_paginate(){let e=this.data.data.map(((e,t)=>({row:e,index:t})));return this._searchQueries.length&&(e=[],this._searchData.forEach((t=>e.push({index:t,row:this.data.data[t]})))),this.columns._state.filters.length&&this.columns._state.filters.forEach(((t,n)=>{t&&(e=e.filter((e=>{const r=e.row.cells[n];return"function"==typeof t?t(r.data):m(r)===t})))})),this.options.paging&&this.options.perPage>0?this.pages=e.map(((t,n)=>n%this.options.perPage==0?e.slice(n,n+this.options.perPage):null)).filter((e=>e)):this.pages=[e],this.totalPages=this.lastPage=this.pages.length,this._currentPage||(this._currentPage=1),this.totalPages}_fixHeight(){this.options.fixedHeight&&(this.containerDOM.style.height=null,this._rect=this.containerDOM.getBoundingClientRect(),this.containerDOM.style.height=`${this._rect.height}px`)}search(e,t=void 0){if(!e.length)return this._currentPage=1,this._searchQueries=[],this._searchData=[],this.update(),this.emit("datatable.search","",[]),this.wrapperDOM.classList.remove("search-results"),!1;this.multiSearch([{terms:[e],columns:t||void 0}]),this.emit("datatable.search",e,this._searchData)}multiSearch(e){if(!this.hasRows)return!1;this._currentPage=1,this._searchData=[];const t=e.map((e=>({columns:e.columns,terms:e.terms.map((e=>e.trim())).filter((e=>e))}))).filter((e=>e.terms.length));if(this._searchQueries=t,!t.length)return this.update(),this.emit("datatable.multisearch",t,this._searchData),this.wrapperDOM.classList.remove("search-results"),!1;const n=t.map((e=>this.columns.settings.map(((t,n)=>{if(t.hidden||!t.searchable||e.columns&&!e.columns.includes(n))return!1;let r=e.terms;const a=t.sensitivity||this.options.sensitivity;return["base","accent"].includes(a)&&(r=r.map((e=>e.toLowerCase()))),["base","case"].includes(a)&&(r=r.map((e=>e.normalize("NFD").replace(/\p{Diacritic}/gu,"")))),(t.ignorePunctuation??this.options.ignorePunctuation)&&(r=r.map((e=>e.replace(/[.,/#!$%^&*;:{}=-_`~()]/g,"")))),r}))));this.data.data.forEach(((e,t)=>{const r=e.cells.map(((e,t)=>{let n=m(e).trim();const r=this.columns.settings[t];if(n.length){const e=r.sensitivity||this.options.sensitivity;["base","accent"].includes(e)&&(n=n.toLowerCase()),["base","case"].includes(e)&&(n=n.normalize("NFD").replace(/\p{Diacritic}/gu,"")),(r.ignorePunctuation??this.options.ignorePunctuation)&&(n=n.replace(/[.,/#!$%^&*;:{}=-_`~()]/g,""))}const a=r.searchItemSeparator||this.options.searchItemSeparator;return a?n.split(a):[n]}));n.every((e=>e.find(((e,t)=>!!e&&e.find((e=>r[t].find((t=>t.includes(e)))))))))&&this._searchData.push(t)})),this.wrapperDOM.classList.add("search-results"),this._searchData.length?this.update():(this.wrapperDOM.classList.remove("search-results"),this.setMessage(this.options.labels.noResults)),this.emit("datatable.multisearch",t,this._searchData)}page(e,t=!1){return e!==this._currentPage&&(isNaN(e)||(this._currentPage=e),!(e>this.pages.length||e<0)&&(this._renderPage(t),this._renderPagers(),void this.emit("datatable.page",e)))}insert(e){let t=[];if(Array.isArray(e)){const n=this.data.headings.map((e=>e.data?String(e.data):e.text));e.forEach(((e,r)=>{const a=[];Object.entries(e).forEach((([e,t])=>{const o=n.indexOf(e);o>-1?a[o]=re(t,this.columns.settings[o]):this.hasHeadings||this.hasRows||0!==r||(a[n.length]=re(t,this.columns.settings[n.length]),n.push(e),this.data.headings.push(ae(e)))})),t.push({cells:a})}))}else p(e)&&(!e.headings||this.hasHeadings||this.hasRows?e.data&&Array.isArray(e.data)&&(t=e.data.map((e=>{let t,n;return Array.isArray(e)?(t={},n=e):(t=e.attributes,n=e.cells),{attributes:t,cells:n.map(((e,t)=>re(e,this.columns.settings[t])))}}))):this.data=oe(e,void 0,this.columns.settings,this.options.type,this.options.format));t.length&&t.forEach((e=>this.data.data.push(e))),this.hasHeadings=Boolean(this.data.headings.length),this.columns._state.sort&&this.columns.sort(this.columns._state.sort.column,this.columns._state.sort.dir,!0),this.update(!0)}refresh(){if(this.options.searchable){const e=b(this.options.classes.input);Array.from(this.wrapperDOM.querySelectorAll(e)).forEach((e=>e.value="")),this._searchQueries=[]}this._currentPage=1,this.onFirstPage=!0,this.update(!0),this.emit("datatable.refresh")}print(){const e=h("table");let t=K(this._tableAttributes,this.data.headings,this.data.data.map(((e,t)=>({row:e,index:t}))),this.columns.settings,this.columns._state,!1,this.options,{noColumnWidths:!0,unhideHeader:!0},this._tableFooters,this._tableCaptions);if(this.options.tableRender){const e=this.options.tableRender(this.data,t,"print");e&&(t=e)}const n=this._dd.diff({nodeName:"TABLE"},t);this._dd.apply(e,n);const r=window.open();r.document.body.appendChild(e),r.print()}setMessage(e){const t=this.data.headings.filter(((e,t)=>!this.columns.settings[t]?.hidden)).length||1;this.options.classes.empty?.split(" ").forEach((e=>this.wrapperDOM.classList.add(e))),this._label&&(this._label.innerHTML=""),this.totalPages=0,this._renderPagers();let n={nodeName:"TABLE",attributes:this._tableAttributes,childNodes:[{nodeName:"THEAD",childNodes:[Q(this.data.headings,this.columns.settings,this.columns._state,this.options,{})]},{nodeName:"TBODY",childNodes:[{nodeName:"TR",childNodes:[{nodeName:"TD",attributes:{class:this.options.classes.empty,colspan:String(t)},childNodes:[{nodeName:"#text",data:e}]}]}]}]};if(this._tableFooters.forEach((e=>n.childNodes.push(e))),this._tableCaptions.forEach((e=>n.childNodes.push(e))),n.attributes.class=y(n.attributes.class,this.options.classes.table),this.options.tableRender){const e=this.options.tableRender(this.data,n,"message");e&&(n=e)}const r=this._dd.diff(this._virtualDOM,n);this._dd.apply(this.dom,r),this._virtualDOM=n}on(e,t){this._events[e]=this._events[e]||[],this._events[e].push(t)}off(e,t){e in this._events!=0&&this._events[e].splice(this._events[e].indexOf(t),1)}emit(e,...t){if(e in this._events!=0)for(let n=0;n<this._events[e].length;n++)this._events[e][n](...t)}}function de(e){return null===e?"null":typeof e}function pe(e){return!!e&&"object"==typeof e}function he(e){if(void 0===e)return"";if(null===e)return"Object";if("object"==typeof e&&!e.constructor)return"Object";var t=/function ([^(]*)/.exec(e.constructor.toString());return t&&t.length>1?t[1]:""}function fe(e,t,n){return"null"===e||"undefined"===e?e:("string"!==e&&"stringifiable"!==e||(n='"'+n.replace(/"/g,'\\"')+'"'),"function"===e?t.toString().replace(/[\r\n]/g,"").replace(/\{.*\}/,"")+"{…}":n)}function me(e){var t="";return pe(e)?(t=he(e),Array.isArray(e)&&(t+="["+e.length+"]")):t=fe(de(e),e,e),t}function ge(e){return"json-formatter-"+e}function ve(e,t,n){var r=document.createElement(e);return t&&r.classList.add(ge(t)),void 0!==n&&(n instanceof Node?r.appendChild(n):r.appendChild(document.createTextNode(String(n)))),r}!function(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");t.setAttribute("media","screen"),t.innerHTML=e,document.head.appendChild(t)}}('.json-formatter-row {\n  font-family: monospace;\n}\n.json-formatter-row,\n.json-formatter-row a,\n.json-formatter-row a:hover {\n  color: black;\n  text-decoration: none;\n}\n.json-formatter-row .json-formatter-row {\n  margin-left: 1rem;\n}\n.json-formatter-row .json-formatter-children.json-formatter-empty {\n  opacity: 0.5;\n  margin-left: 1rem;\n}\n.json-formatter-row .json-formatter-children.json-formatter-empty:after {\n  display: none;\n}\n.json-formatter-row .json-formatter-children.json-formatter-empty.json-formatter-object:after {\n  content: "No properties";\n}\n.json-formatter-row .json-formatter-children.json-formatter-empty.json-formatter-array:after {\n  content: "[]";\n}\n.json-formatter-row .json-formatter-string,\n.json-formatter-row .json-formatter-stringifiable {\n  color: green;\n  white-space: pre;\n  word-wrap: break-word;\n}\n.json-formatter-row .json-formatter-number {\n  color: blue;\n}\n.json-formatter-row .json-formatter-boolean {\n  color: red;\n}\n.json-formatter-row .json-formatter-null {\n  color: #855A00;\n}\n.json-formatter-row .json-formatter-undefined {\n  color: #ca0b69;\n}\n.json-formatter-row .json-formatter-function {\n  color: #FF20ED;\n}\n.json-formatter-row .json-formatter-date {\n  background-color: rgba(0, 0, 0, 0.05);\n}\n.json-formatter-row .json-formatter-url {\n  text-decoration: underline;\n  color: blue;\n  cursor: pointer;\n}\n.json-formatter-row .json-formatter-bracket {\n  color: blue;\n}\n.json-formatter-row .json-formatter-key {\n  color: #00008B;\n  padding-right: 0.2rem;\n}\n.json-formatter-row .json-formatter-toggler-link {\n  cursor: pointer;\n}\n.json-formatter-row .json-formatter-toggler {\n  line-height: 1.2rem;\n  font-size: 0.7rem;\n  vertical-align: middle;\n  opacity: 0.6;\n  cursor: pointer;\n  padding-right: 0.2rem;\n}\n.json-formatter-row .json-formatter-toggler:after {\n  display: inline-block;\n  transition: transform 100ms ease-in;\n  content: "►";\n}\n.json-formatter-row > a > .json-formatter-preview-text {\n  opacity: 0;\n  transition: opacity 0.15s ease-in;\n  font-style: italic;\n}\n.json-formatter-row:hover > a > .json-formatter-preview-text {\n  opacity: 0.6;\n}\n.json-formatter-row.json-formatter-open > .json-formatter-toggler-link .json-formatter-toggler:after {\n  transform: rotate(90deg);\n}\n.json-formatter-row.json-formatter-open > .json-formatter-children:after {\n  display: inline-block;\n}\n.json-formatter-row.json-formatter-open > a > .json-formatter-preview-text {\n  display: none;\n}\n.json-formatter-row.json-formatter-open.json-formatter-empty:after {\n  display: block;\n}\n.json-formatter-dark.json-formatter-row {\n  font-family: monospace;\n}\n.json-formatter-dark.json-formatter-row,\n.json-formatter-dark.json-formatter-row a,\n.json-formatter-dark.json-formatter-row a:hover {\n  color: white;\n  text-decoration: none;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-row {\n  margin-left: 1rem;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-children.json-formatter-empty {\n  opacity: 0.5;\n  margin-left: 1rem;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-children.json-formatter-empty:after {\n  display: none;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-children.json-formatter-empty.json-formatter-object:after {\n  content: "No properties";\n}\n.json-formatter-dark.json-formatter-row .json-formatter-children.json-formatter-empty.json-formatter-array:after {\n  content: "[]";\n}\n.json-formatter-dark.json-formatter-row .json-formatter-string,\n.json-formatter-dark.json-formatter-row .json-formatter-stringifiable {\n  color: #31F031;\n  white-space: pre;\n  word-wrap: break-word;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-number {\n  color: #66C2FF;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-boolean {\n  color: #EC4242;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-null {\n  color: #EEC97D;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-undefined {\n  color: #ef8fbe;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-function {\n  color: #FD48CB;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-date {\n  background-color: rgba(255, 255, 255, 0.05);\n}\n.json-formatter-dark.json-formatter-row .json-formatter-url {\n  text-decoration: underline;\n  color: #027BFF;\n  cursor: pointer;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-bracket {\n  color: #9494FF;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-key {\n  color: #23A0DB;\n  padding-right: 0.2rem;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-toggler-link {\n  cursor: pointer;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-toggler {\n  line-height: 1.2rem;\n  font-size: 0.7rem;\n  vertical-align: middle;\n  opacity: 0.6;\n  cursor: pointer;\n  padding-right: 0.2rem;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-toggler:after {\n  display: inline-block;\n  transition: transform 100ms ease-in;\n  content: "►";\n}\n.json-formatter-dark.json-formatter-row > a > .json-formatter-preview-text {\n  opacity: 0;\n  transition: opacity 0.15s ease-in;\n  font-style: italic;\n}\n.json-formatter-dark.json-formatter-row:hover > a > .json-formatter-preview-text {\n  opacity: 0.6;\n}\n.json-formatter-dark.json-formatter-row.json-formatter-open > .json-formatter-toggler-link .json-formatter-toggler:after {\n  transform: rotate(90deg);\n}\n.json-formatter-dark.json-formatter-row.json-formatter-open > .json-formatter-children:after {\n  display: inline-block;\n}\n.json-formatter-dark.json-formatter-row.json-formatter-open > a > .json-formatter-preview-text {\n  display: none;\n}\n.json-formatter-dark.json-formatter-row.json-formatter-open.json-formatter-empty:after {\n  display: block;\n}\n');var be=/(^\d{1,4}[\.|\\/|-]\d{1,2}[\.|\\/|-]\d{1,4})(\s*(?:0?[1-9]:[0-5]|1(?=[012])\d:[0-5])\d\s*[ap]m)?$/,Se=/\d{2}:\d{2}:\d{2} GMT-\d{4}/,ye=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/,we=window.requestAnimationFrame||function(e){return e(),0},qe={hoverPreviewEnabled:!1,hoverPreviewArrayCount:100,hoverPreviewFieldCount:5,animateOpen:!0,animateClose:!0,theme:null,useToJSON:!0,sortPropertiesBy:null,maxArrayItems:100,exposePath:!1},Ee=function(){function e(e,t,n,r,a,o,i){void 0===t&&(t=1),void 0===n&&(n=qe),void 0===o&&(o=[]),this.json=e,this.open=t,this.config=n,this.key=r,this.displayKey=a,this.path=o,this.arrayRange=i,this._isOpen=null,void 0===this.config.hoverPreviewEnabled&&(this.config.hoverPreviewEnabled=qe.hoverPreviewEnabled),void 0===this.config.hoverPreviewArrayCount&&(this.config.hoverPreviewArrayCount=qe.hoverPreviewArrayCount),void 0===this.config.hoverPreviewFieldCount&&(this.config.hoverPreviewFieldCount=qe.hoverPreviewFieldCount),void 0===this.config.useToJSON&&(this.config.useToJSON=qe.useToJSON),void 0===this.config.maxArrayItems&&(this.config.maxArrayItems=qe.maxArrayItems),""===this.key&&(this.key='""'),void 0===this.displayKey&&(this.displayKey=this.key)}return Object.defineProperty(e.prototype,"isOpen",{get:function(){return null!==this._isOpen?this._isOpen:this.open>0},set:function(e){this._isOpen=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isDate",{get:function(){return this.json instanceof Date||"string"===this.type&&(be.test(this.json)||ye.test(this.json)||Se.test(this.json))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isUrl",{get:function(){return"string"===this.type&&0===this.json.indexOf("http")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isArray",{get:function(){return Array.isArray(this.json)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLargeArray",{get:function(){return this.isArray&&this.json.length>this.config.maxArrayItems},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isArrayRange",{get:function(){return this.isArray&&void 0!==this.arrayRange&&2==this.arrayRange.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isObject",{get:function(){return pe(this.json)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEmptyObject",{get:function(){return!this.keys.length&&!this.isArray},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEmpty",{get:function(){return this.isEmptyObject||this.keys&&!this.keys.length&&this.isArray},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"useToJSON",{get:function(){return this.config.useToJSON&&"stringifiable"===this.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasKey",{get:function(){return void 0!==this.key},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"constructorName",{get:function(){return he(this.json)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this.config.useToJSON&&this.json&&this.json.toJSON?"stringifiable":de(this.json)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"keys",{get:function(){if(this.isObject){var e=Object.keys(this.json);if(this.isLargeArray){var t=Math.ceil(this.json.length/this.config.maxArrayItems);e=[];for(var n=0;n<t;n++){var r=n*this.config.maxArrayItems,a=Math.min(this.json.length-1,r+(this.config.maxArrayItems-1));e.push(r+" … "+a)}}return!this.isArray&&this.config.sortPropertiesBy?e.sort(this.config.sortPropertiesBy):e}return[]},enumerable:!1,configurable:!0}),e.prototype.toggleOpen=function(){this.isOpen=!this.isOpen,this.element&&(this.isOpen?this.appendChildren(this.config.animateOpen):this.removeChildren(this.config.animateClose),this.element.classList.toggle(ge("open")))},e.prototype.openAtDepth=function(e){void 0===e&&(e=1),e<0||(this.open=e,this.isOpen=0!==e,this.element&&(this.removeChildren(!1),0===e?this.element.classList.remove(ge("open")):(this.appendChildren(this.config.animateOpen),this.element.classList.add(ge("open")))))},e.prototype.getInlinepreview=function(){var e=this;if(this.isArray)return this.json.length>this.config.hoverPreviewArrayCount?"Array["+this.json.length+"]":"["+this.json.map(me).join(", ")+"]";var t=this.keys,n=t.slice(0,this.config.hoverPreviewFieldCount).map((function(t){return t+":"+me(e.json[t])})),r=t.length>=this.config.hoverPreviewFieldCount?"…":"";return"{"+n.join(", ")+r+"}"},e.prototype.render=function(){this.element=ve("div","row");var e=this.isObject?ve("a","toggler-link"):ve("span");if(this.isObject&&!this.useToJSON&&e.appendChild(ve("span","toggler")),this.isArrayRange?e.appendChild(ve("span","range","["+this.displayKey+"]")):this.hasKey&&(e.appendChild(ve("span","key",this.displayKey+":")),this.config.exposePath&&(this.element.dataset.path=JSON.stringify(this.path))),this.isObject&&!this.useToJSON){var t=ve("span","value"),n=ve("span");if(!this.isArrayRange){var r=ve("span","constructor-name",this.constructorName);n.appendChild(r)}if(this.isArray&&!this.isArrayRange){var a=ve("span");a.appendChild(ve("span","bracket","[")),a.appendChild(ve("span","number",this.json.length)),a.appendChild(ve("span","bracket","]")),n.appendChild(a)}t.appendChild(n),e.appendChild(t)}else{(t=this.isUrl?ve("a"):ve("span")).classList.add(ge(this.type)),this.isDate&&t.classList.add(ge("date")),this.isUrl&&(t.classList.add(ge("url")),t.setAttribute("href",this.json));var o=fe(this.type,this.json,this.useToJSON?this.json.toJSON():this.json);t.appendChild(document.createTextNode(o)),e.appendChild(t)}if(this.isObject&&this.config.hoverPreviewEnabled){var i=ve("span","preview-text");i.appendChild(document.createTextNode(this.getInlinepreview())),e.appendChild(i)}var s=ve("div","children");return this.isObject&&s.classList.add(ge("object")),this.isArray&&s.classList.add(ge("array")),this.isEmpty&&s.classList.add(ge("empty")),this.config&&this.config.theme&&this.element.classList.add(ge(this.config.theme)),this.isOpen&&this.element.classList.add(ge("open")),this.element.appendChild(e),this.element.appendChild(s),this.isObject&&this.isOpen&&this.appendChildren(),this.isObject&&!this.useToJSON&&e.addEventListener("click",this.toggleOpen.bind(this)),this.element},e.prototype.appendChildren=function(t){var n=this;void 0===t&&(t=!1);var r=this.element.querySelector("div."+ge("children"));if(r&&!this.isEmpty){var a=function(t,a){var o=n.isLargeArray?[a*n.config.maxArrayItems,Math.min(n.json.length-1,a*n.config.maxArrayItems+(n.config.maxArrayItems-1))]:void 0,i=n.isArrayRange?(n.arrayRange[0]+a).toString():t,s=new e(o?n.json.slice(o[0],o[1]+1):n.json[t],n.open-1,n.config,t,i,o?n.path:n.path.concat(i),o);r.appendChild(s.render())};if(t){var o=0,i=function(){var e=n.keys[o];a(e,o),(o+=1)<n.keys.length&&(o>10?i():we(i))};we(i)}else this.keys.forEach((function(e,t){return a(e,t)}))}},e.prototype.removeChildren=function(e){void 0===e&&(e=!1);var t=this.element.querySelector("div."+ge("children"));if(e){var n=0,r=function(){t&&t.children.length&&(t.removeChild(t.children[0]),(n+=1)>10?r():we(r))};we(r)}else t&&(t.innerHTML="")},e}(),Fe=Ee;function Oe(e){return Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oe(e)}function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(n),!0).forEach((function(t){Pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Oe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Oe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Oe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}window.SequraFE||(window.SequraFE={}),SequraFE.AdvancedController=function(e){var t,n,r,a,o,i,s,l=SequraFE,c=l.templateService,u=l.elementGenerator,d=l.components,p=l.utilities,h=SequraFE.ajaxService,f="",m="sqp-datatable-wrapper";this.display=function(i){var s=i.storeId;f=s,c.clearMainPage(),n=SequraFE.state.getData("stores"),t=SequraFE.state.getData("version"),r=SequraFE.state.getData("connectionSettings"),a=SequraFE.state.getData("logsSettings"),(o=SequraFE.state.getData("logs"))?(g(),p.hideLoader()):h.get(e.getLogsUrl,null,SequraFE.customHeader).then((function(e){SequraFE.state.setData("logs",e),o=e})).catch((function(e){console.error(e)})).finally((function(){g(),p.hideLoader()}))};var g=function(){var e,o,i;document.getElementById("sq-page-wrapper").append(u.createElement("div","sq-page-content-wrapper sqv--transactions","",null,[SequraFE.components.PageHeader.create({currentVersion:null===(e=t)||void 0===e?void 0:e.current,newVersion:{versionLabel:null===(o=t)||void 0===o?void 0:o.new,versionUrl:null===(i=t)||void 0===i?void 0:i.downloadNewVersionUrl},mode:"live"===r.environment?r.environment:"test",activeStore:f,stores:n.map((function(e){return{label:e.storeName,value:e.storeId}})),onChange:function(e){e!==SequraFE.state.getStoreId()&&(SequraFE.state.setStoreId(e),window.location.hash="",SequraFE.state.display())},menuItems:SequraFE.utilities.getMenuItems(SequraFE.appStates.ADVANCED)}),u.createElement("div","sq-page-content","",null,[u.createElement("div","sq-content-row","",null,[u.createElement("main","sq-content","",null,[u.createElement("div","sq-content-inner","",null,[u.createElement("div","sqp-flash-message-wrapper"),u.createElement("div","sq-table-heading","",null,[u.createPageHeading({title:"general.advanced"})]),u.createToggleField({className:"sq-log-settings-toggle",value:a.isEnabled,label:"debug.title",description:"debug.description",onChange:y}),u.createDropdownField({label:"debug.log.minLevel",description:"debug.log.minLevelDescription",value:a.level,options:v(),variation:"label-left",onChange:w}),u.createElement("div",m)])])])]),u.createSupportLink()])),b()},v=function(){return[{label:"DEBUG",value:3},{label:"INFO",value:2},{label:"WARNING",value:1},{label:"ERROR",value:0}]},b=function(){var e;s&&(s.destroy(),s=null);var t=document.querySelector(".".concat(m));t&&SequraFE.templateService.clearComponent(t),t.append(d.DataTable.create([{label:"debug.log.severity",className:"sqm--text-left"},{label:"debug.log.datetime",className:"sqm--text-left"},{label:"debug.log.message",className:"sqm--text-left"}],null!==(e=o)&&void 0!==e&&e.length?function(e){return(i=e.map((function(e){return{type:(t=e.split("\t"))[0].trim(),datetime:t[1].trim(),message:t[2].trim(),context:t[3].trim()};var t}))).map((function(e,t){var n="sqm--text-left sqm--log sqm--log-".concat(e.type.toLowerCase());return[{label:e.type,className:n},{label:e.datetime,className:n},{label:e.message,className:"".concat(n," sqm--log-index-").concat(t),renderer:function(n){if(""!=e.context){var r=u.createButton({type:"text",className:"sqm--log-details"});r.setAttribute("data-index",t),n.append(r),n.append(u.createElement("div","sqm--log-context"))}return n}}]}))}(o):[])),s=new ue(".".concat(m," table"),{classes:{active:"sq-datatable__active",bottom:"sq-datatable__bottom",container:"sq-datatable__container",cursor:"sq-datatable__cursor",dropdown:"sq-datatable__dropdown",ellipsis:"sq-datatable__ellipsis",empty:"sq-datatable__empty",headercontainer:"sq-datatable__headercontainer",info:"sq-datatable__info",input:"sq-datatable__input",loading:"sq-datatable__loading",pagination:"sq-datatable__pagination",paginationList:"sq-datatable__pagination-list",search:"sq-datatable__search",selector:"sq-datatable__selector",sorter:"sq-datatable__sorter",table:"sq-datatable__table",top:"sq-datatable__top",wrapper:"sq-datatable__wrapper"}});var n=document.querySelector(".sq-datatable__search");if(n){n.append(u.createButtonField({className:"sq-controls sqm--block sqm--block-inline",buttonLabel:"debug.reload",onClick:F}),u.createButtonField({className:"sq-controls sqm--block sqm--block-inline",buttonType:"danger",buttonLabel:"debug.remove",onClick:E}));var r=function(){document.querySelectorAll(".sqm--log-context").forEach((function(e){e.style.display="none",e.innerHTML=""})),document.querySelectorAll(".sqm--log-details").forEach((function(e){e.classList.remove("sqm--log-details-open")}))};s.on("datatable.init",r),s.on("datatable.page",r),s.on("datatable.selectrow",(function(e,t){t.target.classList.contains("sqm--log-details")&&function(e){e.classList.toggle("sqm--log-details-open");var t=e.parentElement.querySelector(".sqm--log-context");if(t.style.display=e.classList.contains("sqm--log-details-open")?"block":"none",!t.firstChild){var n=JSON.parse(i[e.getAttribute("data-index")].context),r=new Fe(n,0);t.appendChild(r.render())}}(t.target)}))}},S=function(t){p.showLoader(),h.post(e.saveLogsSettingsUrl,t,SequraFE.customHeader).then((function(e){a=t,SequraFE.state.setData("logsSettings",a)})).catch((function(e){console.error(e),document.querySelector(".sq-log-settings-toggle input").checked=!value,q("general.errors.unknown","error")})).finally((function(){return p.hideLoader()}))},y=function(e){return S(Ce(Ce({},a),{},{isEnabled:e}))},w=function(e){return S(Ce(Ce({},a),{},{level:parseInt(e)}))},q=function(e,t){var n=document.querySelector(".sqp-flash-message-wrapper");n&&(SequraFE.templateService.clearComponent(n),n.prepend(SequraFE.utilities.createFlashMessage(e,t)))},E=function(){new Promise((function(e){var t=d.Modal.create({title:"debug.log.removeModal.title",className:"sq-modal",content:[u.createElement("p","","debug.log.removeModal.message")],footer:!0,buttons:[{type:"default",label:"general.cancel",onClick:function(){t.close(),e(!1)}},{type:"danger",label:"debug.remove",onClick:function(){t.close(),e(!0)}}]});t.open()})).then((function(t){t&&(p.showLoader(),h.delete(e.removeLogsUrl,null,SequraFE.customHeader).then((function(e){o=[],SequraFE.state.setData("logs",o),b()})).catch((function(e){console.error(e),q("general.errors.failedToRemoveLog","error")})).finally((function(){return p.hideLoader()})))}))},F=function(){p.showLoader(),h.get(e.getLogsUrl,null,SequraFE.customHeader).then((function(e){o=e,SequraFE.state.setData("logs",o),b()})).catch((function(e){console.error(e),q("general.errors.failedToRetrieveLog","error")})).finally((function(){return p.hideLoader()}))}},document.addEventListener("DOMContentLoaded",(function(){SequraFE.utilities.showLoader(),SequraFE.state=new SequraFE.StateController(SequraFE._state_controller),SequraFE.state.display(),SequraFE.utilities.hideLoader()}))}()}();
//# sourceMappingURL=settings.min.js.map